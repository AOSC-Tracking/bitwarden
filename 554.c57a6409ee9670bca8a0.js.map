{"version":3,"file":"554.c57a6409ee9670bca8a0.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/models/request/organization-collection-management-update.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/models/request/organization-update.request.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/account.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/account.component.ts","webpack://@bitwarden/web-vault/./src/app/auth/settings/two-factor-setup.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/two-factor-setup.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/organization-settings-routing.module.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/organization-settings.module.ts"],"sourcesContent":["export class OrganizationCollectionManagementUpdateRequest {\n  limitCreateDeleteOwnerAdmin: boolean;\n  allowAdminAccessToAllCollectionItems: boolean;\n}\n","import { OrganizationKeysRequest } from \"./organization-keys.request\";\n\nexport class OrganizationUpdateRequest {\n  name: string;\n  businessName: string;\n  billingEmail: string;\n  keys: OrganizationKeysRequest;\n}\n","<h1 bitTypography=\"h1\" class=\"tw-pb-2.5\">{{ \"organizationInfo\" | i18n }}</h1>\n<div *ngIf=\"loading\">\n  <i\n    class=\"bwi bwi-spinner bwi-spin text-muted\"\n    title=\"{{ 'loading' | i18n }}\"\n    aria-hidden=\"true\"\n  ></i>\n  <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n</div>\n<form *ngIf=\"org && !loading\" [bitSubmit]=\"submit\" [formGroup]=\"formGroup\">\n  <div class=\"tw-grid tw-grid-cols-2 tw-gap-5\">\n    <div>\n      <bit-form-field>\n        <bit-label>{{ \"organizationName\" | i18n }}</bit-label>\n        <input bitInput id=\"orgName\" type=\"text\" formControlName=\"orgName\" />\n      </bit-form-field>\n      <bit-form-field>\n        <bit-label>{{ \"billingEmail\" | i18n }}</bit-label>\n        <input bitInput id=\"billingEmail\" formControlName=\"billingEmail\" type=\"email\" />\n      </bit-form-field>\n      <bit-form-field>\n        <bit-label>{{ \"businessName\" | i18n }}</bit-label>\n        <input bitInput id=\"businessName\" formControlName=\"businessName\" type=\"text\" />\n      </bit-form-field>\n    </div>\n    <div>\n      <bit-avatar [text]=\"org.name\" [id]=\"org.id\" size=\"large\"></bit-avatar>\n      <app-account-fingerprint\n        [fingerprintMaterial]=\"organizationId\"\n        [publicKeyBuffer]=\"publicKeyBuffer\"\n        fingerprintLabel=\"{{ 'yourOrganizationsFingerprint' | i18n }}\"\n      >\n      </app-account-fingerprint>\n    </div>\n  </div>\n  <button type=\"submit\" bitButton bitFormButton buttonType=\"primary\">\n    {{ \"save\" | i18n }}\n  </button>\n</form>\n<ng-container *ngIf=\"canUseApi\">\n  <h1 bitTypography=\"h1\" class=\"tw-mt-16 tw-pb-2.5\">{{ \"apiKey\" | i18n }}</h1>\n  <p>\n    {{ \"apiKeyDesc\" | i18n }}\n    <a href=\"https://docs.bitwarden.com\" target=\"_blank\" rel=\"noopener\">\n      {{ \"learnMore\" | i18n }}\n    </a>\n  </p>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"viewApiKey()\">\n    {{ \"viewApiKey\" | i18n }}\n  </button>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"rotateApiKey()\">\n    {{ \"rotateApiKey\" | i18n }}\n  </button>\n</ng-container>\n<form\n  *ngIf=\"org && !loading && (flexibleCollectionsEnabled$ | async)\"\n  [bitSubmit]=\"submitCollectionManagement\"\n  [formGroup]=\"collectionManagementFormGroup\"\n>\n  <h1 bitTypography=\"h1\" class=\"tw-mt-16 tw-pb-2.5\">{{ \"collectionManagement\" | i18n }}</h1>\n  <p>{{ \"collectionManagementDesc\" | i18n }}</p>\n  <bit-form-control *ngIf=\"flexibleCollectionsV1Enabled$ | async\">\n    <bit-label>{{ \"allowAdminAccessToAllCollectionItemsDesc\" | i18n }}</bit-label>\n    <input type=\"checkbox\" bitCheckbox formControlName=\"allowAdminAccessToAllCollectionItems\" />\n  </bit-form-control>\n  <bit-form-control>\n    <bit-label>{{ \"limitCollectionCreationDeletionDesc\" | i18n }}</bit-label>\n    <input type=\"checkbox\" bitCheckbox formControlName=\"limitCollectionCreationDeletion\" />\n  </bit-form-control>\n  <button\n    *ngIf=\"!selfHosted\"\n    type=\"submit\"\n    bitButton\n    bitFormButton\n    buttonType=\"primary\"\n    id=\"collectionManagementSubmitButton\"\n  >\n    {{ \"save\" | i18n }}\n  </button>\n</form>\n<h1 bitTypography=\"h1\" class=\"tw-mt-16 tw-pb-2.5 !tw-text-danger\">{{ \"dangerZone\" | i18n }}</h1>\n<div class=\"tw-rounded tw-border tw-border-solid tw-border-danger-500 tw-bg-background tw-p-5\">\n  <p>{{ \"dangerZoneDesc\" | i18n }}</p>\n  <button type=\"button\" bitButton buttonType=\"danger\" (click)=\"deleteOrganization()\">\n    {{ \"deleteOrganization\" | i18n }}\n  </button>\n  <button type=\"button\" bitButton buttonType=\"danger\" (click)=\"purgeVault()\">\n    {{ \"purgeVault\" | i18n }}\n  </button>\n</div>\n<ng-template #purgeOrganizationTemplate></ng-template>\n<ng-template #apiKeyTemplate></ng-template>\n<ng-template #rotateApiKeyTemplate></ng-template>\n","import { Component, ViewChild, ViewContainerRef } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { combineLatest, from, lastValueFrom, of, Subject, switchMap, takeUntil } from \"rxjs\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationCollectionManagementUpdateRequest } from \"@bitwarden/common/admin-console/models/request/organization-collection-management-update.request\";\nimport { OrganizationKeysRequest } from \"@bitwarden/common/admin-console/models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"@bitwarden/common/admin-console/models/request/organization-update.request\";\nimport { OrganizationResponse } from \"@bitwarden/common/admin-console/models/response/organization.response\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { ApiKeyComponent } from \"../../../auth/settings/security/api-key.component\";\nimport { PurgeVaultComponent } from \"../../../vault/settings/purge-vault.component\";\n\nimport { DeleteOrganizationDialogResult, openDeleteOrganizationDialog } from \"./components\";\n\n@Component({\n  selector: \"app-org-account\",\n  templateUrl: \"account.component.html\",\n})\nexport class AccountComponent {\n  @ViewChild(\"purgeOrganizationTemplate\", { read: ViewContainerRef, static: true })\n  purgeModalRef: ViewContainerRef;\n  @ViewChild(\"apiKeyTemplate\", { read: ViewContainerRef, static: true })\n  apiKeyModalRef: ViewContainerRef;\n  @ViewChild(\"rotateApiKeyTemplate\", { read: ViewContainerRef, static: true })\n  rotateApiKeyModalRef: ViewContainerRef;\n\n  selfHosted = false;\n  canEditSubscription = true;\n  loading = true;\n  canUseApi = false;\n  org: OrganizationResponse;\n  taxFormPromise: Promise<unknown>;\n  flexibleCollectionsEnabled$ = this.configService.getFeatureFlag$(\n    FeatureFlag.FlexibleCollections,\n    false,\n  );\n  flexibleCollectionsV1Enabled$ = this.configService.getFeatureFlag$(\n    FeatureFlag.FlexibleCollectionsV1,\n    false,\n  );\n\n  // FormGroup validators taken from server Organization domain object\n  protected formGroup = this.formBuilder.group({\n    orgName: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      {\n        validators: [Validators.required, Validators.maxLength(50)],\n        updateOn: \"change\",\n      },\n    ),\n    billingEmail: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      { validators: [Validators.required, Validators.email, Validators.maxLength(256)] },\n    ),\n    businessName: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      { validators: [Validators.maxLength(50)] },\n    ),\n  });\n\n  protected collectionManagementFormGroup = this.formBuilder.group({\n    limitCollectionCreationDeletion: this.formBuilder.control({ value: false, disabled: true }),\n    allowAdminAccessToAllCollectionItems: this.formBuilder.control({\n      value: false,\n      disabled: true,\n    }),\n  });\n\n  protected organizationId: string;\n  protected publicKeyBuffer: Uint8Array;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private modalService: ModalService,\n    private i18nService: I18nService,\n    private route: ActivatedRoute,\n    private platformUtilsService: PlatformUtilsService,\n    private cryptoService: CryptoService,\n    private router: Router,\n    private organizationService: OrganizationService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private dialogService: DialogService,\n    private formBuilder: FormBuilder,\n    private configService: ConfigServiceAbstraction,\n  ) {}\n\n  async ngOnInit() {\n    this.selfHosted = this.platformUtilsService.isSelfHost();\n\n    this.route.params\n      .pipe(\n        switchMap((params) => this.organizationService.get$(params.organizationId)),\n        switchMap((organization) => {\n          return combineLatest([\n            of(organization),\n            // OrganizationResponse for form population\n            from(this.organizationApiService.get(organization.id)),\n            // Organization Public Key\n            from(this.organizationApiService.getKeys(organization.id)),\n          ]);\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(([organization, orgResponse, orgKeys]) => {\n        // Set domain level organization variables\n        this.organizationId = organization.id;\n        this.canEditSubscription = organization.canEditSubscription;\n        this.canUseApi = organization.useApi;\n\n        // Update disabled states - reactive forms prefers not using disabled attribute\n        if (!this.selfHosted) {\n          this.formGroup.get(\"orgName\").enable();\n          this.formGroup.get(\"businessName\").enable();\n          this.collectionManagementFormGroup.get(\"limitCollectionCreationDeletion\").enable();\n          this.collectionManagementFormGroup.get(\"allowAdminAccessToAllCollectionItems\").enable();\n        }\n\n        if (!this.selfHosted && this.canEditSubscription) {\n          this.formGroup.get(\"billingEmail\").enable();\n        }\n\n        // Org Response\n        this.org = orgResponse;\n\n        // Public Key Buffer for Org Fingerprint Generation\n        this.publicKeyBuffer = Utils.fromB64ToArray(orgKeys?.publicKey);\n\n        // Patch existing values\n        this.formGroup.patchValue({\n          orgName: this.org.name,\n          billingEmail: this.org.billingEmail,\n          businessName: this.org.businessName,\n        });\n        this.collectionManagementFormGroup.patchValue({\n          limitCollectionCreationDeletion: this.org.limitCollectionCreationDeletion,\n          allowAdminAccessToAllCollectionItems: this.org.allowAdminAccessToAllCollectionItems,\n        });\n\n        this.loading = false;\n      });\n  }\n\n  ngOnDestroy(): void {\n    // You must first call .next() in order for the notifier to properly close subscriptions using takeUntil\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  submit = async () => {\n    this.formGroup.markAllAsTouched();\n    if (this.formGroup.invalid) {\n      return;\n    }\n\n    const request = new OrganizationUpdateRequest();\n    request.name = this.formGroup.value.orgName;\n    request.businessName = this.formGroup.value.businessName;\n    request.billingEmail = this.formGroup.value.billingEmail;\n\n    // Backfill pub/priv key if necessary\n    if (!this.org.hasPublicAndPrivateKeys) {\n      const orgShareKey = await this.cryptoService.getOrgKey(this.organizationId);\n      const orgKeys = await this.cryptoService.makeKeyPair(orgShareKey);\n      request.keys = new OrganizationKeysRequest(orgKeys[0], orgKeys[1].encryptedString);\n    }\n\n    await this.organizationApiService.save(this.organizationId, request);\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"organizationUpdated\"));\n  };\n\n  submitCollectionManagement = async () => {\n    // Early exit if self-hosted\n    if (this.selfHosted) {\n      return;\n    }\n\n    const request = new OrganizationCollectionManagementUpdateRequest();\n    request.limitCreateDeleteOwnerAdmin =\n      this.collectionManagementFormGroup.value.limitCollectionCreationDeletion;\n    request.allowAdminAccessToAllCollectionItems =\n      this.collectionManagementFormGroup.value.allowAdminAccessToAllCollectionItems;\n\n    await this.organizationApiService.updateCollectionManagement(this.organizationId, request);\n\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"collectionManagementUpdated\"),\n    );\n  };\n\n  async deleteOrganization() {\n    const dialog = openDeleteOrganizationDialog(this.dialogService, {\n      data: {\n        organizationId: this.organizationId,\n        requestType: \"RegularDelete\",\n      },\n    });\n\n    const result = await lastValueFrom(dialog.closed);\n\n    if (result === DeleteOrganizationDialogResult.Deleted) {\n      this.router.navigate([\"/\"]);\n    }\n  }\n\n  async purgeVault() {\n    await this.modalService.openViewRef(PurgeVaultComponent, this.purgeModalRef, (comp) => {\n      comp.organizationId = this.organizationId;\n    });\n  }\n\n  async viewApiKey() {\n    await this.modalService.openViewRef(ApiKeyComponent, this.apiKeyModalRef, (comp) => {\n      comp.keyType = \"organization\";\n      comp.entityId = this.organizationId;\n      comp.postKey = this.organizationApiService.getOrCreateApiKey.bind(\n        this.organizationApiService,\n      );\n      comp.scope = \"api.organization\";\n      comp.grantType = \"client_credentials\";\n      comp.apiKeyTitle = \"apiKey\";\n      comp.apiKeyWarning = \"apiKeyWarning\";\n      comp.apiKeyDescription = \"apiKeyDesc\";\n    });\n  }\n\n  async rotateApiKey() {\n    await this.modalService.openViewRef(ApiKeyComponent, this.rotateApiKeyModalRef, (comp) => {\n      comp.keyType = \"organization\";\n      comp.isRotation = true;\n      comp.entityId = this.organizationId;\n      comp.postKey = this.organizationApiService.rotateApiKey.bind(this.organizationApiService);\n      comp.scope = \"api.organization\";\n      comp.grantType = \"client_credentials\";\n      comp.apiKeyTitle = \"apiKey\";\n      comp.apiKeyWarning = \"apiKeyWarning\";\n      comp.apiKeyDescription = \"apiKeyRotateDesc\";\n    });\n  }\n}\n","<div [ngClass]=\"tabbedHeader ? 'tabbed-header' : 'page-header'\">\n  <h1 *ngIf=\"!organizationId || !isEnterpriseOrg\">{{ \"twoStepLogin\" | i18n }}</h1>\n  <h1 *ngIf=\"organizationId && isEnterpriseOrg\">{{ \"twoStepLoginEnforcement\" | i18n }}</h1>\n</div>\n<p *ngIf=\"!organizationId\">{{ \"twoStepLoginDesc\" | i18n }}</p>\n<ng-container *ngIf=\"organizationId\">\n  <p>\n    <ng-container *ngIf=\"isEnterpriseOrg; else teamsDescription\">\n      {{ \"twoStepLoginEnterpriseDescStart\" | i18n }}\n      <a routerLink=\"../policies\">{{ \"twoStepLoginPolicy\" | i18n }}.</a>\n      <br />\n      {{ \"twoStepLoginOrganizationDuoDesc\" | i18n }}\n      <br />\n      <br />\n      <p>{{ \"twoStepLoginOrganizationSsoDesc\" | i18n }}</p>\n    </ng-container>\n    <ng-template #teamsDescription>\n      {{ \"twoStepLoginTeamsDesc\" | i18n }}\n      <br />\n      {{ \"twoStepLoginOrganizationDuoDesc\" | i18n }}\n    </ng-template>\n  </p>\n</ng-container>\n<bit-callout type=\"warning\" *ngIf=\"!organizationId\">\n  <p>{{ \"twoStepLoginRecoveryWarning\" | i18n }}</p>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"recoveryCode()\">\n    {{ \"viewRecoveryCode\" | i18n }}\n  </button>\n</bit-callout>\n<h2 [ngClass]=\"{ 'mt-5': !organizationId }\">\n  {{ \"providers\" | i18n }}\n  <small *ngIf=\"loading\">\n    <i\n      class=\"bwi bwi-spinner bwi-spin bwi-fw text-muted\"\n      title=\"{{ 'loading' | i18n }}\"\n      aria-hidden=\"true\"\n    ></i>\n    <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n  </small>\n</h2>\n<bit-callout type=\"warning\" *ngIf=\"showPolicyWarning\">\n  {{ \"twoStepLoginPolicyUserWarning\" | i18n }}\n</bit-callout>\n<ul class=\"list-group list-group-2fa\">\n  <li *ngFor=\"let p of providers\" class=\"list-group-item d-flex align-items-center\">\n    <div class=\"logo-2fa d-flex justify-content-center\">\n      <img [class]=\"'mfaType' + p.type\" [alt]=\"p.name + ' logo'\" />\n    </div>\n    <div class=\"mx-4\">\n      <h3 class=\"mb-0\">\n        {{ p.name }}\n        <ng-container *ngIf=\"p.enabled\">\n          <i\n            class=\"bwi bwi-check text-success bwi-fw\"\n            title=\"{{ 'enabled' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"enabled\" | i18n }}</span>\n        </ng-container>\n        <app-premium-badge *ngIf=\"p.premium\"></app-premium-badge>\n      </h3>\n      {{ p.description }}\n    </div>\n    <div class=\"ml-auto\">\n      <button\n        type=\"button\"\n        bitButton\n        buttonType=\"secondary\"\n        [disabled]=\"!canAccessPremium && p.premium\"\n        (click)=\"manage(p.type)\"\n      >\n        {{ \"manage\" | i18n }}\n      </button>\n    </div>\n  </li>\n</ul>\n\n<ng-template #authenticatorTemplate></ng-template>\n<ng-template #recoveryTemplate></ng-template>\n<ng-template #duoTemplate></ng-template>\n<ng-template #emailTemplate></ng-template>\n<ng-template #yubikeyTemplate></ng-template>\n<ng-template #webAuthnTemplate></ng-template>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { concatMap, takeUntil } from \"rxjs\";\nimport { tap } from \"rxjs/operators\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { TwoFactorDuoComponent } from \"../../../auth/settings/two-factor-duo.component\";\nimport { TwoFactorSetupComponent as BaseTwoFactorSetupComponent } from \"../../../auth/settings/two-factor-setup.component\";\n\n@Component({\n  selector: \"app-two-factor-setup\",\n  templateUrl: \"../../../auth/settings/two-factor-setup.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class TwoFactorSetupComponent extends BaseTwoFactorSetupComponent {\n  tabbedHeader = false;\n  constructor(\n    apiService: ApiService,\n    modalService: ModalService,\n    messagingService: MessagingService,\n    policyService: PolicyService,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    private organizationService: OrganizationService,\n  ) {\n    super(apiService, modalService, messagingService, policyService, stateService);\n  }\n\n  async ngOnInit() {\n    this.route.params\n      .pipe(\n        tap((params) => {\n          this.organizationId = params.organizationId;\n          this.organization = this.organizationService.get(this.organizationId);\n        }),\n        concatMap(async () => await super.ngOnInit()),\n        takeUntil(this.destroy$),\n      )\n      .subscribe();\n  }\n\n  async manage(type: TwoFactorProviderType) {\n    switch (type) {\n      case TwoFactorProviderType.OrganizationDuo: {\n        const duoComp = await this.openModal(this.duoModalRef, TwoFactorDuoComponent);\n        duoComp.type = TwoFactorProviderType.OrganizationDuo;\n        duoComp.organizationId = this.organizationId;\n        duoComp.onUpdated.pipe(takeUntil(this.destroy$)).subscribe((enabled: boolean) => {\n          this.updateStatus(enabled, TwoFactorProviderType.OrganizationDuo);\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  protected getTwoFactorProviders() {\n    return this.apiService.getTwoFactorOrganizationProviders(this.organizationId);\n  }\n\n  protected filterProvider(type: TwoFactorProviderType) {\n    return type !== TwoFactorProviderType.OrganizationDuo;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\n\nimport { canAccessSettingsTab } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\n\nimport { OrganizationPermissionsGuard } from \"../../organizations/guards/org-permissions.guard\";\nimport { OrganizationRedirectGuard } from \"../../organizations/guards/org-redirect.guard\";\nimport { PoliciesComponent } from \"../../organizations/policies\";\n\nimport { AccountComponent } from \"./account.component\";\nimport { SettingsComponent } from \"./settings.component\";\nimport { TwoFactorSetupComponent } from \"./two-factor-setup.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: SettingsComponent,\n    canActivate: [OrganizationPermissionsGuard],\n    data: { organizationPermissions: canAccessSettingsTab },\n    children: [\n      {\n        path: \"\",\n        pathMatch: \"full\",\n        canActivate: [OrganizationRedirectGuard],\n        data: {\n          autoRedirectCallback: getSettingsRoute,\n        },\n        children: [], // This is required to make the auto redirect work,\n      },\n      { path: \"account\", component: AccountComponent, data: { titleId: \"organizationInfo\" } },\n      {\n        path: \"two-factor\",\n        component: TwoFactorSetupComponent,\n        data: { titleId: \"twoStepLogin\" },\n      },\n      {\n        path: \"policies\",\n        component: PoliciesComponent,\n        canActivate: [OrganizationPermissionsGuard],\n        data: {\n          organizationPermissions: (org: Organization) => org.canManagePolicies,\n          titleId: \"policies\",\n        },\n      },\n      {\n        path: \"tools\",\n        children: [\n          {\n            path: \"import\",\n            loadComponent: () =>\n              import(\"../../../tools/import/import-web.component\").then(\n                (mod) => mod.ImportWebComponent,\n              ),\n            canActivate: [OrganizationPermissionsGuard],\n            data: {\n              titleId: \"importData\",\n              organizationPermissions: (org: Organization) => org.canAccessImportExport,\n            },\n          },\n          {\n            path: \"export\",\n            loadChildren: () =>\n              import(\"../tools/vault-export/org-vault-export.module\").then(\n                (m) => m.OrganizationVaultExportModule,\n              ),\n          },\n        ],\n      },\n    ],\n  },\n];\n\nfunction getSettingsRoute(organization: Organization) {\n  if (organization.isOwner) {\n    return \"account\";\n  }\n  if (organization.canManagePolicies) {\n    return \"policies\";\n  }\n  if (organization.canAccessImportExport) {\n    return [\"tools\", \"import\"];\n  }\n  if (organization.canManageSso) {\n    return \"sso\";\n  }\n  if (organization.canManageScim) {\n    return \"scim\";\n  }\n  if (organization.canManageDeviceApprovals) {\n    return \"device-approvals\";\n  }\n  return undefined;\n}\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OrganizationSettingsRoutingModule {}\n","import { NgModule } from \"@angular/core\";\n\nimport { LooseComponentsModule, SharedModule } from \"../../../shared\";\nimport { AccountFingerprintComponent } from \"../../../shared/components/account-fingerprint/account-fingerprint.component\";\nimport { PoliciesModule } from \"../../organizations/policies\";\n\nimport { AccountComponent } from \"./account.component\";\nimport { OrganizationSettingsRoutingModule } from \"./organization-settings-routing.module\";\nimport { SettingsComponent } from \"./settings.component\";\nimport { TwoFactorSetupComponent } from \"./two-factor-setup.component\";\n\n@NgModule({\n  imports: [\n    SharedModule,\n    LooseComponentsModule,\n    PoliciesModule,\n    OrganizationSettingsRoutingModule,\n    AccountFingerprintComponent,\n  ],\n  declarations: [SettingsComponent, AccountComponent, TwoFactorSetupComponent],\n})\nexport class OrganizationSettingsModule {}\n"],"names":["OrganizationCollectionManagementUpdateRequest","OrganizationUpdateRequest","viewApiKey","rotateApiKey","AccountComponent","constructor","modalService","i18nService","route","platformUtilsService","cryptoService","router","organizationService","organizationApiService","dialogService","formBuilder","configService","selfHosted","canEditSubscription","loading","canUseApi","flexibleCollectionsEnabled$","this","getFeatureFlag$","FlexibleCollections","flexibleCollectionsV1Enabled$","FlexibleCollectionsV1","formGroup","group","orgName","control","value","disabled","validators","required","maxLength","updateOn","billingEmail","email","businessName","collectionManagementFormGroup","limitCollectionCreationDeletion","allowAdminAccessToAllCollectionItems","destroy$","Subject","submit","markAllAsTouched","invalid","request","name","org","hasPublicAndPrivateKeys","orgShareKey","getOrgKey","organizationId","orgKeys","makeKeyPair","keys","encryptedString","save","showToast","t","submitCollectionManagement","limitCreateDeleteOwnerAdmin","updateCollectionManagement","ngOnInit","isSelfHost","params","pipe","switchMap","get$","organization","combineLatest","of","from","get","id","getKeys","takeUntil","subscribe","orgResponse","useApi","enable","publicKeyBuffer","fromB64ToArray","publicKey","patchValue","ngOnDestroy","next","complete","deleteOrganization","dialog","data","requestType","lastValueFrom","closed","Deleted","navigate","purgeVault","openViewRef","purgeModalRef","comp","apiKeyModalRef","keyType","entityId","postKey","getOrCreateApiKey","bind","scope","grantType","apiKeyTitle","apiKeyWarning","apiKeyDescription","rotateApiKeyModalRef","isRotation","recoveryCode","manage","TwoFactorSetupComponent","apiService","messagingService","policyService","stateService","super","tabbedHeader","tap","concatMap","type","OrganizationDuo","duoComp","openModal","duoModalRef","onUpdated","enabled","updateStatus","getTwoFactorProviders","getTwoFactorOrganizationProviders","filterProvider","routes","path","component","canActivate","organizationPermissions","children","pathMatch","autoRedirectCallback","isOwner","canManagePolicies","canAccessImportExport","canManageSso","canManageScim","canManageDeviceApprovals","titleId","loadComponent","then","mod","ImportWebComponent","loadChildren","m","OrganizationVaultExportModule","OrganizationSettingsRoutingModule","forChild","OrganizationSettingsModule"],"sourceRoot":""}