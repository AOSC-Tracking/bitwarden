{"version":3,"file":"950.be1253fe774ee5bb81ec.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/models/request/organization-update.request.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/account.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/account.component.ts","webpack://@bitwarden/web-vault/./src/app/auth/settings/two-factor-setup.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/two-factor-setup.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/organization-settings-routing.module.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/settings/organization-settings.module.ts"],"sourcesContent":["import { OrganizationKeysRequest } from \"./organization-keys.request\";\n\nexport class OrganizationUpdateRequest {\n  name: string;\n  businessName: string;\n  billingEmail: string;\n  keys: OrganizationKeysRequest;\n}\n","<h1 bitTypography=\"h1\" class=\"tw-pb-2.5\">{{ \"organizationInfo\" | i18n }}</h1>\n<div *ngIf=\"loading\">\n  <i\n    class=\"bwi bwi-spinner bwi-spin text-muted\"\n    title=\"{{ 'loading' | i18n }}\"\n    aria-hidden=\"true\"\n  ></i>\n  <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n</div>\n<form *ngIf=\"org && !loading\" #form [bitSubmit]=\"submit\" [formGroup]=\"formGroup\">\n  <div class=\"tw-grid tw-grid-cols-2 tw-gap-5\">\n    <div>\n      <bit-form-field>\n        <bit-label>{{ \"organizationName\" | i18n }}</bit-label>\n        <input bitInput id=\"orgName\" type=\"text\" formControlName=\"orgName\" />\n      </bit-form-field>\n      <bit-form-field>\n        <bit-label>{{ \"billingEmail\" | i18n }}</bit-label>\n        <input bitInput id=\"billingEmail\" formControlName=\"billingEmail\" type=\"email\" />\n      </bit-form-field>\n      <bit-form-field>\n        <bit-label>{{ \"businessName\" | i18n }}</bit-label>\n        <input bitInput id=\"businessName\" formControlName=\"businessName\" type=\"text\" />\n      </bit-form-field>\n    </div>\n    <div>\n      <bit-avatar [text]=\"org.name\" [id]=\"org.id\" size=\"large\"></bit-avatar>\n      <app-account-fingerprint\n        [fingerprintMaterial]=\"organizationId\"\n        [publicKeyBuffer]=\"publicKeyBuffer\"\n        fingerprintLabel=\"{{ 'yourOrganizationsFingerprint' | i18n }}\"\n      >\n      </app-account-fingerprint>\n    </div>\n  </div>\n  <button type=\"submit\" bitButton bitFormButton buttonType=\"primary\">\n    {{ \"save\" | i18n }}\n  </button>\n</form>\n<ng-container *ngIf=\"canUseApi\">\n  <h1 bitTypography=\"h1\" class=\"tw-mt-16 tw-pb-2.5\">{{ \"apiKey\" | i18n }}</h1>\n  <p>\n    {{ \"apiKeyDesc\" | i18n }}\n    <a href=\"https://docs.bitwarden.com\" target=\"_blank\" rel=\"noopener\">\n      {{ \"learnMore\" | i18n }}\n    </a>\n  </p>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"viewApiKey()\">\n    {{ \"viewApiKey\" | i18n }}\n  </button>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"rotateApiKey()\">\n    {{ \"rotateApiKey\" | i18n }}\n  </button>\n</ng-container>\n<h1 bitTypography=\"h1\" class=\"tw-mt-16 tw-pb-2.5 !tw-text-danger\">{{ \"dangerZone\" | i18n }}</h1>\n<div class=\"tw-rounded tw-border tw-border-solid tw-border-danger-500 tw-bg-background tw-p-5\">\n  <p>{{ \"dangerZoneDesc\" | i18n }}</p>\n  <button type=\"button\" bitButton buttonType=\"danger\" (click)=\"deleteOrganization()\">\n    {{ \"deleteOrganization\" | i18n }}\n  </button>\n  <button type=\"button\" bitButton buttonType=\"danger\" (click)=\"purgeVault()\">\n    {{ \"purgeVault\" | i18n }}\n  </button>\n</div>\n<ng-template #purgeOrganizationTemplate></ng-template>\n<ng-template #apiKeyTemplate></ng-template>\n<ng-template #rotateApiKeyTemplate></ng-template>\n","import { Component, ViewChild, ViewContainerRef } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { combineLatest, lastValueFrom, Subject, switchMap, takeUntil, from } from \"rxjs\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationKeysRequest } from \"@bitwarden/common/admin-console/models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"@bitwarden/common/admin-console/models/request/organization-update.request\";\nimport { OrganizationResponse } from \"@bitwarden/common/admin-console/models/response/organization.response\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { ApiKeyComponent } from \"../../../settings/api-key.component\";\nimport { PurgeVaultComponent } from \"../../../settings/purge-vault.component\";\n\nimport { DeleteOrganizationDialogResult, openDeleteOrganizationDialog } from \"./components\";\n\n@Component({\n  selector: \"app-org-account\",\n  templateUrl: \"account.component.html\",\n})\nexport class AccountComponent {\n  @ViewChild(\"purgeOrganizationTemplate\", { read: ViewContainerRef, static: true })\n  purgeModalRef: ViewContainerRef;\n  @ViewChild(\"apiKeyTemplate\", { read: ViewContainerRef, static: true })\n  apiKeyModalRef: ViewContainerRef;\n  @ViewChild(\"rotateApiKeyTemplate\", { read: ViewContainerRef, static: true })\n  rotateApiKeyModalRef: ViewContainerRef;\n\n  selfHosted = false;\n  canEditSubscription = true;\n  loading = true;\n  canUseApi = false;\n  org: OrganizationResponse;\n  formPromise: Promise<OrganizationResponse>;\n  taxFormPromise: Promise<unknown>;\n\n  // FormGroup validators taken from server Organization domain object\n  protected formGroup = this.formBuilder.group({\n    orgName: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      {\n        validators: [Validators.required, Validators.maxLength(50)],\n        updateOn: \"change\",\n      }\n    ),\n    billingEmail: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      { validators: [Validators.required, Validators.email, Validators.maxLength(256)] }\n    ),\n    businessName: this.formBuilder.control(\n      { value: \"\", disabled: true },\n      { validators: [Validators.maxLength(50)] }\n    ),\n  });\n\n  protected organizationId: string;\n  protected publicKeyBuffer: Uint8Array;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private modalService: ModalService,\n    private i18nService: I18nService,\n    private route: ActivatedRoute,\n    private platformUtilsService: PlatformUtilsService,\n    private cryptoService: CryptoService,\n    private logService: LogService,\n    private router: Router,\n    private organizationService: OrganizationService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private dialogService: DialogService,\n    private formBuilder: FormBuilder\n  ) {}\n\n  async ngOnInit() {\n    this.selfHosted = this.platformUtilsService.isSelfHost();\n\n    this.route.parent.parent.params\n      .pipe(\n        switchMap((params) => {\n          return combineLatest([\n            // Organization domain\n            this.organizationService.get$(params.organizationId),\n            // OrganizationResponse for form population\n            from(this.organizationApiService.get(params.organizationId)),\n            // Organization Public Key\n            from(this.organizationApiService.getKeys(params.organizationId)),\n          ]);\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe(([organization, orgResponse, orgKeys]) => {\n        // Set domain level organization variables\n        this.organizationId = organization.id;\n        this.canEditSubscription = organization.canEditSubscription;\n        this.canUseApi = organization.useApi;\n\n        // Org Response\n        this.org = orgResponse;\n\n        // Public Key Buffer for Org Fingerprint Generation\n        this.publicKeyBuffer = Utils.fromB64ToArray(orgKeys?.publicKey);\n\n        // Patch existing values\n        this.formGroup.patchValue({\n          orgName: this.org.name,\n          billingEmail: this.org.billingEmail,\n          businessName: this.org.businessName,\n        });\n\n        // Update disabled states - reactive forms prefers not using disabled attribute\n        if (!this.selfHosted) {\n          this.formGroup.get(\"orgName\").enable();\n        }\n\n        if (!this.selfHosted || this.canEditSubscription) {\n          this.formGroup.get(\"billingEmail\").enable();\n          this.formGroup.get(\"businessName\").enable();\n        }\n\n        this.loading = false;\n      });\n  }\n\n  ngOnDestroy(): void {\n    // You must first call .next() in order for the notifier to properly close subscriptions using takeUntil\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  submit = async () => {\n    this.formGroup.markAllAsTouched();\n    if (this.formGroup.invalid) {\n      return;\n    }\n\n    const request = new OrganizationUpdateRequest();\n    request.name = this.formGroup.value.orgName;\n    request.businessName = this.formGroup.value.businessName;\n    request.billingEmail = this.formGroup.value.billingEmail;\n\n    // Backfill pub/priv key if necessary\n    if (!this.org.hasPublicAndPrivateKeys) {\n      const orgShareKey = await this.cryptoService.getOrgKey(this.organizationId);\n      const orgKeys = await this.cryptoService.makeKeyPair(orgShareKey);\n      request.keys = new OrganizationKeysRequest(orgKeys[0], orgKeys[1].encryptedString);\n    }\n\n    this.formPromise = this.organizationApiService.save(this.organizationId, request);\n    await this.formPromise;\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"organizationUpdated\"));\n  };\n\n  async deleteOrganization() {\n    const dialog = openDeleteOrganizationDialog(this.dialogService, {\n      data: {\n        organizationId: this.organizationId,\n        requestType: \"RegularDelete\",\n      },\n    });\n\n    const result = await lastValueFrom(dialog.closed);\n\n    if (result === DeleteOrganizationDialogResult.Deleted) {\n      this.router.navigate([\"/\"]);\n    }\n  }\n\n  async purgeVault() {\n    await this.modalService.openViewRef(PurgeVaultComponent, this.purgeModalRef, (comp) => {\n      comp.organizationId = this.organizationId;\n    });\n  }\n\n  async viewApiKey() {\n    await this.modalService.openViewRef(ApiKeyComponent, this.apiKeyModalRef, (comp) => {\n      comp.keyType = \"organization\";\n      comp.entityId = this.organizationId;\n      comp.postKey = this.organizationApiService.getOrCreateApiKey.bind(\n        this.organizationApiService\n      );\n      comp.scope = \"api.organization\";\n      comp.grantType = \"client_credentials\";\n      comp.apiKeyTitle = \"apiKey\";\n      comp.apiKeyWarning = \"apiKeyWarning\";\n      comp.apiKeyDescription = \"apiKeyDesc\";\n    });\n  }\n\n  async rotateApiKey() {\n    await this.modalService.openViewRef(ApiKeyComponent, this.rotateApiKeyModalRef, (comp) => {\n      comp.keyType = \"organization\";\n      comp.isRotation = true;\n      comp.entityId = this.organizationId;\n      comp.postKey = this.organizationApiService.rotateApiKey.bind(this.organizationApiService);\n      comp.scope = \"api.organization\";\n      comp.grantType = \"client_credentials\";\n      comp.apiKeyTitle = \"apiKey\";\n      comp.apiKeyWarning = \"apiKeyWarning\";\n      comp.apiKeyDescription = \"apiKeyRotateDesc\";\n    });\n  }\n}\n","<div [ngClass]=\"tabbedHeader ? 'tabbed-header' : 'page-header'\">\n  <h1 *ngIf=\"!organizationId || !isEnterpriseOrg\">{{ \"twoStepLogin\" | i18n }}</h1>\n  <h1 *ngIf=\"organizationId && isEnterpriseOrg\">{{ \"twoStepLoginEnforcement\" | i18n }}</h1>\n</div>\n<p *ngIf=\"!organizationId\">{{ \"twoStepLoginDesc\" | i18n }}</p>\n<ng-container *ngIf=\"organizationId\">\n  <p>\n    <ng-container *ngIf=\"isEnterpriseOrg; else teamsDescription\">\n      {{ \"twoStepLoginEnterpriseDescStart\" | i18n }}\n      <a routerLink=\"../policies\">{{ \"twoStepLoginPolicy\" | i18n }}.</a>\n      <br />\n      {{ \"twoStepLoginOrganizationDuoDesc\" | i18n }}\n      <br />\n      <br />\n      <p>{{ \"twoStepLoginOrganizationSsoDesc\" | i18n }}</p>\n    </ng-container>\n    <ng-template #teamsDescription>\n      {{ \"twoStepLoginTeamsDesc\" | i18n }}\n      <br />\n      {{ \"twoStepLoginOrganizationDuoDesc\" | i18n }}\n    </ng-template>\n  </p>\n</ng-container>\n<bit-callout type=\"warning\" *ngIf=\"!organizationId\">\n  <p>{{ \"twoStepLoginRecoveryWarning\" | i18n }}</p>\n  <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"recoveryCode()\">\n    {{ \"viewRecoveryCode\" | i18n }}\n  </button>\n</bit-callout>\n<h2 [ngClass]=\"{ 'mt-5': !organizationId }\">\n  {{ \"providers\" | i18n }}\n  <small *ngIf=\"loading\">\n    <i\n      class=\"bwi bwi-spinner bwi-spin bwi-fw text-muted\"\n      title=\"{{ 'loading' | i18n }}\"\n      aria-hidden=\"true\"\n    ></i>\n    <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n  </small>\n</h2>\n<bit-callout type=\"warning\" *ngIf=\"showPolicyWarning\">\n  {{ \"twoStepLoginPolicyUserWarning\" | i18n }}\n</bit-callout>\n<ul class=\"list-group list-group-2fa\">\n  <li *ngFor=\"let p of providers\" class=\"list-group-item d-flex align-items-center\">\n    <div class=\"logo-2fa d-flex justify-content-center\">\n      <img [class]=\"'mfaType' + p.type\" [alt]=\"p.name + ' logo'\" />\n    </div>\n    <div class=\"mx-4\">\n      <h3 class=\"mb-0\">\n        {{ p.name }}\n        <ng-container *ngIf=\"p.enabled\">\n          <i\n            class=\"bwi bwi-check text-success bwi-fw\"\n            title=\"{{ 'enabled' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"enabled\" | i18n }}</span>\n        </ng-container>\n        <app-premium-badge *ngIf=\"p.premium\"></app-premium-badge>\n      </h3>\n      {{ p.description }}\n    </div>\n    <div class=\"ml-auto\">\n      <button\n        type=\"button\"\n        bitButton\n        buttonType=\"secondary\"\n        [disabled]=\"!canAccessPremium && p.premium\"\n        (click)=\"manage(p.type)\"\n      >\n        {{ \"manage\" | i18n }}\n      </button>\n    </div>\n  </li>\n</ul>\n\n<ng-template #authenticatorTemplate></ng-template>\n<ng-template #recoveryTemplate></ng-template>\n<ng-template #duoTemplate></ng-template>\n<ng-template #emailTemplate></ng-template>\n<ng-template #yubikeyTemplate></ng-template>\n<ng-template #webAuthnTemplate></ng-template>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { concatMap, takeUntil } from \"rxjs\";\nimport { tap } from \"rxjs/operators\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\nimport { TwoFactorDuoComponent } from \"../../../auth/settings/two-factor-duo.component\";\nimport { TwoFactorSetupComponent as BaseTwoFactorSetupComponent } from \"../../../auth/settings/two-factor-setup.component\";\n\n@Component({\n  selector: \"app-two-factor-setup\",\n  templateUrl: \"../../../auth/settings/two-factor-setup.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class TwoFactorSetupComponent extends BaseTwoFactorSetupComponent {\n  tabbedHeader = false;\n  constructor(\n    apiService: ApiService,\n    modalService: ModalService,\n    messagingService: MessagingService,\n    policyService: PolicyService,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    private organizationService: OrganizationService\n  ) {\n    super(apiService, modalService, messagingService, policyService, stateService);\n  }\n\n  async ngOnInit() {\n    this.route.params\n      .pipe(\n        tap((params) => {\n          this.organizationId = params.organizationId;\n          this.organization = this.organizationService.get(this.organizationId);\n        }),\n        concatMap(async () => await super.ngOnInit()),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  async manage(type: TwoFactorProviderType) {\n    switch (type) {\n      case TwoFactorProviderType.OrganizationDuo: {\n        const duoComp = await this.openModal(this.duoModalRef, TwoFactorDuoComponent);\n        duoComp.type = TwoFactorProviderType.OrganizationDuo;\n        duoComp.organizationId = this.organizationId;\n        duoComp.onUpdated.pipe(takeUntil(this.destroy$)).subscribe((enabled: boolean) => {\n          this.updateStatus(enabled, TwoFactorProviderType.OrganizationDuo);\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  protected getTwoFactorProviders() {\n    return this.apiService.getTwoFactorOrganizationProviders(this.organizationId);\n  }\n\n  protected filterProvider(type: TwoFactorProviderType) {\n    return type !== TwoFactorProviderType.OrganizationDuo;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\n\nimport { canAccessSettingsTab } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\n\nimport { OrganizationPermissionsGuard } from \"../../organizations/guards/org-permissions.guard\";\nimport { OrganizationRedirectGuard } from \"../../organizations/guards/org-redirect.guard\";\nimport { PoliciesComponent } from \"../../organizations/policies\";\n\nimport { AccountComponent } from \"./account.component\";\nimport { SettingsComponent } from \"./settings.component\";\nimport { TwoFactorSetupComponent } from \"./two-factor-setup.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: SettingsComponent,\n    canActivate: [OrganizationPermissionsGuard],\n    data: { organizationPermissions: canAccessSettingsTab },\n    children: [\n      {\n        path: \"\",\n        pathMatch: \"full\",\n        canActivate: [OrganizationRedirectGuard],\n        data: {\n          autoRedirectCallback: getSettingsRoute,\n        },\n        children: [], // This is required to make the auto redirect work,\n      },\n      { path: \"account\", component: AccountComponent, data: { titleId: \"organizationInfo\" } },\n      {\n        path: \"two-factor\",\n        component: TwoFactorSetupComponent,\n        data: { titleId: \"twoStepLogin\" },\n      },\n      {\n        path: \"policies\",\n        component: PoliciesComponent,\n        canActivate: [OrganizationPermissionsGuard],\n        data: {\n          organizationPermissions: (org: Organization) => org.canManagePolicies,\n          titleId: \"policies\",\n        },\n      },\n      {\n        path: \"tools\",\n        loadChildren: () =>\n          import(\"../tools/import-export/org-import-export.module\").then(\n            (m) => m.OrganizationImportExportModule\n          ),\n      },\n    ],\n  },\n];\n\nfunction getSettingsRoute(organization: Organization) {\n  if (organization.isOwner) {\n    return \"account\";\n  }\n  if (organization.canManagePolicies) {\n    return \"policies\";\n  }\n  if (organization.canAccessImportExport) {\n    return [\"tools\", \"import\"];\n  }\n  if (organization.canManageSso) {\n    return \"sso\";\n  }\n  if (organization.canManageScim) {\n    return \"scim\";\n  }\n  if (organization.canManageDeviceApprovals) {\n    return \"device-approvals\";\n  }\n  return undefined;\n}\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OrganizationSettingsRoutingModule {}\n","import { NgModule } from \"@angular/core\";\n\nimport { LooseComponentsModule, SharedModule } from \"../../../shared\";\nimport { AccountFingerprintComponent } from \"../../../shared/components/account-fingerprint/account-fingerprint.component\";\nimport { PoliciesModule } from \"../../organizations/policies\";\n\nimport { AccountComponent } from \"./account.component\";\nimport { OrganizationSettingsRoutingModule } from \"./organization-settings-routing.module\";\nimport { SettingsComponent } from \"./settings.component\";\nimport { TwoFactorSetupComponent } from \"./two-factor-setup.component\";\n\n@NgModule({\n  imports: [\n    SharedModule,\n    LooseComponentsModule,\n    PoliciesModule,\n    OrganizationSettingsRoutingModule,\n    AccountFingerprintComponent,\n  ],\n  declarations: [SettingsComponent, AccountComponent, TwoFactorSetupComponent],\n})\nexport class OrganizationSettingsModule {}\n"],"names":["OrganizationUpdateRequest","viewApiKey","rotateApiKey","AccountComponent","constructor","modalService","i18nService","route","platformUtilsService","cryptoService","logService","router","organizationService","organizationApiService","dialogService","formBuilder","selfHosted","canEditSubscription","loading","canUseApi","formGroup","this","group","orgName","control","value","disabled","validators","required","maxLength","updateOn","billingEmail","email","businessName","destroy$","Subject","submit","markAllAsTouched","invalid","request","name","org","hasPublicAndPrivateKeys","orgShareKey","getOrgKey","organizationId","orgKeys","makeKeyPair","keys","encryptedString","formPromise","save","showToast","t","ngOnInit","isSelfHost","parent","params","pipe","switchMap","combineLatest","get$","from","get","getKeys","takeUntil","subscribe","organization","orgResponse","id","useApi","publicKeyBuffer","fromB64ToArray","publicKey","patchValue","enable","ngOnDestroy","next","complete","deleteOrganization","dialog","data","requestType","lastValueFrom","closed","Deleted","navigate","purgeVault","openViewRef","purgeModalRef","comp","apiKeyModalRef","keyType","entityId","postKey","getOrCreateApiKey","bind","scope","grantType","apiKeyTitle","apiKeyWarning","apiKeyDescription","rotateApiKeyModalRef","isRotation","recoveryCode","manage","TwoFactorSetupComponent","apiService","messagingService","policyService","stateService","super","tabbedHeader","tap","concatMap","type","OrganizationDuo","duoComp","openModal","duoModalRef","onUpdated","enabled","updateStatus","getTwoFactorProviders","getTwoFactorOrganizationProviders","filterProvider","routes","path","component","canActivate","organizationPermissions","children","pathMatch","autoRedirectCallback","isOwner","canManagePolicies","canAccessImportExport","canManageSso","canManageScim","canManageDeviceApprovals","titleId","loadChildren","then","m","OrganizationImportExportModule","OrganizationSettingsRoutingModule","forChild","OrganizationSettingsModule"],"sourceRoot":""}