(()=>{var e,t,i,n,r={34138:(e,t,i)=>{"use strict";var n,r;!function(e){e.Web="web",e.Browser="browser",e.Desktop="desktop",e.Cli="cli"}(n||(n={})),function(e){e[e.Android=0]="Android",e[e.iOS=1]="iOS",e[e.ChromeExtension=2]="ChromeExtension",e[e.FirefoxExtension=3]="FirefoxExtension",e[e.OperaExtension=4]="OperaExtension",e[e.EdgeExtension=5]="EdgeExtension",e[e.WindowsDesktop=6]="WindowsDesktop",e[e.MacOsDesktop=7]="MacOsDesktop",e[e.LinuxDesktop=8]="LinuxDesktop",e[e.ChromeBrowser=9]="ChromeBrowser",e[e.FirefoxBrowser=10]="FirefoxBrowser",e[e.OperaBrowser=11]="OperaBrowser",e[e.EdgeBrowser=12]="EdgeBrowser",e[e.IEBrowser=13]="IEBrowser",e[e.UnknownBrowser=14]="UnknownBrowser",e[e.AndroidAmazon=15]="AndroidAmazon",e[e.UWP=16]="UWP",e[e.SafariBrowser=17]="SafariBrowser",e[e.VivaldiBrowser=18]="VivaldiBrowser",e[e.VivaldiExtension=19]="VivaldiExtension",e[e.SafariExtension=20]="SafariExtension",e[e.SDK=21]="SDK",e[e.Server=22]="Server",e[e.WindowsCLI=23]="WindowsCLI",e[e.MacOsCLI=24]="MacOsCLI",e[e.LinuxCLI=25]="LinuxCLI"}(r||(r={}));new Set([r.Android,r.iOS,r.AndroidAmazon]),new Set([r.WindowsDesktop,r.MacOsDesktop,r.LinuxDesktop,r.UWP,r.WindowsCLI,r.MacOsCLI,r.LinuxCLI]);var s,a;!function(e){e[e.AccountEncrypted=0]="AccountEncrypted",e[e.FileEncrypted=1]="FileEncrypted"}(s||(s={})),function(e){e[e.AesCbc256_B64=0]="AesCbc256_B64",e[e.AesCbc128_HmacSha256_B64=1]="AesCbc128_HmacSha256_B64",e[e.AesCbc256_HmacSha256_B64=2]="AesCbc256_HmacSha256_B64",e[e.Rsa2048_OaepSha256_B64=3]="Rsa2048_OaepSha256_B64",e[e.Rsa2048_OaepSha1_B64=4]="Rsa2048_OaepSha1_B64",e[e.Rsa2048_OaepSha256_HmacSha256_B64=5]="Rsa2048_OaepSha256_HmacSha256_B64",e[e.Rsa2048_OaepSha1_HmacSha256_B64=6]="Rsa2048_OaepSha1_HmacSha256_B64"}(a||(a={}));const o={[a.AesCbc256_B64]:2,[a.AesCbc128_HmacSha256_B64]:3,[a.AesCbc256_HmacSha256_B64]:3,[a.Rsa2048_OaepSha256_B64]:1,[a.Rsa2048_OaepSha1_B64]:1,[a.Rsa2048_OaepSha256_HmacSha256_B64]:2,[a.Rsa2048_OaepSha1_HmacSha256_B64]:2};var l,u,c,d,h,p,m,y;!function(e){e[e.SCIM=1]="SCIM",e[e.DomainVerification=2]="DomainVerification"}(l||(l={})),function(e){e[e.User_LoggedIn=1e3]="User_LoggedIn",e[e.User_ChangedPassword=1001]="User_ChangedPassword",e[e.User_Updated2fa=1002]="User_Updated2fa",e[e.User_Disabled2fa=1003]="User_Disabled2fa",e[e.User_Recovered2fa=1004]="User_Recovered2fa",e[e.User_FailedLogIn=1005]="User_FailedLogIn",e[e.User_FailedLogIn2fa=1006]="User_FailedLogIn2fa",e[e.User_ClientExportedVault=1007]="User_ClientExportedVault",e[e.User_UpdatedTempPassword=1008]="User_UpdatedTempPassword",e[e.User_MigratedKeyToKeyConnector=1009]="User_MigratedKeyToKeyConnector",e[e.User_RequestedDeviceApproval=1010]="User_RequestedDeviceApproval",e[e.Cipher_Created=1100]="Cipher_Created",e[e.Cipher_Updated=1101]="Cipher_Updated",e[e.Cipher_Deleted=1102]="Cipher_Deleted",e[e.Cipher_AttachmentCreated=1103]="Cipher_AttachmentCreated",e[e.Cipher_AttachmentDeleted=1104]="Cipher_AttachmentDeleted",e[e.Cipher_Shared=1105]="Cipher_Shared",e[e.Cipher_UpdatedCollections=1106]="Cipher_UpdatedCollections",e[e.Cipher_ClientViewed=1107]="Cipher_ClientViewed",e[e.Cipher_ClientToggledPasswordVisible=1108]="Cipher_ClientToggledPasswordVisible",e[e.Cipher_ClientToggledHiddenFieldVisible=1109]="Cipher_ClientToggledHiddenFieldVisible",e[e.Cipher_ClientToggledCardCodeVisible=1110]="Cipher_ClientToggledCardCodeVisible",e[e.Cipher_ClientCopiedPassword=1111]="Cipher_ClientCopiedPassword",e[e.Cipher_ClientCopiedHiddenField=1112]="Cipher_ClientCopiedHiddenField",e[e.Cipher_ClientCopiedCardCode=1113]="Cipher_ClientCopiedCardCode",e[e.Cipher_ClientAutofilled=1114]="Cipher_ClientAutofilled",e[e.Cipher_SoftDeleted=1115]="Cipher_SoftDeleted",e[e.Cipher_Restored=1116]="Cipher_Restored",e[e.Cipher_ClientToggledCardNumberVisible=1117]="Cipher_ClientToggledCardNumberVisible",e[e.Collection_Created=1300]="Collection_Created",e[e.Collection_Updated=1301]="Collection_Updated",e[e.Collection_Deleted=1302]="Collection_Deleted",e[e.Group_Created=1400]="Group_Created",e[e.Group_Updated=1401]="Group_Updated",e[e.Group_Deleted=1402]="Group_Deleted",e[e.OrganizationUser_Invited=1500]="OrganizationUser_Invited",e[e.OrganizationUser_Confirmed=1501]="OrganizationUser_Confirmed",e[e.OrganizationUser_Updated=1502]="OrganizationUser_Updated",e[e.OrganizationUser_Removed=1503]="OrganizationUser_Removed",e[e.OrganizationUser_UpdatedGroups=1504]="OrganizationUser_UpdatedGroups",e[e.OrganizationUser_UnlinkedSso=1505]="OrganizationUser_UnlinkedSso",e[e.OrganizationUser_ResetPassword_Enroll=1506]="OrganizationUser_ResetPassword_Enroll",e[e.OrganizationUser_ResetPassword_Withdraw=1507]="OrganizationUser_ResetPassword_Withdraw",e[e.OrganizationUser_AdminResetPassword=1508]="OrganizationUser_AdminResetPassword",e[e.OrganizationUser_ResetSsoLink=1509]="OrganizationUser_ResetSsoLink",e[e.OrganizationUser_FirstSsoLogin=1510]="OrganizationUser_FirstSsoLogin",e[e.OrganizationUser_Revoked=1511]="OrganizationUser_Revoked",e[e.OrganizationUser_Restored=1512]="OrganizationUser_Restored",e[e.OrganizationUser_ApprovedAuthRequest=1513]="OrganizationUser_ApprovedAuthRequest",e[e.OrganizationUser_RejectedAuthRequest=1514]="OrganizationUser_RejectedAuthRequest",e[e.Organization_Updated=1600]="Organization_Updated",e[e.Organization_PurgedVault=1601]="Organization_PurgedVault",e[e.Organization_ClientExportedVault=1602]="Organization_ClientExportedVault",e[e.Organization_VaultAccessed=1603]="Organization_VaultAccessed",e[e.Organization_EnabledSso=1604]="Organization_EnabledSso",e[e.Organization_DisabledSso=1605]="Organization_DisabledSso",e[e.Organization_EnabledKeyConnector=1606]="Organization_EnabledKeyConnector",e[e.Organization_DisabledKeyConnector=1607]="Organization_DisabledKeyConnector",e[e.Organization_SponsorshipsSynced=1608]="Organization_SponsorshipsSynced",e[e.Policy_Updated=1700]="Policy_Updated",e[e.ProviderUser_Invited=1800]="ProviderUser_Invited",e[e.ProviderUser_Confirmed=1801]="ProviderUser_Confirmed",e[e.ProviderUser_Updated=1802]="ProviderUser_Updated",e[e.ProviderUser_Removed=1803]="ProviderUser_Removed",e[e.ProviderOrganization_Created=1900]="ProviderOrganization_Created",e[e.ProviderOrganization_Added=1901]="ProviderOrganization_Added",e[e.ProviderOrganization_Removed=1902]="ProviderOrganization_Removed",e[e.ProviderOrganization_VaultAccessed=1903]="ProviderOrganization_VaultAccessed",e[e.OrganizationDomain_Added=2e3]="OrganizationDomain_Added",e[e.OrganizationDomain_Removed=2001]="OrganizationDomain_Removed",e[e.OrganizationDomain_Verified=2002]="OrganizationDomain_Verified",e[e.OrganizationDomain_NotVerified=2003]="OrganizationDomain_NotVerified",e[e.Secret_Retrieved=2100]="Secret_Retrieved"}(u||(u={})),function(e){e[e.Text=0]="Text",e[e.Hidden=1]="Hidden",e[e.Boolean=2]="Boolean",e[e.Linked=3]="Linked"}(c||(c={})),function(e){e[e.Direct=0]="Direct",e[e.Azure=1]="Azure"}(d||(d={})),function(e){e[e.ServerAuthorization=1]="ServerAuthorization",e[e.LocalAuthorization=2]="LocalAuthorization"}(h||(h={})),function(e){e.Local="local",e.Memory="memory",e.Session="session"}(p||(p={})),function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.IAmATeapot=418]="IAmATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"}(m||(m={}));!function(e){e[e.PBKDF2_SHA256=0]="PBKDF2_SHA256",e[e.Argon2id=1]="Argon2id"}(y||(y={}));y.PBKDF2_SHA256,new class{constructor(e,t,i){this.iterations=e,this.memory=t,this.parallelism=i}}(6e5);var f,g,v,w,b,S,D,C,N,O,_,A,U;!function(e){e.Auto="auto",e.Biometric="biometric",e.Pin="pin"}(f||(f={})),function(e){e[e.Username=100]="Username",e[e.Password=101]="Password"}(g||(g={})),function(e){e[e.CardholderName=300]="CardholderName",e[e.ExpMonth=301]="ExpMonth",e[e.ExpYear=302]="ExpYear",e[e.Code=303]="Code",e[e.Brand=304]="Brand",e[e.Number=305]="Number"}(v||(v={})),function(e){e[e.Title=400]="Title",e[e.MiddleName=401]="MiddleName",e[e.Address1=402]="Address1",e[e.Address2=403]="Address2",e[e.Address3=404]="Address3",e[e.City=405]="City",e[e.State=406]="State",e[e.PostalCode=407]="PostalCode",e[e.Country=408]="Country",e[e.Company=409]="Company",e[e.Email=410]="Email",e[e.Phone=411]="Phone",e[e.Ssn=412]="Ssn",e[e.Username=413]="Username",e[e.PassportNumber=414]="PassportNumber",e[e.LicenseNumber=415]="LicenseNumber",e[e.FirstName=416]="FirstName",e[e.LastName=417]="LastName",e[e.FullName=418]="FullName"}(w||(w={})),function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(b||(b={})),function(e){e[e.One=1]="One",e[e.Latest=1]="Latest"}(S||(S={})),function(e){e[e.SyncCipherUpdate=0]="SyncCipherUpdate",e[e.SyncCipherCreate=1]="SyncCipherCreate",e[e.SyncLoginDelete=2]="SyncLoginDelete",e[e.SyncFolderDelete=3]="SyncFolderDelete",e[e.SyncCiphers=4]="SyncCiphers",e[e.SyncVault=5]="SyncVault",e[e.SyncOrgKeys=6]="SyncOrgKeys",e[e.SyncFolderCreate=7]="SyncFolderCreate",e[e.SyncFolderUpdate=8]="SyncFolderUpdate",e[e.SyncCipherDelete=9]="SyncCipherDelete",e[e.SyncSettings=10]="SyncSettings",e[e.LogOut=11]="LogOut",e[e.SyncSendCreate=12]="SyncSendCreate",e[e.SyncSendUpdate=13]="SyncSendUpdate",e[e.SyncSendDelete=14]="SyncSendDelete",e[e.AuthRequest=15]="AuthRequest",e[e.AuthRequestResponse=16]="AuthRequestResponse"}(D||(D={})),function(e){e[e.Free=0]="Free",e[e.Families=1]="Families",e[e.Teams=2]="Teams",e[e.Enterprise=3]="Enterprise",e[e.TeamsStarter=4]="TeamsStarter"}(C||(C={})),function(e){e[e.Msp=0]="Msp",e[e.Reseller=1]="Reseller"}(N||(N={})),function(e){e[e.Generic=0]="Generic"}(O||(O={})),function(e){e.Both="both",e.Disk="disk",e.Memory="memory"}(_||(_={})),function(e){e.System="system",e.Light="light",e.Dark="dark",e.Nord="nord",e.SolarizedDark="solarizedDark"}(A||(A={})),function(e){e[e.Domain=0]="Domain",e[e.Host=1]="Host",e[e.StartsWith=2]="StartsWith",e[e.Exact=3]="Exact",e[e.RegularExpression=4]="RegularExpression",e[e.Never=5]="Never"}(U||(U={}));var B=i(14375),k=i(92716),x=i(30359),E=i(22535),P=i(71624);const R="undefined"==typeof window?i(69573):null;class T{static init(){T.inited||(T.inited=!0,T.isNode=void 0!==P&&null!=P.release&&"node"===P.release.name,T.isBrowser="undefined"!=typeof window,T.isMobileBrowser=T.isBrowser&&this.isMobile(window),T.isAppleMobileBrowser=T.isBrowser&&this.isAppleMobile(window),T.isNode?T.global=i.g:T.isBrowser?T.global=window:T.global=self)}static fromB64ToArray(e){if(null==e)return null;if(T.isNode)return new Uint8Array(Buffer.from(e,"base64"));{const t=T.global.atob(e),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}}static fromUrlB64ToArray(e){return T.fromB64ToArray(T.fromUrlB64ToB64(e))}static fromHexToArray(e){if(T.isNode)return new Uint8Array(Buffer.from(e,"hex"));{const t=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)t[i/2]=parseInt(e.substr(i,2),16);return t}}static fromUtf8ToArray(e){if(T.isNode)return new Uint8Array(Buffer.from(e,"utf8"));{const t=unescape(encodeURIComponent(e)),i=new Uint8Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}}static fromByteStringToArray(e){if(null==e)return null;const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}static fromBufferToB64(e){if(null==e)return null;if(T.isNode)return Buffer.from(e).toString("base64");{let t="";const i=new Uint8Array(e);for(let e=0;e<i.byteLength;e++)t+=String.fromCharCode(i[e]);return T.global.btoa(t)}}static fromBufferToUrlB64(e){return T.fromB64toUrlB64(T.fromBufferToB64(e))}static fromB64toUrlB64(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static fromBufferToUtf8(e){if(T.isNode)return Buffer.from(e).toString("utf8");{const t=new Uint8Array(e),i=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(i))}}static fromBufferToByteString(e){return String.fromCharCode.apply(null,new Uint8Array(e))}static fromBufferToHex(e){if(T.isNode)return Buffer.from(e).toString("hex");{const t=new Uint8Array(e);return Array.prototype.map.call(t,(e=>("00"+e.toString(16)).slice(-2))).join("")}}static fromUrlB64ToB64(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return t}static fromUrlB64ToUtf8(e){return T.fromB64ToUtf8(T.fromUrlB64ToB64(e))}static fromUtf8ToB64(e){return T.isNode?Buffer.from(e,"utf8").toString("base64"):decodeURIComponent(escape(T.global.btoa(e)))}static fromUtf8ToUrlB64(e){return T.fromBufferToUrlB64(T.fromUtf8ToArray(e))}static fromB64ToUtf8(e){return T.isNode?Buffer.from(e,"base64").toString("utf8"):decodeURIComponent(escape(T.global.atob(e)))}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}static isGuid(e){return RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,"i").test(e)}static getHostname(e){if(T.isNullOrWhitespace(e))return null;if((e=e.trim()).startsWith("data:"))return null;if(e.startsWith("about:"))return null;if(e.startsWith("file:"))return null;if(e.indexOf("!")>0)return null;try{const t=(0,E.Fo)(e,{validHosts:this.validHosts});if(null!=t)return t}catch(t){return null}return null}static getHost(e){const t=T.getUrl(e);try{return null!=t&&""!==t.host?t.host:null}catch(i){return null}}static getDomain(e){if(T.isNullOrWhitespace(e))return null;if((e=e.trim()).startsWith("data:"))return null;if(e.startsWith("about:"))return null;try{const t=(0,E.Qc)(e,{validHosts:this.validHosts,allowPrivateDomains:!0});if(null!=t&&null!=t.hostname)return"localhost"===t.hostname||t.isIp?t.hostname:null!=t.domain?t.domain:null}catch(t){return null}return null}static getQueryParams(e){const t=T.getUrl(e);if(null==t||null==t.search||""===t.search)return null;const i=new Map;return("?"===t.search[0]?t.search.substr(1):t.search).split("&").forEach((e=>{const t=e.split("=");t.length<1||i.set(decodeURIComponent(t[0]).toLowerCase(),null==t[1]?"":decodeURIComponent(t[1]))})),i}static getSortFunction(e,t){return(i,n)=>null==i[t]&&null!=n[t]?-1:null!=i[t]&&null==n[t]?1:null==i[t]&&null==n[t]?0:e.collator?e.collator.compare(i[t],n[t]):i[t].localeCompare(n[t])}static isNullOrWhitespace(e){return null==e||"string"!=typeof e||""===e.trim()}static isNullOrEmpty(e){return null==e||"string"!=typeof e||""==e}static isPromise(e){return null!=e&&"function"==typeof e.then&&"function"==typeof e.catch}static nameOf(e){return e}static assign(e,t){return Object.assign(e,t)}static iterateEnum(e){return Object.keys(e).filter((e=>Number.isNaN(+e))).map((t=>e[t]))}static getUrl(e){return this.isNullOrWhitespace(e)?null:(e=e.trim(),T.getUrlObject(e))}static camelToPascalCase(e){return e.charAt(0).toUpperCase()+e.slice(1)}static pickTextColorBasedOnBgColor(e,t=186,i=!1){const n="#"===e.charAt(0)?e.substring(1,7):e;return.299*parseInt(n.substring(0,2),16)+.587*parseInt(n.substring(2,4),16)+.114*parseInt(n.substring(4,6),16)>t?i?"black":"black !important":i?"white":"white !important"}static stringToColor(e){let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let i="#";for(let n=0;n<3;n++){i+=("00"+(t>>8*n&255).toString(16)).substr(-2)}return i}static getContainerService(){if(null==this.global.bitwardenContainerService)throw new Error("global bitwardenContainerService not initialized.");return this.global.bitwardenContainerService}static validateHexColor(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)}static mapToRecord(e){return null==e?null:e instanceof Map?Object.fromEntries(e):e}static recordToMap(e){if(null==e)return null;if(e instanceof Map)return e;const t=Object.entries(e);return 0===t.length?new Map:isNaN(Number(t[0][0]))?new Map(t):new Map(t.map((e=>[Number(e[0]),e[1]])))}static merge(e,t){return Object.assign(e,t)}static encodeRFC3986URIComponent(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}static normalizePath(e){return B.normalize(decodeURIComponent(e)).replace(/^(\.\.(\/|\\|$))+/,"")}static isMobile(e){let t=!1;var i;return i=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(t=!0),t||null!=e.navigator.userAgent.match(/iPad/i)}static delay(e){return new Promise((t=>setTimeout(t,e)))}static asyncToObservable(e){return(0,k.of)(void 0).pipe((0,x.w)((()=>e())))}static daysRemaining(e){const t=e.getTime()-Date.now();return Math.max(0,Math.floor(t/864e5))}static isAppleMobile(e){return null!=e.navigator.userAgent.match(/iPhone/i)||null!=e.navigator.userAgent.match(/iPad/i)}static getUrlObject(e){const t=e.indexOf("://")>-1;if(!t&&e.indexOf(".")>-1)e="http://"+e;else if(!t)return null;try{return null!=R?new R.URL(e):new URL(e)}catch(i){}return null}}T.inited=!1,T.isNode=!1,T.isBrowser=!0,T.isMobileBrowser=!1,T.isAppleMobileBrowser=!1,T.global=null,T.regexpEmojiPresentation=/(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g,T.validHosts=["localhost"],T.originalMinimumPasswordLength=8,T.minimumPasswordLength=12,T.DomainMatchBlacklist=new Map([["google.com",new Set(["script.google.com"])]]),T.init();class F{constructor(e,t){if(null==e)throw new Error("Must provide key");if(null==t)if(32===e.byteLength)t=a.AesCbc256_B64;else{if(64!==e.byteLength)throw new Error("Unable to determine encType.");t=a.AesCbc256_HmacSha256_B64}if(this.key=e,this.encType=t,t===a.AesCbc256_B64&&32===e.byteLength)this.encKey=e,this.macKey=null;else if(t===a.AesCbc128_HmacSha256_B64&&32===e.byteLength)this.encKey=e.slice(0,16),this.macKey=e.slice(16,32);else{if(t!==a.AesCbc256_HmacSha256_B64||64!==e.byteLength)throw new Error("Unsupported encType/key length.");this.encKey=e.slice(0,32),this.macKey=e.slice(32,64)}null!=this.key&&(this.keyB64=T.fromBufferToB64(this.key)),null!=this.encKey&&(this.encKeyB64=T.fromBufferToB64(this.encKey)),null!=this.macKey&&(this.macKeyB64=T.fromBufferToB64(this.macKey))}toJSON(){return{keyB64:this.keyB64}}static fromString(e){if(null==e)return null;const t=T.fromB64ToArray(e);return new F(t)}static fromJSON(e){return F.fromString(null==e?void 0:e.keyB64)}}class z{constructor(e,t=null){this.isDev=e,this.filter=t,this.timersMap=new Map}debug(e){this.isDev&&this.write(b.Debug,e)}info(e){this.write(b.Info,e)}warning(e){this.write(b.Warning,e)}error(e){this.write(b.Error,e)}write(e,t){if(null==this.filter||!this.filter(e))switch(e){case b.Debug:case b.Info:console.log(t);break;case b.Warning:console.warn(t);break;case b.Error:console.error(t)}}}class I{constructor(e,t){this.cryptoService=e,this.encryptService=t}attachToGlobal(e){e.bitwardenContainerService||(e.bitwardenContainerService=this)}getCryptoService(){if(null==this.cryptoService)throw new Error("ContainerService.cryptoService not initialized.");return this.cryptoService}getEncryptService(){if(null==this.encryptService)throw new Error("ContainerService.encryptService not initialized.");return this.encryptService}}var L=i(99405),M=i(86268);class K{}var J=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class H{constructor(e){this.crypto=void 0!==e.crypto?e.crypto:null,this.subtle=this.crypto&&void 0!==e.crypto.subtle?e.crypto.subtle:null,this.wasmSupported=this.checkIfWasmSupported()}pbkdf2(e,t,i,n){return J(this,void 0,void 0,(function*(){const r="sha256"===i?256:512,s=this.toBuf(e),a={name:"PBKDF2",salt:this.toBuf(t),iterations:n,hash:{name:this.toWebCryptoAlgorithm(i)}},o=yield this.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),l=yield this.subtle.deriveBits(a,o,r);return new Uint8Array(l)}))}argon2(e,t,i,n,r){return J(this,void 0,void 0,(function*(){if(!this.wasmSupported)throw"Webassembly support is required for the Argon2 KDF feature.";const s=new Uint8Array(this.toBuf(e)),a=new Uint8Array(this.toBuf(t)),o=yield L.hash({pass:s,salt:a,time:i,mem:n,parallelism:r,hashLen:32,type:L.ArgonType.Argon2id});return L.unloadRuntime(),o.hash}))}hkdf(e,t,i,n,r){return J(this,void 0,void 0,(function*(){const s={name:"HKDF",salt:this.toBuf(t),info:this.toBuf(i),hash:{name:this.toWebCryptoAlgorithm(r)}},a=yield this.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]),o=yield this.subtle.deriveBits(s,a,8*n);return new Uint8Array(o)}))}hkdfExpand(e,t,i,n){return J(this,void 0,void 0,(function*(){const r="sha256"===n?32:64;if(i>255*r)throw new Error("outputByteSize is too large.");if(new Uint8Array(e).length<r)throw new Error("prk is too small.");const s=this.toBuf(t),a=new Uint8Array(s);let o=0,l=new Uint8Array(0);const u=Math.ceil(i/r),c=new Uint8Array(u*r);for(let t=0;t<u;t++){const r=new Uint8Array(l.length+a.length+1);if(r.set(l),r.set(a,l.length),r.set([t+1],r.length-1),l=new Uint8Array(yield this.hmac(r,e,n)),c.set(l,o),o+=l.length,o>=i)break}return c.slice(0,i)}))}hash(e,t){return J(this,void 0,void 0,(function*(){if("md5"===t){const i="md5"===t?M.md.md5.create():M.md.sha1.create(),n=this.toByteString(e);return i.update(n,"raw"),T.fromByteStringToArray(i.digest().data)}const i=this.toBuf(e),n=yield this.subtle.digest({name:this.toWebCryptoAlgorithm(t)},i);return new Uint8Array(n)}))}hmac(e,t,i){return J(this,void 0,void 0,(function*(){const n={name:"HMAC",hash:{name:this.toWebCryptoAlgorithm(i)}},r=yield this.subtle.importKey("raw",t,n,!1,["sign"]),s=yield this.subtle.sign(n,r,e);return new Uint8Array(s)}))}compare(e,t){return J(this,void 0,void 0,(function*(){const i=yield this.randomBytes(32),n={name:"HMAC",hash:{name:"SHA-256"}},r=yield this.subtle.importKey("raw",i,n,!1,["sign"]),s=yield this.subtle.sign(n,r,e),a=yield this.subtle.sign(n,r,t);if(s.byteLength!==a.byteLength)return!1;const o=new Uint8Array(s),l=new Uint8Array(a);for(let e=0;e<l.length;e++)if(o[e]!==l[e])return!1;return!0}))}hmacFast(e,t,i){const n=M.hmac.create();n.start(i,t),n.update(e);const r=n.digest().getBytes();return Promise.resolve(r)}compareFast(e,t){return J(this,void 0,void 0,(function*(){const i=yield this.randomBytes(32),n=new Uint32Array(i),r=M.util.createBuffer();for(let e=0;e<n.length;e++)r.putInt32(n[e]);const s=r.getBytes(),a=M.hmac.create();a.start("sha256",s),a.update(e);const o=a.digest().getBytes();a.start(null,null),a.update(t);return o===a.digest().getBytes()}))}aesEncrypt(e,t,i){return J(this,void 0,void 0,(function*(){const n=yield this.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),r=yield this.subtle.encrypt({name:"AES-CBC",iv:t},n,e);return new Uint8Array(r)}))}aesDecryptFastParameters(e,t,i,n){const r=new K;return null!=n.meta&&(r.encKey=n.meta.encKeyByteString,r.macKey=n.meta.macKeyByteString),null==r.encKey&&(r.encKey=M.util.decode64(n.encKeyB64)),r.data=M.util.decode64(e),r.iv=M.util.decode64(t),r.macData=r.iv+r.data,null==r.macKey&&null!=n.macKeyB64&&(r.macKey=M.util.decode64(n.macKeyB64)),null!=i&&(r.mac=M.util.decode64(i)),null==n.meta&&(n.meta={}),null==n.meta.encKeyByteString&&(n.meta.encKeyByteString=r.encKey),null!=r.macKey&&null==n.meta.macKeyByteString&&(n.meta.macKeyByteString=r.macKey),r}aesDecryptFast(e,t){const i=M.cipher.createDecipher(this.toWebCryptoAesMode(t),e.encKey),n={};"cbc"===t&&(n.iv=e.iv);const r=M.util.createBuffer(e.data);i.start(n),i.update(r),i.finish();const s=i.output.toString();return Promise.resolve(s)}aesDecrypt(e,t,i,n){return J(this,void 0,void 0,(function*(){if("ecb"===n){const t=new K;t.data=this.toByteString(e),t.encKey=this.toByteString(i);const n=yield this.aesDecryptFast(t,"ecb");return T.fromByteStringToArray(n)}const r=yield this.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),s=yield this.subtle.decrypt({name:"AES-CBC",iv:t},r,e);return new Uint8Array(s)}))}rsaEncrypt(e,t,i){return J(this,void 0,void 0,(function*(){const n={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(i)}},r=yield this.subtle.importKey("spki",t,n,!1,["encrypt"]),s=yield this.subtle.encrypt(n,r,e);return new Uint8Array(s)}))}rsaDecrypt(e,t,i){return J(this,void 0,void 0,(function*(){const n={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(i)}},r=yield this.subtle.importKey("pkcs8",t,n,!1,["decrypt"]),s=yield this.subtle.decrypt(n,r,e);return new Uint8Array(s)}))}rsaExtractPublicKey(e){return J(this,void 0,void 0,(function*(){const t={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm("sha1")}},i=yield this.subtle.importKey("pkcs8",e,t,!0,["decrypt"]),n=yield this.subtle.exportKey("jwk",i),r={kty:"RSA",e:n.e,n:n.n,alg:"RSA-OAEP",ext:!0},s=yield this.subtle.importKey("jwk",r,t,!0,["encrypt"]),a=yield this.subtle.exportKey("spki",s);return new Uint8Array(a)}))}aesGenerateKey(e=960){return J(this,void 0,void 0,(function*(){if(512===e){const e=yield this.aesGenerateKey(256),t=yield this.aesGenerateKey(256);return new Uint8Array([...e,...t])}const t={name:"AES-CBC",length:e},i=yield this.subtle.generateKey(t,!0,["encrypt","decrypt"]),n=yield this.subtle.exportKey("raw",i);return new Uint8Array(n)}))}rsaGenerateKeyPair(e){return J(this,void 0,void 0,(function*(){const t={name:"RSA-OAEP",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.toWebCryptoAlgorithm("sha1")}},i=yield this.subtle.generateKey(t,!0,["encrypt","decrypt"]),n=yield this.subtle.exportKey("spki",i.publicKey),r=yield this.subtle.exportKey("pkcs8",i.privateKey);return[new Uint8Array(n),new Uint8Array(r)]}))}randomBytes(e){const t=new Uint8Array(e);return this.crypto.getRandomValues(t),Promise.resolve(t)}toBuf(e){let t;return t="string"==typeof e?T.fromUtf8ToArray(e):e,t}toByteString(e){let t;return t="string"==typeof e?M.util.encodeUtf8(e):T.fromBufferToByteString(e),t}toWebCryptoAlgorithm(e){if("md5"===e)throw new Error("MD5 is not supported in WebCrypto.");return"sha1"===e?"SHA-1":"sha256"===e?"SHA-256":"SHA-512"}toWebCryptoAesMode(e){return"cbc"===e?"AES-CBC":"AES-ECB"}checkIfWasmSupported(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1}}var j=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class W{constructor(e){this.buffer=e,this.encryptionType=null,this.dataBytes=null,this.ivBytes=null,this.macBytes=null;const t=e,i=t[0];switch(i){case a.AesCbc128_HmacSha256_B64:case a.AesCbc256_HmacSha256_B64:{const e=50;t.length<e&&this.throwDecryptionError(),this.ivBytes=t.slice(1,17),this.macBytes=t.slice(17,49),this.dataBytes=t.slice(49);break}case a.AesCbc256_B64:{const e=18;t.length<e&&this.throwDecryptionError(),this.ivBytes=t.slice(1,17),this.dataBytes=t.slice(17);break}default:this.throwDecryptionError()}this.encryptionType=i}throwDecryptionError(){throw new Error("Error parsing encrypted ArrayBuffer: data is corrupted or has an invalid format.")}static fromResponse(e){return j(this,void 0,void 0,(function*(){const t=yield e.arrayBuffer();if(null==t)throw new Error("Cannot create EncArrayBuffer from Response - Response is empty");return new W(new Uint8Array(t))}))}static fromB64(e){const t=T.fromB64ToArray(e);return new W(t)}}var V=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class q{constructor(e,t,i,n){null!=t?this.initFromData(e,t,i,n):this.initFromEncryptedString(e)}get ivBytes(){return null==this.iv?null:T.fromB64ToArray(this.iv)}get macBytes(){return null==this.mac?null:T.fromB64ToArray(this.mac)}get dataBytes(){return null==this.data?null:T.fromB64ToArray(this.data)}toJSON(){return this.encryptedString}static fromJSON(e){return null==e?null:new q(e)}initFromData(e,t,i,n){this.encryptedString=null!=i?e+"."+i+"|"+t:e+"."+t,null!=n&&(this.encryptedString=this.encryptedString+"|"+n),this.encryptionType=e,this.data=t,this.iv=i,this.mac=n}initFromEncryptedString(e){if(this.encryptedString=e,!this.encryptedString)return;const{encType:t,encPieces:i}=q.parseEncryptedString(this.encryptedString);if(this.encryptionType=t,i.length===o[t])switch(t){case a.AesCbc128_HmacSha256_B64:case a.AesCbc256_HmacSha256_B64:this.iv=i[0],this.data=i[1],this.mac=i[2];break;case a.AesCbc256_B64:this.iv=i[0],this.data=i[1];break;case a.Rsa2048_OaepSha256_B64:case a.Rsa2048_OaepSha1_B64:this.data=i[0];break;default:return}}static parseEncryptedString(e){const t=e.split(".");let i,n=null;if(2===t.length)try{i=parseInt(t[0],null),n=t[1].split("|")}catch(r){return}else n=e.split("|"),i=3===n.length?a.AesCbc128_HmacSha256_B64:a.AesCbc256_B64;return{encType:i,encPieces:n}}static isSerializedEncString(e){const{encType:t,encPieces:i}=this.parseEncryptedString(e);return o[t]===i.length}decrypt(e,t=null){return V(this,void 0,void 0,(function*(){if(null!=this.decryptedValue)return this.decryptedValue;try{if(null==t&&(t=yield this.getKeyForDecryption(e)),null==t)throw new Error("No key to decrypt EncString with orgId "+e);const i=T.getContainerService().getEncryptService();this.decryptedValue=yield i.decryptToUtf8(this,t)}catch(i){this.decryptedValue="[error: cannot decrypt]"}return this.decryptedValue}))}getKeyForDecryption(e){return V(this,void 0,void 0,(function*(){const t=T.getContainerService().getCryptoService();return null!=e?yield t.getOrgKey(e):yield t.getUserKeyWithLegacySupport()}))}}class G{}var Y=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class ${constructor(e,t,i){this.cryptoFunctionService=e,this.logService=t,this.logMacFailures=i}encrypt(e,t){return Y(this,void 0,void 0,(function*(){if(null==t)throw new Error("No encryption key provided.");if(null==e)return Promise.resolve(null);let i;i="string"==typeof e?T.fromUtf8ToArray(e):e;const n=yield this.aesEncrypt(i,t),r=T.fromBufferToB64(n.iv),s=T.fromBufferToB64(n.data),a=null!=n.mac?T.fromBufferToB64(n.mac):null;return new q(n.key.encType,s,r,a)}))}encryptToBytes(e,t){return Y(this,void 0,void 0,(function*(){if(null==t)throw new Error("No encryption key provided.");const i=yield this.aesEncrypt(e,t);let n=0;null!=i.mac&&(n=i.mac.byteLength);const r=new Uint8Array(1+i.iv.byteLength+n+i.data.byteLength);return r.set([i.key.encType]),r.set(new Uint8Array(i.iv),1),null!=i.mac&&r.set(new Uint8Array(i.mac),1+i.iv.byteLength),r.set(new Uint8Array(i.data),1+i.iv.byteLength+n),new W(r)}))}decryptToUtf8(e,t){return Y(this,void 0,void 0,(function*(){if(null==t)throw new Error("No key provided for decryption.");if(null!=(t=this.resolveLegacyKey(t,e)).macKey&&null==(null==e?void 0:e.mac))return this.logService.error("mac required."),null;if(t.encType!==e.encryptionType)return this.logService.error("encType unavailable."),null;const i=this.cryptoFunctionService.aesDecryptFastParameters(e.data,e.iv,e.mac,t);if(null!=i.macKey&&null!=i.mac){const e=yield this.cryptoFunctionService.hmacFast(i.macData,i.macKey,"sha256");if(!(yield this.cryptoFunctionService.compareFast(i.mac,e)))return this.logMacFailed("mac failed."),null}return yield this.cryptoFunctionService.aesDecryptFast(i,"cbc")}))}decryptToBytes(e,t){return Y(this,void 0,void 0,(function*(){if(null==t)throw new Error("No encryption key provided.");if(null==e)throw new Error("Nothing provided for decryption.");if(null!=(t=this.resolveLegacyKey(t,e)).macKey&&null==e.macBytes)return null;if(t.encType!==e.encryptionType)return null;if(null!=t.macKey&&null!=e.macBytes){const i=new Uint8Array(e.ivBytes.byteLength+e.dataBytes.byteLength);i.set(new Uint8Array(e.ivBytes),0),i.set(new Uint8Array(e.dataBytes),e.ivBytes.byteLength);const n=yield this.cryptoFunctionService.hmac(i,t.macKey,"sha256");if(null===n)return null;if(!(yield this.cryptoFunctionService.compare(e.macBytes,n)))return this.logMacFailed("mac failed."),null}const i=yield this.cryptoFunctionService.aesDecrypt(e.dataBytes,e.ivBytes,t.encKey,"cbc");return null!=i?i:null}))}decryptItems(e,t){return Y(this,void 0,void 0,(function*(){return null==e||e.length<1?[]:yield Promise.all(e.map((e=>e.decrypt(t))))}))}aesEncrypt(e,t){return Y(this,void 0,void 0,(function*(){const i=new G;if(i.key=t,i.iv=yield this.cryptoFunctionService.randomBytes(16),i.data=yield this.cryptoFunctionService.aesEncrypt(e,i.iv,i.key.encKey),null!=i.key.macKey){const e=new Uint8Array(i.iv.byteLength+i.data.byteLength);e.set(new Uint8Array(i.iv),0),e.set(new Uint8Array(i.data),i.iv.byteLength),i.mac=yield this.cryptoFunctionService.hmac(e,i.key.macKey,"sha256")}return i}))}logMacFailed(e){this.logMacFailures&&this.logService.error(e)}resolveLegacyKey(e,t){return t.encryptionType===a.AesCbc128_HmacSha256_B64&&e.encType===a.AesCbc256_B64?new F(e.key,a.AesCbc128_HmacSha256_B64):e}}var Q,X,Z,ee=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class te{buildDomainModel(e,t,i,n=[]){for(const r in i){if(!i.hasOwnProperty(r))continue;const s=t[i[r]||r];n.indexOf(r)>-1?e[r]=s||null:e[r]=s?new q(s):null}}buildDataModel(e,t,i,n=[]){for(const r in i){if(!i.hasOwnProperty(r))continue;const s=e[i[r]||r];n.indexOf(r)>-1?t[r]=null!=s?s:null:t[r]=null!=s?s.encryptedString:null}}decryptObj(e,t,i,n=null){return ee(this,void 0,void 0,(function*(){const r=[],s=this;for(const a in t)t.hasOwnProperty(a)&&function(a){const o=Promise.resolve().then((()=>{const e=t[a]||a;return s[e]?s[e].decrypt(i,n):null})).then((t=>{e[a]=t}));r.push(o)}(a);return yield Promise.all(r),e}))}}!function(e){e[e.Cipher=0]="Cipher",e[e.CipherView=1]="CipherView"}(Q||(Q={})),function(e){e[e.Login=1]="Login",e[e.SecureNote=2]="SecureNote",e[e.Card=3]="Card",e[e.Identity=4]="Identity"}(X||(X={}));class ie{constructor(e){null!=e&&(this.id=e.id,this.url=e.url,this.fileName=e.fileName,this.key=e.key,this.size=e.size,this.sizeName=e.sizeName)}}class ne{constructor(e){null!=e&&(this.cardholderName=e.cardholderName,this.brand=e.brand,this.number=e.number,this.expMonth=e.expMonth,this.expYear=e.expYear,this.code=e.code)}}class re{constructor(e){null!=e&&(this.type=e.type,this.name=e.name,this.value=e.value,this.linkedId=e.linkedId)}}class se{constructor(e){null!=e&&(this.title=e.title,this.firstName=e.firstName,this.middleName=e.middleName,this.lastName=e.lastName,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.city=e.city,this.state=e.state,this.postalCode=e.postalCode,this.country=e.country,this.company=e.company,this.email=e.email,this.phone=e.phone,this.ssn=e.ssn,this.username=e.username,this.passportNumber=e.passportNumber,this.licenseNumber=e.licenseNumber)}}class ae{constructor(e){null!=e&&(this.credentialId=e.credentialId,this.keyType=e.keyType,this.keyAlgorithm=e.keyAlgorithm,this.keyCurve=e.keyCurve,this.keyValue=e.keyValue,this.rpId=e.rpId,this.userHandle=e.userHandle,this.counter=e.counter,this.rpName=e.rpName,this.userDisplayName=e.userDisplayName,this.discoverable=e.discoverable,this.creationDate=e.creationDate)}}class oe{constructor(e){this.match=null,null!=e&&(this.uri=e.uri,this.match=e.match)}}class le{constructor(e){var t;null!=e&&(this.username=e.username,this.password=e.password,this.passwordRevisionDate=e.passwordRevisionDate,this.totp=e.totp,this.autofillOnPageLoad=e.autofillOnPageLoad,e.uris&&(this.uris=e.uris.map((e=>new oe(e)))),e.fido2Credentials&&(this.fido2Credentials=null===(t=e.fido2Credentials)||void 0===t?void 0:t.map((e=>new ae(e)))))}}class ue{constructor(e){null!=e&&(this.password=e.password,this.lastUsedDate=e.lastUsedDate)}}class ce{constructor(e){null!=e&&(this.type=e.type)}}class de{constructor(e,t){if(null!=e){switch(this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.edit=e.edit,this.viewPassword=e.viewPassword,this.organizationUseTotp=e.organizationUseTotp,this.favorite=e.favorite,this.revisionDate=e.revisionDate,this.type=e.type,this.name=e.name,this.notes=e.notes,this.collectionIds=null!=t?t:e.collectionIds,this.creationDate=e.creationDate,this.deletedDate=e.deletedDate,this.reprompt=e.reprompt,this.key=e.key,this.type){case X.Login:this.login=new le(e.login);break;case X.SecureNote:this.secureNote=new ce(e.secureNote);break;case X.Card:this.card=new ne(e.card);break;case X.Identity:this.identity=new se(e.identity)}null!=e.fields&&(this.fields=e.fields.map((e=>new re(e)))),null!=e.attachments&&(this.attachments=e.attachments.map((e=>new ie(e)))),null!=e.passwordHistory&&(this.passwordHistory=e.passwordHistory.map((e=>new ue(e))))}}}!function(e){e[e.None=0]="None",e[e.Password=1]="Password"}(Z||(Z={}));class he{constructor(e){this.id=null,this.url=null,this.size=null,this.sizeName=null,this.fileName=null,this.key=null,e&&(this.id=e.id,this.url=e.url,this.size=e.size,this.sizeName=e.sizeName)}get fileSize(){try{if(null!=this.size)return parseInt(this.size,null)}catch(e){}return 0}static fromJSON(e){const t=null==e.key?null:F.fromJSON(e.key);return Object.assign(new he,e,{key:t})}}class pe{constructor(e,t){this.propertyKey=e,this._i18nKey=t}get i18nKey(){var e;return null!==(e=this._i18nKey)&&void 0!==e?e:this.propertyKey}}function me(e,t){return(i,n)=>{null==i.linkedFieldOptions&&(i.linkedFieldOptions=new Map),i.linkedFieldOptions.set(e,new pe(n,t))}}class ye{}var fe=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},ge=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ve extends ye{constructor(){super(...arguments),this.cardholderName=null,this.expMonth=null,this.expYear=null,this.code=null,this._brand=null,this._number=null,this._subTitle=null}get maskedCode(){return null!=this.code?"•".repeat(this.code.length):null}get maskedNumber(){return null!=this.number?"•".repeat(this.number.length):null}get brand(){return this._brand}set brand(e){this._brand=e,this._subTitle=null}get number(){return this._number}set number(e){this._number=e,this._subTitle=null}get subTitle(){if(null==this._subTitle&&(this._subTitle=this.brand,null!=this.number&&this.number.length>=4)){null!=this._subTitle&&""!==this._subTitle?this._subTitle+=", ":this._subTitle="";const e=this.number.length>=5&&null!=this.number.match(new RegExp("^3[47]"))?5:4;this._subTitle+="*"+this.number.substr(this.number.length-e)}return this._subTitle}get expiration(){if(!this.expMonth&&!this.expYear)return null;let e=null!=this.expMonth?("0"+this.expMonth).slice(-2):"__";return e+=" / "+(null!=this.expYear?this.formatYear(this.expYear):"____"),e}formatYear(e){return 2===e.length?"20"+e:e}static fromJSON(e){return Object.assign(new ve,e)}static getCardBrandByPatterns(e){if(null==e||"string"!=typeof e||""===e.trim())return null;let t=new RegExp("^4");return null!=e.match(t)?"Visa":/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/.test(e)?"Mastercard":(t=new RegExp("^3[47]"),null!=e.match(t)?"Amex":(t=new RegExp("^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)"),null!=e.match(t)?"Discover":(t=new RegExp("^36"),null!=e.match(t)?"Diners Club":(t=new RegExp("^30[0-5]"),null!=e.match(t)?"Diners Club":(t=new RegExp("^35(2[89]|[3-8][0-9])"),null!=e.match(t)?"JCB":(t=new RegExp("^(4026|417500|4508|4844|491(3|7))"),null!=e.match(t)?"Visa":null))))))}}fe([me(v.CardholderName),ge("design:type",String)],ve.prototype,"cardholderName",void 0),fe([me(v.ExpMonth,"expirationMonth"),ge("design:type",String)],ve.prototype,"expMonth",void 0),fe([me(v.ExpYear,"expirationYear"),ge("design:type",String)],ve.prototype,"expYear",void 0),fe([me(v.Code,"securityCode"),ge("design:type",String)],ve.prototype,"code",void 0),fe([me(v.Brand),ge("design:type",String),ge("design:paramtypes",[String])],ve.prototype,"brand",null),fe([me(v.Number),ge("design:type",String),ge("design:paramtypes",[String])],ve.prototype,"number",null);class we{constructor(e){this.name=null,this.value=null,this.type=null,this.newField=!1,this.showValue=!1,this.showCount=!1,this.linkedId=null,e&&(this.type=e.type,this.linkedId=e.linkedId)}get maskedValue(){return null!=this.value?"••••••••":null}static fromJSON(e){return Object.assign(new we,e)}}var be=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class De extends ye{constructor(){super(),this.title=null,this.middleName=null,this.address1=null,this.address2=null,this.address3=null,this.city=null,this.state=null,this.postalCode=null,this.country=null,this.company=null,this.email=null,this.phone=null,this.ssn=null,this.username=null,this.passportNumber=null,this.licenseNumber=null,this._firstName=null,this._lastName=null,this._subTitle=null}get firstName(){return this._firstName}set firstName(e){this._firstName=e,this._subTitle=null}get lastName(){return this._lastName}set lastName(e){this._lastName=e,this._subTitle=null}get subTitle(){return null!=this._subTitle||null==this.firstName&&null==this.lastName||(this._subTitle="",null!=this.firstName&&(this._subTitle=this.firstName),null!=this.lastName&&(""!==this._subTitle&&(this._subTitle+=" "),this._subTitle+=this.lastName)),this._subTitle}get fullName(){if(null!=this.title||null!=this.firstName||null!=this.middleName||null!=this.lastName){let e="";return null!=this.title&&(e+=this.title+" "),null!=this.firstName&&(e+=this.firstName+" "),null!=this.middleName&&(e+=this.middleName+" "),null!=this.lastName&&(e+=this.lastName),e.trim()}return null}get fullAddress(){let e=this.address1;return T.isNullOrWhitespace(this.address2)||(T.isNullOrWhitespace(e)||(e+=", "),e+=this.address2),T.isNullOrWhitespace(this.address3)||(T.isNullOrWhitespace(e)||(e+=", "),e+=this.address3),e}get fullAddressPart2(){if(null==this.city&&null==this.state&&null==this.postalCode)return null;const e=this.city||"-",t=this.state,i=this.postalCode||"-";let n=e;return T.isNullOrWhitespace(t)||(n+=", "+t),n+=", "+i,n}static fromJSON(e){return Object.assign(new De,e)}}be([me(w.Title),Se("design:type",String)],De.prototype,"title",void 0),be([me(w.MiddleName),Se("design:type",String)],De.prototype,"middleName",void 0),be([me(w.Address1),Se("design:type",String)],De.prototype,"address1",void 0),be([me(w.Address2),Se("design:type",String)],De.prototype,"address2",void 0),be([me(w.Address3),Se("design:type",String)],De.prototype,"address3",void 0),be([me(w.City,"cityTown"),Se("design:type",String)],De.prototype,"city",void 0),be([me(w.State,"stateProvince"),Se("design:type",String)],De.prototype,"state",void 0),be([me(w.PostalCode,"zipPostalCode"),Se("design:type",String)],De.prototype,"postalCode",void 0),be([me(w.Country),Se("design:type",String)],De.prototype,"country",void 0),be([me(w.Company),Se("design:type",String)],De.prototype,"company",void 0),be([me(w.Email),Se("design:type",String)],De.prototype,"email",void 0),be([me(w.Phone),Se("design:type",String)],De.prototype,"phone",void 0),be([me(w.Ssn),Se("design:type",String)],De.prototype,"ssn",void 0),be([me(w.Username),Se("design:type",String)],De.prototype,"username",void 0),be([me(w.PassportNumber),Se("design:type",String)],De.prototype,"passportNumber",void 0),be([me(w.LicenseNumber),Se("design:type",String)],De.prototype,"licenseNumber",void 0),be([me(w.FirstName),Se("design:type",String),Se("design:paramtypes",[String])],De.prototype,"firstName",null),be([me(w.LastName),Se("design:type",String),Se("design:paramtypes",[String])],De.prototype,"lastName",null),be([me(w.FullName),Se("design:type",String),Se("design:paramtypes",[])],De.prototype,"fullName",null);class Ce extends ye{constructor(){super(...arguments),this.creationDate=null}get subTitle(){return this.userDisplayName}static fromJSON(e){const t=null!=e.creationDate?new Date(e.creationDate):null;return Object.assign(new Ce,e,{creationDate:t})}}const Ne=["https://","http://","ssh://","ftp://","sftp://","irc://","vnc://","rdp://","ms-rd:","chrome://","iosapp://","androidapp://"];class Oe{static canLaunch(e){if(T.isNullOrWhitespace(e))return!1;for(let t=0;t<Ne.length;t++)if(0===e.indexOf(Ne[t]))return!0;return!1}}class _e{constructor(e){this.match=null,this._uri=null,this._domain=null,this._hostname=null,this._host=null,this._canLaunch=null,e&&(this.match=e.match)}get uri(){return this._uri}set uri(e){this._uri=e,this._domain=null,this._canLaunch=null}get domain(){return null==this._domain&&null!=this.uri&&(this._domain=T.getDomain(this.uri),""===this._domain&&(this._domain=null)),this._domain}get hostname(){return this.match===U.RegularExpression?null:(null==this._hostname&&null!=this.uri&&(this._hostname=T.getHostname(this.uri),""===this._hostname&&(this._hostname=null)),this._hostname)}get host(){return this.match===U.RegularExpression?null:(null==this._host&&null!=this.uri&&(this._host=T.getHost(this.uri),""===this._host&&(this._host=null)),this._host)}get hostnameOrUri(){return null!=this.hostname?this.hostname:this.uri}get hostOrUri(){return null!=this.host?this.host:this.uri}get isWebsite(){return null!=this.uri&&(0===this.uri.indexOf("http://")||0===this.uri.indexOf("https://")||this.uri.indexOf("://")<0&&!T.isNullOrWhitespace(T.getDomain(this.uri)))}get canLaunch(){return null!=this._canLaunch||(null!=this.uri&&this.match!==U.RegularExpression?this._canLaunch=Oe.canLaunch(this.launchUri):this._canLaunch=!1),this._canLaunch}get launchUri(){return this.uri.indexOf("://")<0&&!T.isNullOrWhitespace(T.getDomain(this.uri))?"http://"+this.uri:this.uri}static fromJSON(e){return Object.assign(new _e,e)}matchesUri(e,t,i=null){var n;if(!this.uri||!e)return!1;let r=null!==(n=this.match)&&void 0!==n?n:i;null!=r||(r=U.Domain);const s=T.getDomain(e),a=t.add(s);switch(r){case U.Domain:return this.matchesDomain(e,a);case U.Host:{const t=T.getHost(e);return null!=t&&t===T.getHost(this.uri)}case U.Exact:return e===this.uri;case U.StartsWith:return e.startsWith(this.uri);case U.RegularExpression:try{return new RegExp(this.uri,"i").test(e)}catch(o){return!1}case U.Never:return!1}return!1}matchesDomain(e,t){if(null==e||null==this.domain||!t.has(this.domain))return!1;if(T.DomainMatchBlacklist.has(this.domain)){const t=T.getHost(e);return!T.DomainMatchBlacklist.get(this.domain).has(t)}return!0}}var Ae=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},Ue=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class Be extends ye{constructor(e){super(),this.username=null,this.password=null,this.passwordRevisionDate=null,this.totp=null,this.uris=null,this.autofillOnPageLoad=null,this.fido2Credentials=null,e&&(this.passwordRevisionDate=e.passwordRevisionDate,this.autofillOnPageLoad=e.autofillOnPageLoad)}get uri(){return this.hasUris?this.uris[0].uri:null}get maskedPassword(){return null!=this.password?"••••••••":null}get subTitle(){return this.username}get canLaunch(){return this.hasUris&&this.uris.some((e=>e.canLaunch))}get hasTotp(){return!T.isNullOrWhitespace(this.totp)}get launchUri(){if(this.hasUris){const e=this.uris.find((e=>e.canLaunch));if(null!=e)return e.launchUri}return null}get hasUris(){return null!=this.uris&&this.uris.length>0}get hasFido2Credentials(){return null!=this.fido2Credentials&&this.fido2Credentials.length>0}matchesUri(e,t,i=null){return null!=this.uris&&this.uris.some((n=>n.matchesUri(e,t,i)))}static fromJSON(e){var t,i;const n=null==e.passwordRevisionDate?null:new Date(e.passwordRevisionDate),r=null===(t=e.uris)||void 0===t?void 0:t.map((e=>_e.fromJSON(e))),s=null===(i=e.fido2Credentials)||void 0===i?void 0:i.map((e=>Ce.fromJSON(e)));return Object.assign(new Be,e,{passwordRevisionDate:n,uris:r,fido2Credentials:s})}}Ae([me(g.Username),Ue("design:type",String)],Be.prototype,"username",void 0),Ae([me(g.Password),Ue("design:type",String)],Be.prototype,"password",void 0);class ke{constructor(e){this.password=null,this.lastUsedDate=null,e&&(this.lastUsedDate=e.lastUsedDate)}static fromJSON(e){const t=null==e.lastUsedDate?null:new Date(e.lastUsedDate);return Object.assign(new ke,e,{lastUsedDate:t})}}class xe extends ye{constructor(e){super(),this.type=null,e&&(this.type=e.type)}get subTitle(){return null}static fromJSON(e){return Object.assign(new xe,e)}}class Ee{constructor(e){var t;this.initializerKey=Q.CipherView,this.id=null,this.organizationId=null,this.folderId=null,this.name=null,this.notes=null,this.type=null,this.favorite=!1,this.organizationUseTotp=!1,this.edit=!1,this.viewPassword=!0,this.login=new Be,this.identity=new De,this.card=new ve,this.secureNote=new xe,this.attachments=null,this.fields=null,this.passwordHistory=null,this.collectionIds=null,this.revisionDate=null,this.creationDate=null,this.deletedDate=null,this.reprompt=Z.None,e&&(this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.favorite=e.favorite,this.organizationUseTotp=e.organizationUseTotp,this.edit=e.edit,this.viewPassword=e.viewPassword,this.type=e.type,this.localData=e.localData,this.collectionIds=e.collectionIds,this.revisionDate=e.revisionDate,this.creationDate=e.creationDate,this.deletedDate=e.deletedDate,this.reprompt=null!==(t=e.reprompt)&&void 0!==t?t:Z.None)}get item(){switch(this.type){case X.Login:return this.login;case X.SecureNote:return this.secureNote;case X.Card:return this.card;case X.Identity:return this.identity}return null}get subTitle(){var e;return null===(e=this.item)||void 0===e?void 0:e.subTitle}get hasPasswordHistory(){return this.passwordHistory&&this.passwordHistory.length>0}get hasAttachments(){return this.attachments&&this.attachments.length>0}get hasOldAttachments(){if(this.hasAttachments)for(let e=0;e<this.attachments.length;e++)if(null==this.attachments[e].key)return!0;return!1}get hasFields(){return this.fields&&this.fields.length>0}get passwordRevisionDisplayDate(){return this.type!==X.Login||null==this.login||null==this.login.password||""===this.login.password?null:this.login.passwordRevisionDate}get isDeleted(){return null!=this.deletedDate}get linkedFieldOptions(){var e;return null===(e=this.item)||void 0===e?void 0:e.linkedFieldOptions}linkedFieldValue(e){var t;const i=null===(t=this.linkedFieldOptions)||void 0===t?void 0:t.get(e);if(null==i)return null;this.item;return this.item[i.propertyKey]}linkedFieldI18nKey(e){var t;return null===(t=this.linkedFieldOptions.get(e))||void 0===t?void 0:t.i18nKey}static fromJSON(e){var t,i,n;const r=new Ee,s=null==e.revisionDate?null:new Date(e.revisionDate),a=null==e.deletedDate?null:new Date(e.deletedDate),o=null===(t=e.attachments)||void 0===t?void 0:t.map((e=>he.fromJSON(e))),l=null===(i=e.fields)||void 0===i?void 0:i.map((e=>we.fromJSON(e))),u=null===(n=e.passwordHistory)||void 0===n?void 0:n.map((e=>ke.fromJSON(e)));switch(Object.assign(r,e,{revisionDate:s,deletedDate:a,attachments:o,fields:l,passwordHistory:u}),e.type){case X.Card:r.card=ve.fromJSON(e.card);break;case X.Identity:r.identity=De.fromJSON(e.identity);break;case X.Login:r.login=Be.fromJSON(e.login);break;case X.SecureNote:r.secureNote=xe.fromJSON(e.secureNote)}return r}}var Pe=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Re extends te{constructor(e){super(),null!=e&&(this.size=e.size,this.buildDomainModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]))}decrypt(e,t){return Pe(this,void 0,void 0,(function*(){const i=yield this.decryptObj(new he(this),{fileName:null},e,t);return null!=this.key&&(i.key=yield this.decryptAttachmentKey(e,t)),i}))}decryptAttachmentKey(e,t){return Pe(this,void 0,void 0,(function*(){try{null==t&&(t=yield this.getKeyForDecryption(e));const i=T.getContainerService().getEncryptService(),n=yield i.decryptToBytes(this.key,t);return new F(n)}catch(i){}}))}getKeyForDecryption(e){return Pe(this,void 0,void 0,(function*(){const t=T.getContainerService().getCryptoService();return null!=e?yield t.getOrgKey(e):yield t.getUserKeyWithLegacySupport()}))}toAttachmentData(){const e=new ie;return e.size=this.size,this.buildDataModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.key),i=q.fromJSON(e.fileName);return Object.assign(new Re,e,{key:t,fileName:i})}}class Te extends te{constructor(e){super(),null!=e&&this.buildDomainModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},[])}decrypt(e,t){return this.decryptObj(new ve,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},e,t)}toCardData(){const e=new ne;return this.buildDataModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null}),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.cardholderName),i=q.fromJSON(e.brand),n=q.fromJSON(e.number),r=q.fromJSON(e.expMonth),s=q.fromJSON(e.expYear),a=q.fromJSON(e.code);return Object.assign(new Te,e,{cardholderName:t,brand:i,number:n,expMonth:r,expYear:s,code:a})}}class Fe extends te{constructor(e){super(),null!=e&&(this.type=e.type,this.linkedId=e.linkedId,this.buildDomainModel(this,e,{name:null,value:null},[]))}decrypt(e,t){return this.decryptObj(new we(this),{name:null,value:null},e,t)}toFieldData(){const e=new re;return this.buildDataModel(this,e,{name:null,value:null,type:null,linkedId:null},["type","linkedId"]),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.name),i=q.fromJSON(e.value);return Object.assign(new Fe,e,{name:t,value:i})}}class ze extends te{constructor(e){super(),null!=e&&this.buildDomainModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},[])}decrypt(e,t){return this.decryptObj(new De,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},e,t)}toIdentityData(){const e=new se;return this.buildDataModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null}),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.title),i=q.fromJSON(e.firstName),n=q.fromJSON(e.middleName),r=q.fromJSON(e.lastName),s=q.fromJSON(e.address1),a=q.fromJSON(e.address2),o=q.fromJSON(e.address3),l=q.fromJSON(e.city),u=q.fromJSON(e.state),c=q.fromJSON(e.postalCode),d=q.fromJSON(e.country),h=q.fromJSON(e.company),p=q.fromJSON(e.email),m=q.fromJSON(e.phone),y=q.fromJSON(e.ssn),f=q.fromJSON(e.username),g=q.fromJSON(e.passportNumber),v=q.fromJSON(e.licenseNumber);return Object.assign(new ze,e,{title:t,firstName:i,middleName:n,lastName:r,address1:s,address2:a,address3:o,city:l,state:u,postalCode:c,country:d,company:h,email:p,phone:m,ssn:y,username:f,passportNumber:g,licenseNumber:v})}}var Ie=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Le extends te{constructor(e){super(),this.credentialId=null,null!=e&&(this.buildDomainModel(this,e,{credentialId:null,keyType:null,keyAlgorithm:null,keyCurve:null,keyValue:null,rpId:null,userHandle:null,counter:null,rpName:null,userDisplayName:null,discoverable:null},[]),this.creationDate=null!=e.creationDate?new Date(e.creationDate):null)}decrypt(e,t){return Ie(this,void 0,void 0,(function*(){const i=yield this.decryptObj(new Ce,{credentialId:null,keyType:null,keyAlgorithm:null,keyCurve:null,keyValue:null,rpId:null,userHandle:null,rpName:null,userDisplayName:null,discoverable:null},e,t),{counter:n}=yield this.decryptObj({counter:""},{counter:null},e,t);i.counter=parseInt(n);const{discoverable:r}=yield this.decryptObj({discoverable:""},{discoverable:null},e,t);return i.discoverable="true"===r,i.creationDate=this.creationDate,i}))}toFido2CredentialData(){const e=new ae;return e.creationDate=this.creationDate.toISOString(),this.buildDataModel(this,e,{credentialId:null,keyType:null,keyAlgorithm:null,keyCurve:null,keyValue:null,rpId:null,userHandle:null,counter:null,rpName:null,userDisplayName:null,discoverable:null}),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.credentialId),i=q.fromJSON(e.keyType),n=q.fromJSON(e.keyAlgorithm),r=q.fromJSON(e.keyCurve),s=q.fromJSON(e.keyValue),a=q.fromJSON(e.rpId),o=q.fromJSON(e.userHandle),l=q.fromJSON(e.counter),u=q.fromJSON(e.rpName),c=q.fromJSON(e.userDisplayName),d=q.fromJSON(e.discoverable),h=null!=e.creationDate?new Date(e.creationDate):null;return Object.assign(new Le,e,{credentialId:t,keyType:i,keyAlgorithm:n,keyCurve:r,keyValue:s,rpId:a,userHandle:o,counter:l,rpName:u,userDisplayName:c,discoverable:d,creationDate:h})}}class Me extends te{constructor(e){super(),null!=e&&(this.match=e.match,this.buildDomainModel(this,e,{uri:null},[]))}decrypt(e,t){return this.decryptObj(new _e(this),{uri:null},e,t)}toLoginUriData(){const e=new oe;return this.buildDataModel(this,e,{uri:null,match:null},["match"]),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.uri);return Object.assign(new Me,e,{uri:t})}}var Ke=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Je extends te{constructor(e){super(),null!=e&&(this.passwordRevisionDate=null!=e.passwordRevisionDate?new Date(e.passwordRevisionDate):null,this.autofillOnPageLoad=e.autofillOnPageLoad,this.buildDomainModel(this,e,{username:null,password:null,totp:null},[]),e.uris&&(this.uris=[],e.uris.forEach((e=>{this.uris.push(new Me(e))}))),e.fido2Credentials&&(this.fido2Credentials=e.fido2Credentials.map((e=>new Le(e)))))}decrypt(e,t){return Ke(this,void 0,void 0,(function*(){const i=yield this.decryptObj(new Be(this),{username:null,password:null,totp:null},e,t);if(null!=this.uris){i.uris=[];for(let n=0;n<this.uris.length;n++){const r=yield this.uris[n].decrypt(e,t);i.uris.push(r)}}return null!=this.fido2Credentials&&(i.fido2Credentials=yield Promise.all(this.fido2Credentials.map((i=>i.decrypt(e,t))))),i}))}toLoginData(){const e=new le;return e.passwordRevisionDate=null!=this.passwordRevisionDate?this.passwordRevisionDate.toISOString():null,e.autofillOnPageLoad=this.autofillOnPageLoad,this.buildDataModel(this,e,{username:null,password:null,totp:null}),null!=this.uris&&this.uris.length>0&&(e.uris=[],this.uris.forEach((t=>{e.uris.push(t.toLoginUriData())}))),null!=this.fido2Credentials&&this.fido2Credentials.length>0&&(e.fido2Credentials=this.fido2Credentials.map((e=>e.toFido2CredentialData()))),e}static fromJSON(e){var t,i,n;if(null==e)return null;const r=q.fromJSON(e.username),s=q.fromJSON(e.password),a=q.fromJSON(e.totp),o=null==e.passwordRevisionDate?null:new Date(e.passwordRevisionDate),l=null===(t=e.uris)||void 0===t?void 0:t.map((e=>Me.fromJSON(e))),u=null!==(n=null===(i=e.fido2Credentials)||void 0===i?void 0:i.map((e=>Le.fromJSON(e))))&&void 0!==n?n:[];return Object.assign(new Je,e,{username:r,password:s,totp:a,passwordRevisionDate:o,uris:l,fido2Credentials:u})}}class He extends te{constructor(e){super(),null!=e&&(this.buildDomainModel(this,e,{password:null}),this.lastUsedDate=new Date(e.lastUsedDate))}decrypt(e,t){return this.decryptObj(new ke(this),{password:null},e,t)}toPasswordHistoryData(){const e=new ue;return e.lastUsedDate=this.lastUsedDate.toISOString(),this.buildDataModel(this,e,{password:null}),e}static fromJSON(e){if(null==e)return null;const t=q.fromJSON(e.password),i=null==e.lastUsedDate?null:new Date(e.lastUsedDate);return Object.assign(new He,e,{password:t,lastUsedDate:i})}}class je extends te{constructor(e){super(),null!=e&&(this.type=e.type)}decrypt(e,t){return Promise.resolve(new xe(this))}toSecureNoteData(){const e=new ce;return e.type=this.type,e}static fromJSON(e){return null==e?null:Object.assign(new je,e)}}var We=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};class Ve extends te{constructor(e,t=null){if(super(),this.initializerKey=Q.Cipher,null!=e){switch(this.buildDomainModel(this,e,{id:null,organizationId:null,folderId:null,name:null,notes:null,key:null},["id","organizationId","folderId"]),this.type=e.type,this.favorite=e.favorite,this.organizationUseTotp=e.organizationUseTotp,this.edit=e.edit,null!=e.viewPassword?this.viewPassword=e.viewPassword:this.viewPassword=!0,this.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,this.collectionIds=e.collectionIds,this.localData=t,this.creationDate=null!=e.creationDate?new Date(e.creationDate):null,this.deletedDate=null!=e.deletedDate?new Date(e.deletedDate):null,this.reprompt=e.reprompt,this.type){case X.Login:this.login=new Je(e.login);break;case X.SecureNote:this.secureNote=new je(e.secureNote);break;case X.Card:this.card=new Te(e.card);break;case X.Identity:this.identity=new ze(e.identity)}null!=e.attachments?this.attachments=e.attachments.map((e=>new Re(e))):this.attachments=null,null!=e.fields?this.fields=e.fields.map((e=>new Fe(e))):this.fields=null,null!=e.passwordHistory?this.passwordHistory=e.passwordHistory.map((e=>new He(e))):this.passwordHistory=null}}decrypt(e){return We(this,void 0,void 0,(function*(){const t=new Ee(this);if(null!=this.key){const t=T.getContainerService().getEncryptService();e=new F(yield t.decryptToBytes(this.key,e))}switch(yield this.decryptObj(t,{name:null,notes:null},this.organizationId,e),this.type){case X.Login:t.login=yield this.login.decrypt(this.organizationId,e);break;case X.SecureNote:t.secureNote=yield this.secureNote.decrypt(this.organizationId,e);break;case X.Card:t.card=yield this.card.decrypt(this.organizationId,e);break;case X.Identity:t.identity=yield this.identity.decrypt(this.organizationId,e)}if(null!=this.attachments&&this.attachments.length>0){const i=[];yield this.attachments.reduce(((t,n)=>t.then((()=>n.decrypt(this.organizationId,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.attachments=i}if(null!=this.fields&&this.fields.length>0){const i=[];yield this.fields.reduce(((t,n)=>t.then((()=>n.decrypt(this.organizationId,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.fields=i}if(null!=this.passwordHistory&&this.passwordHistory.length>0){const i=[];yield this.passwordHistory.reduce(((t,n)=>t.then((()=>n.decrypt(this.organizationId,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.passwordHistory=i}return t}))}toCipherData(){var e;const t=new de;switch(t.id=this.id,t.organizationId=this.organizationId,t.folderId=this.folderId,t.edit=this.edit,t.viewPassword=this.viewPassword,t.organizationUseTotp=this.organizationUseTotp,t.favorite=this.favorite,t.revisionDate=null!=this.revisionDate?this.revisionDate.toISOString():null,t.type=this.type,t.collectionIds=this.collectionIds,t.creationDate=null!=this.creationDate?this.creationDate.toISOString():null,t.deletedDate=null!=this.deletedDate?this.deletedDate.toISOString():null,t.reprompt=this.reprompt,t.key=null===(e=this.key)||void 0===e?void 0:e.encryptedString,this.buildDataModel(this,t,{name:null,notes:null}),t.type){case X.Login:t.login=this.login.toLoginData();break;case X.SecureNote:t.secureNote=this.secureNote.toSecureNoteData();break;case X.Card:t.card=this.card.toCardData();break;case X.Identity:t.identity=this.identity.toIdentityData()}return null!=this.fields&&(t.fields=this.fields.map((e=>e.toFieldData()))),null!=this.attachments&&(t.attachments=this.attachments.map((e=>e.toAttachmentData()))),null!=this.passwordHistory&&(t.passwordHistory=this.passwordHistory.map((e=>e.toPasswordHistoryData()))),t}static fromJSON(e){var t,i,n;if(null==e)return null;const r=new Ve,s=q.fromJSON(e.name),a=q.fromJSON(e.notes),o=null==e.revisionDate?null:new Date(e.revisionDate),l=null==e.deletedDate?null:new Date(e.deletedDate),u=null===(t=e.attachments)||void 0===t?void 0:t.map((e=>Re.fromJSON(e))),c=null===(i=e.fields)||void 0===i?void 0:i.map((e=>Fe.fromJSON(e))),d=null===(n=e.passwordHistory)||void 0===n?void 0:n.map((e=>He.fromJSON(e))),h=q.fromJSON(e.key);switch(Object.assign(r,e,{name:s,notes:a,revisionDate:o,deletedDate:l,attachments:u,fields:c,passwordHistory:d,key:h}),e.type){case X.Card:r.card=Te.fromJSON(e.card);break;case X.Identity:r.identity=ze.fromJSON(e.identity);break;case X.Login:r.login=Je.fromJSON(e.login);break;case X.SecureNote:r.secureNote=je.fromJSON(e.secureNote)}return r}}const qe={[Q.Cipher]:Ve.fromJSON,[Q.CipherView]:Ee.fromJSON};var Ge=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function a(e){try{l(n.next(e))}catch(t){s(t)}}function o(e){try{l(n.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((n=n.apply(e,t||[])).next())}))};const Ye=self;let $e,Qe=!1;Ye.addEventListener("message",(e=>Ge(void 0,void 0,void 0,(function*(){Qe||function(){const e=new H(self),t=new z(!1);$e=new $(e,t,!0),new I(null,$e).attachToGlobal(self),Qe=!0}();const t=JSON.parse(e.data),i=F.fromJSON(t.key),n=t.items.map((e=>{var t;return(t=e.initializerKey,qe[t])(e)})),r=yield $e.decryptItems(n,i);Ye.postMessage({id:t.id,items:JSON.stringify(r)})}))))},12442:()=>{},95942:()=>{},53260:()=>{}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=r,a.c=s,a.x=()=>{var e=a.O(void 0,[407],(()=>a(34138)));return e=a.O(e)},e=[],a.O=(t,i,n,r)=>{if(!i){var s=1/0;for(c=0;c<e.length;c++){for(var[i,n,r]=e[c],o=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](i[l])))?i.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,n,r]},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);a.r(r);var s={};t=t||[null,i({}),i([]),i(i)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,a.d(r,s),r},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,i)=>(a.f[i](e,t),t)),[])),a.u=e=>e+".3965054f91d870070000.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!e;)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={768:1};a.f.i=(t,i)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[],i=t.push.bind(t);t.push=t=>{var[n,r,s]=t;for(var o in r)a.o(r,o)&&(a.m[o]=r[o]);for(s&&s(a);n.length;)e[n.pop()]=1;i(t)}})(),n=a.x,a.x=()=>a.e(407).then(n);a.x()})();
//# sourceMappingURL=encrypt-worker.c2cc98a6f3ed182765ea.js.map