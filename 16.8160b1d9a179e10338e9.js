"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[16],{38016:(e,n,t)=>{t.r(n),t.d(n,{MembersModule:()=>ti});var i=t(40164),o=t(71146),s=t(64984),r=t(65017),a=t(98645),c=t(54019),u=t(92716),l=t(84598),d=t(30359),p=t(33031),g=t(68362),m=t(58691),h=t(20099),U=t(20698),f=t(87264),Z=t(59281),_=t(15015),b=t(88409),v=t(63078),w=t(14309);function A(e){return""!==e.value&&e.value&&void 0!==e.value.split(",").map((e=>a.kI.email({value:e.trim()}))).find((e=>null!==e))?{multipleEmails:{message:"multipleInputEmails"}}:null}function x(e,n,t){return i=>{if(""===i.value||!i.value)return null;const o=Array.from(new Set(i.value.split(",").filter((e=>e&&""!==e.trim()&&!n.some((n=>n===e.trim()))))));return e.planProductType===f.kv.Free&&n.length+o.length>e.seats?{freePlanLimitReached:{message:t}}:null}}function y(e,n,t){return i=>{if(""===i.value||!i.value)return null;const o=Array.from(new Set(i.value.split(",").filter((e=>e&&""!==e.trim()&&!n.some((n=>n===e.trim()))))));return(e.planProductType===f.kv.Families||e.planProductType===f.kv.TeamsStarter)&&n.length+o.length>e.seats?{orgSeatLimitReachedWithoutUpgradePath:{message:t}}:null}}var T=t(24852),q=t(78627),C=t(99721),k=t(47244),S=t(73369),I=t(23915),P=t(19419),M=t(33245),N=t(98205),L=t(46246),z=t(36338),J=t(66385),R=t(81974),Q=t(7172),O=t(29465),G=t(24637),Y=t(11512),j=t(75734),E=t(36179),D=t(44358),B=t(21656),F=t(17731),$=t(26536),K=t(30674),H=t(27646),W=t(82933);function V(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"div",6),T._uU(1,"\n        "),T.TgZ(2,"input",7),T.NdJ("change",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.onChildCheck())})),T.qZA(),T._uU(3,"\n        "),T.TgZ(4,"label",2),T._uU(5),T.ALo(6,"i18n"),T.qZA(),T._uU(7,"\n      "),T.qZA()}if(2&e){const e=T.oxw().$implicit,n=T.oxw();T.xp6(2),T.Q6J("name",n.pascalize(e.key))("id",e.key)("formControl",e.value),T.xp6(2),T.Q6J("for",e.key),T.xp6(1),T.hij("\n          ",T.lcZ(6,5,e.key),"\n        ")}}function X(e,n){if(1&e&&(T.ynx(0),T._uU(1,"\n      "),T.YNc(2,V,8,7,"div",5),T._uU(3,"\n    "),T.BQk()),2&e){const e=n.$implicit,t=T.oxw();T.xp6(2),T.Q6J("ngIf",e.key!=t.parentId)}}class ee{constructor(){this.destroy$=new c.x,this.onSavedUser=new T.vpe,this.onDeletedUser=new T.vpe}get parentIndeterminate(){return this.children.some((([e,n])=>1==n.value))&&!this.children.every((([e,n])=>1==n.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,g.R)(this.destroy$)).subscribe((e=>{Object.values(this.checkboxes.controls).forEach((n=>n.setValue(e,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([e,n])=>e!=this.parentId))}onChildCheck(){const e=this.children.every((([e,n])=>1==n.value));this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,n){return n.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return H.c.camelToPascalCase(e)}}ee.ɵfac=function(e){return new(e||ee)},ee.ɵcmp=T.Xpm({type:ee,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:15,vars:13,consts:[[3,"formGroup"],["type","checkbox",3,"name","id","formControlName","indeterminate"],[1,"!tw-font-normal",3,"for"],[1,"tw-ml-6"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","",4,"ngIf"],[1,""],["type","checkbox",1,"",3,"name","id","formControl","change"]],template:function(e,n){1&e&&(T.TgZ(0,"div",0),T._uU(1,"\n  "),T._UZ(2,"input",1),T._uU(3,"\n  "),T.TgZ(4,"label",2),T._uU(5),T.ALo(6,"i18n"),T.qZA(),T._uU(7,"\n  "),T.TgZ(8,"div",3),T._uU(9,"\n    "),T.YNc(10,X,4,1,"ng-container",4),T.ALo(11,"keyvalue"),T._uU(12,"\n  "),T.qZA(),T._uU(13,"\n"),T.qZA(),T._uU(14,"\n")),2&e&&(T.Q6J("formGroup",n.checkboxes),T.xp6(2),T.Q6J("name",n.pascalize(n.parentId))("id",n.parentId)("formControlName",n.parentId)("indeterminate",n.parentIndeterminate),T.xp6(2),T.Q6J("for",n.parentId),T.xp6(1),T.hij("\n    ",T.lcZ(6,9,n.parentId),"\n  "),T.xp6(5),T.Q6J("ngForOf",T.lcZ(11,11,n.checkboxes.controls))("ngForTrackBy",n.key))},dependencies:[P.sg,P.O5,a.Wl,a.JJ,a.JL,a.oH,a.sg,a.u,P.Nd,W.C],encapsulation:2});var ne,te,ie=function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(n){s(n)}}function a(e){try{c(i.throw(e))}catch(n){s(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}))};function oe(e,n){if(1&e&&(T.TgZ(0,"span",14),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.params.name)}}function se(e,n){1&e&&(T.TgZ(0,"span",15),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"revoked")))}function re(e,n){1&e&&(T.ynx(0),T._uU(1,"\n        "),T._UZ(2,"i",16),T.ALo(3,"i18n"),T._uU(4,"\n        "),T.TgZ(5,"span",17),T._uU(6),T.ALo(7,"i18n"),T.qZA(),T._uU(8,"\n      "),T.BQk()),2&e&&(T.xp6(2),T.s9C("title",T.lcZ(3,2,"loading")),T.xp6(4),T.Oqu(T.lcZ(7,4,"loading")))}function ae(e,n){if(1&e&&(T.ynx(0),T._uU(1,"\n            "),T.TgZ(2,"p"),T._uU(3),T.ALo(4,"i18n"),T.qZA(),T._uU(5,"\n            "),T.TgZ(6,"bit-form-field"),T._uU(7,"\n              "),T.TgZ(8,"bit-label"),T._uU(9),T.ALo(10,"i18n"),T.qZA(),T._uU(11,"\n              "),T._UZ(12,"input",43),T._uU(13,"\n              "),T.TgZ(14,"bit-hint"),T._uU(15),T.ALo(16,"i18n"),T.qZA(),T._uU(17,"\n            "),T.qZA(),T._uU(18,"\n          "),T.BQk()),2&e){const e=T.oxw(2);T.xp6(3),T.Oqu(T.lcZ(4,3,"inviteUserDesc")),T.xp6(6),T.Oqu(T.lcZ(10,5,"email")),T.xp6(6),T.Oqu(T.xi3(16,7,"inviteMultipleEmailDesc",e.organization.planProductType===e.ProductType.TeamsStarter?"10":"20"))}}function ce(e,n){1&e&&(T.ynx(0),T._uU(1,"\n                  "),T.TgZ(2,"div",27),T._uU(3),T.ALo(4,"i18n"),T.TgZ(5,"a",44),T._uU(6),T.ALo(7,"i18n"),T.qZA(),T._uU(8),T.ALo(9,"i18n"),T.qZA(),T._uU(10,"\n                "),T.BQk()),2&e&&(T.xp6(3),T.hij("\n                    ",T.lcZ(4,3,"customDescNonEnterpriseStart"),""),T.xp6(3),T.Oqu(T.lcZ(7,5,"customDescNonEnterpriseLink")),T.xp6(2),T.hij("",T.lcZ(9,7,"customDescNonEnterpriseEnd"),"\n                  "))}function ue(e,n){1&e&&(T._uU(0,"\n                  "),T.TgZ(1,"div",27),T._uU(2),T.ALo(3,"i18n"),T.qZA(),T._uU(4,"\n                ")),2&e&&(T.xp6(2),T.hij("\n                    ",T.lcZ(3,1,"customDesc"),"\n                  "))}function le(e,n){if(1&e){const e=T.EpF();T.ynx(0),T._uU(1,"\n              "),T.TgZ(2,"h3",46),T._uU(3),T.ALo(4,"i18n"),T.qZA(),T._uU(5,"\n              "),T.TgZ(6,"div",47),T._uU(7,"\n                "),T.TgZ(8,"div",48),T._uU(9,"\n                  "),T.TgZ(10,"div",49),T._uU(11,"\n                    "),T.TgZ(12,"label",50),T._uU(13),T.ALo(14,"i18n"),T.qZA(),T._uU(15,"\n                    "),T._UZ(16,"hr",51),T._uU(17,"\n                    "),T.TgZ(18,"app-nested-checkbox",52),T._uU(19,"\n                    "),T.qZA(),T._uU(20,"\n                  "),T.qZA(),T._uU(21,"\n                "),T.qZA(),T._uU(22,"\n                "),T.TgZ(23,"div",48),T._uU(24,"\n                  "),T.TgZ(25,"div",49),T._uU(26,"\n                    "),T.TgZ(27,"label",50),T._uU(28),T.ALo(29,"i18n"),T.qZA(),T._uU(30,"\n                    "),T._UZ(31,"hr",51),T._uU(32,"\n                    "),T.TgZ(33,"div"),T._uU(34,"\n                      "),T._UZ(35,"input",53),T._uU(36,"\n                      "),T.TgZ(37,"label",54),T._uU(38),T.ALo(39,"i18n"),T.qZA(),T._uU(40,"\n                    "),T.qZA(),T._uU(41,"\n                    "),T.TgZ(42,"div"),T._uU(43,"\n                      "),T._UZ(44,"input",55),T._uU(45,"\n                      "),T.TgZ(46,"label",56),T._uU(47),T.ALo(48,"i18n"),T.qZA(),T._uU(49,"\n                    "),T.qZA(),T._uU(50,"\n                    "),T.TgZ(51,"div"),T._uU(52,"\n                      "),T._UZ(53,"input",57),T._uU(54,"\n                      "),T.TgZ(55,"label",58),T._uU(56),T.ALo(57,"i18n"),T.qZA(),T._uU(58,"\n                    "),T.qZA(),T._uU(59,"\n                    "),T.TgZ(60,"app-nested-checkbox",59),T._uU(61,"\n                    "),T.qZA(),T._uU(62,"\n                    "),T.TgZ(63,"div"),T._uU(64,"\n                      "),T._UZ(65,"input",60),T._uU(66,"\n                      "),T.TgZ(67,"label",61),T._uU(68),T.ALo(69,"i18n"),T.qZA(),T._uU(70,"\n                    "),T.qZA(),T._uU(71,"\n                    "),T.TgZ(72,"div"),T._uU(73,"\n                      "),T._UZ(74,"input",62),T._uU(75,"\n                      "),T.TgZ(76,"label",63),T._uU(77),T.ALo(78,"i18n"),T.qZA(),T._uU(79,"\n                    "),T.qZA(),T._uU(80,"\n                    "),T.TgZ(81,"div"),T._uU(82,"\n                      "),T._UZ(83,"input",64),T._uU(84,"\n                      "),T.TgZ(85,"label",65),T._uU(86),T.ALo(87,"i18n"),T.qZA(),T._uU(88,"\n                    "),T.qZA(),T._uU(89,"\n                    "),T.TgZ(90,"div"),T._uU(91,"\n                      "),T.TgZ(92,"input",66),T.NdJ("change",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.handleDependentPermissions())})),T.qZA(),T._uU(93,"\n                      "),T.TgZ(94,"label",67),T._uU(95),T.ALo(96,"i18n"),T.qZA(),T._uU(97,"\n                    "),T.qZA(),T._uU(98,"\n                    "),T.TgZ(99,"div"),T._uU(100,"\n                      "),T.TgZ(101,"input",68),T.NdJ("change",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.handleDependentPermissions())})),T.qZA(),T._uU(102,"\n                      "),T.TgZ(103,"label",69),T._uU(104),T.ALo(105,"i18n"),T.qZA(),T._uU(106,"\n                    "),T.qZA(),T._uU(107,"\n                  "),T.qZA(),T._uU(108,"\n                "),T.qZA(),T._uU(109,"\n              "),T.qZA(),T._uU(110,"\n            "),T.BQk()}if(2&e){const e=T.oxw(3);T.xp6(3),T.hij("\n                ",T.lcZ(4,14,"permissions"),"\n              "),T.xp6(3),T.Q6J("formGroup",e.permissionsGroup),T.xp6(7),T.Oqu(T.lcZ(14,16,"managerPermissions")),T.xp6(5),T.Q6J("checkboxes",e.permissionsGroup.controls.manageAssignedCollectionsGroup),T.xp6(10),T.Oqu(T.lcZ(29,18,"adminPermissions")),T.xp6(10),T.hij("\n                        ",T.lcZ(39,20,"accessEventLogs"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(48,22,"accessImportExport"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(57,24,"accessReports"),"\n                      "),T.xp6(4),T.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),T.xp6(8),T.hij("\n                        ",T.lcZ(69,26,"manageGroups"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(78,28,"manageSso"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(87,30,"managePolicies"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(96,32,"manageUsers"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(105,34,"manageAccountRecovery"),"\n                      ")}}function de(e,n){if(1&e){const e=T.EpF();T._uU(0,"\n              "),T.TgZ(1,"div",47),T._uU(2,"\n                "),T.TgZ(3,"div",70),T._uU(4,"\n                  "),T.TgZ(5,"div"),T._uU(6,"\n                    "),T._UZ(7,"input",53),T._uU(8,"\n                    "),T.TgZ(9,"label",54),T._uU(10),T.ALo(11,"i18n"),T.qZA(),T._uU(12,"\n                  "),T.qZA(),T._uU(13,"\n                  "),T.TgZ(14,"div"),T._uU(15,"\n                    "),T._UZ(16,"input",55),T._uU(17,"\n                    "),T.TgZ(18,"label",56),T._uU(19),T.ALo(20,"i18n"),T.qZA(),T._uU(21,"\n                  "),T.qZA(),T._uU(22,"\n                  "),T.TgZ(23,"div"),T._uU(24,"\n                    "),T._UZ(25,"input",57),T._uU(26,"\n                    "),T.TgZ(27,"label",58),T._uU(28),T.ALo(29,"i18n"),T.qZA(),T._uU(30,"\n                  "),T.qZA(),T._uU(31,"\n                "),T.qZA(),T._uU(32,"\n                "),T.TgZ(33,"div",70),T._uU(34,"\n                  "),T.TgZ(35,"app-nested-checkbox",59),T._uU(36,"\n                  "),T.qZA(),T._uU(37,"\n                "),T.qZA(),T._uU(38,"\n                "),T.TgZ(39,"div",70),T._uU(40,"\n                  "),T.TgZ(41,"div",49),T._uU(42,"\n                    "),T.TgZ(43,"div"),T._uU(44,"\n                      "),T._UZ(45,"input",60),T._uU(46,"\n                      "),T.TgZ(47,"label",61),T._uU(48),T.ALo(49,"i18n"),T.qZA(),T._uU(50,"\n                    "),T.qZA(),T._uU(51,"\n                    "),T.TgZ(52,"div"),T._uU(53,"\n                      "),T._UZ(54,"input",62),T._uU(55,"\n                      "),T.TgZ(56,"label",63),T._uU(57),T.ALo(58,"i18n"),T.qZA(),T._uU(59,"\n                    "),T.qZA(),T._uU(60,"\n                    "),T.TgZ(61,"div"),T._uU(62,"\n                      "),T._UZ(63,"input",64),T._uU(64,"\n                      "),T.TgZ(65,"label",65),T._uU(66),T.ALo(67,"i18n"),T.qZA(),T._uU(68,"\n                    "),T.qZA(),T._uU(69,"\n                    "),T.TgZ(70,"div"),T._uU(71,"\n                      "),T.TgZ(72,"input",66),T.NdJ("change",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.handleDependentPermissions())})),T.qZA(),T._uU(73,"\n                      "),T.TgZ(74,"label",67),T._uU(75),T.ALo(76,"i18n"),T.qZA(),T._uU(77,"\n                    "),T.qZA(),T._uU(78,"\n                    "),T.TgZ(79,"div"),T._uU(80,"\n                      "),T.TgZ(81,"input",68),T.NdJ("change",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.handleDependentPermissions())})),T.qZA(),T._uU(82,"\n                      "),T.TgZ(83,"label",69),T._uU(84),T.ALo(85,"i18n"),T.qZA(),T._uU(86,"\n                    "),T.qZA(),T._uU(87,"\n                  "),T.qZA(),T._uU(88,"\n                "),T.qZA(),T._uU(89,"\n              "),T.qZA(),T._uU(90,"\n            ")}if(2&e){const e=T.oxw(3);T.xp6(1),T.Q6J("formGroup",e.permissionsGroup),T.xp6(9),T.hij("\n                      ",T.lcZ(11,10,"accessEventLogs"),"\n                    "),T.xp6(9),T.hij("\n                      ",T.lcZ(20,12,"accessImportExport"),"\n                    "),T.xp6(9),T.hij("\n                      ",T.lcZ(29,14,"accessReports"),"\n                    "),T.xp6(7),T.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),T.xp6(13),T.hij("\n                        ",T.lcZ(49,16,"manageGroups"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(58,18,"manageSso"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(67,20,"managePolicies"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(76,22,"manageUsers"),"\n                      "),T.xp6(9),T.hij("\n                        ",T.lcZ(85,24,"manageAccountRecovery"),"\n                      ")}}function pe(e,n){if(1&e&&(T.ynx(0),T._uU(1,"\n            "),T.YNc(2,le,111,36,"ng-container",37),T.ALo(3,"async"),T._uU(4,"\n            "),T.YNc(5,de,91,26,"ng-template",null,45,T.W1O),T._uU(7,"\n          "),T.BQk()),2&e){const e=T.MAs(6),n=T.oxw(2);T.xp6(2),T.Q6J("ngIf",!T.lcZ(3,2,n.flexibleCollectionsEnabled$))("ngIfElse",e)}}function ge(e,n){1&e&&(T.ynx(0),T._uU(1,"\n            "),T.TgZ(2,"h3",71),T._uU(3),T.ALo(4,"i18n"),T.TgZ(5,"a",72),T.ALo(6,"i18n"),T._uU(7,"\n                "),T._UZ(8,"i",23),T._uU(9,"\n              "),T.qZA(),T._uU(10,"\n            "),T.qZA(),T._uU(11,"\n            "),T.TgZ(12,"p",73),T._uU(13),T.ALo(14,"i18n"),T.qZA(),T._uU(15,"\n            "),T.TgZ(16,"bit-form-control"),T._uU(17,"\n              "),T._UZ(18,"input",74),T._uU(19,"\n              "),T.TgZ(20,"bit-label"),T._uU(21),T.ALo(22,"i18n"),T.qZA(),T._uU(23,"\n            "),T.qZA(),T._uU(24,"\n          "),T.BQk()),2&e&&(T.xp6(3),T.hij("\n              ",T.lcZ(4,4,"secretsManager"),"\n              "),T.xp6(2),T.s9C("appA11yTitle",T.lcZ(6,6,"learnMore")),T.xp6(8),T.Oqu(T.lcZ(14,8,"secretsManagerAccessDescription")),T.xp6(8),T.hij("\n                ",T.lcZ(22,10,"userAccessSecretsManagerGA"),"\n              "))}function me(e,n){if(1&e&&(T.TgZ(0,"bit-tab",19),T.ALo(1,"i18n"),T._uU(2,"\n          "),T.TgZ(3,"div",75),T._uU(4),T.ALo(5,"i18n"),T.qZA(),T._uU(6,"\n          "),T._UZ(7,"bit-access-selector",76),T.ALo(8,"i18n"),T.ALo(9,"i18n"),T.ALo(10,"i18n"),T.ALo(11,"async"),T._uU(12,"\n        "),T.qZA()),2&e){const e=T.oxw(2);T.Q6J("label",T.lcZ(1,7,"groups")),T.xp6(4),T.hij("\n            ",T.lcZ(5,9,"groupAccessUserDesc"),"\n          "),T.xp6(3),T.Q6J("items",e.groupAccessItems)("columnHeader",T.lcZ(8,11,"groups"))("selectorLabelText",T.lcZ(9,13,"selectGroups"))("emptySelectionText",T.lcZ(10,15,"noGroupsAdded"))("flexibleCollectionsEnabled",T.lcZ(11,17,e.flexibleCollectionsEnabled$))}}function he(e,n){1&e&&(T.TgZ(0,"div",75),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.hij("\n            ",T.lcZ(2,1,"userPermissionOverrideHelper"),"\n          "))}function Ue(e,n){1&e&&(T.TgZ(0,"div",75),T._uU(1,"\n            "),T.TgZ(2,"bit-form-control"),T._uU(3,"\n              "),T._UZ(4,"input",77),T._uU(5,"\n              "),T.TgZ(6,"bit-label"),T._uU(7),T.ALo(8,"i18n"),T.TgZ(9,"a",78),T.ALo(10,"i18n"),T._uU(11,"\n                  "),T._UZ(12,"i",23),T._uU(13,"\n                "),T.qZA(),T._uU(14,"\n              "),T.qZA(),T._uU(15,"\n              "),T.TgZ(16,"bit-hint"),T._uU(17),T.ALo(18,"i18n"),T.qZA(),T._uU(19,"\n            "),T.qZA(),T._uU(20,"\n          "),T.qZA()),2&e&&(T.xp6(7),T.hij("\n                ",T.lcZ(8,3,"accessAllCollectionsDesc"),"\n                "),T.xp6(2),T.s9C("appA11yTitle",T.lcZ(10,5,"learnMore")),T.xp6(8),T.Oqu(T.lcZ(18,7,"accessAllCollectionsHelp")))}function fe(e,n){if(1&e&&(T._UZ(0,"bit-access-selector",79),T.ALo(1,"i18n"),T.ALo(2,"i18n"),T.ALo(3,"i18n"),T.ALo(4,"async")),2&e){const e=T.oxw(2);T.Q6J("permissionMode",e.PermissionMode.Edit)("showGroupColumn",e.organization.useGroups)("items",e.collectionAccessItems)("columnHeader",T.lcZ(1,7,"collection"))("selectorLabelText",T.lcZ(2,9,"selectCollections"))("emptySelectionText",T.lcZ(3,11,"noCollectionsAdded"))("flexibleCollectionsEnabled",T.lcZ(4,13,e.flexibleCollectionsEnabled$))}}function Ze(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"bit-tab-group",18),T.NdJ("selectedIndexChange",(function(n){T.CHM(e);const t=T.oxw();return T.KtG(t.tabIndex=n)})),T._uU(1,"\n        "),T.TgZ(2,"bit-tab",19),T.ALo(3,"i18n"),T._uU(4,"\n          "),T.YNc(5,ae,19,10,"ng-container",6),T._uU(6,"\n          "),T.TgZ(7,"fieldset",20),T._uU(8,"\n            "),T.TgZ(9,"legend",21),T._uU(10),T.ALo(11,"i18n"),T.TgZ(12,"a",22),T.ALo(13,"i18n"),T._uU(14,"\n                "),T._UZ(15,"i",23),T._uU(16,"\n              "),T.qZA(),T._uU(17,"\n            "),T.qZA(),T._uU(18,"\n            "),T.TgZ(19,"div",24),T._uU(20,"\n              "),T._UZ(21,"input",25),T._uU(22,"\n              "),T.TgZ(23,"label",26),T._uU(24),T.ALo(25,"i18n"),T.TgZ(26,"div",27),T._uU(27),T.ALo(28,"i18n"),T.qZA(),T._uU(29,"\n              "),T.qZA(),T._uU(30,"\n            "),T.qZA(),T._uU(31,"\n            "),T.TgZ(32,"div",24),T._uU(33,"\n              "),T._UZ(34,"input",28),T._uU(35,"\n              "),T.TgZ(36,"label",29),T._uU(37),T.ALo(38,"i18n"),T.TgZ(39,"div",27),T._uU(40),T.ALo(41,"i18n"),T.qZA(),T._uU(42,"\n              "),T.qZA(),T._uU(43,"\n            "),T.qZA(),T._uU(44,"\n            "),T.TgZ(45,"div",24),T._uU(46,"\n              "),T._UZ(47,"input",30),T._uU(48,"\n              "),T.TgZ(49,"label",31),T._uU(50),T.ALo(51,"i18n"),T.TgZ(52,"div",27),T._uU(53),T.ALo(54,"i18n"),T.qZA(),T._uU(55,"\n              "),T.qZA(),T._uU(56,"\n            "),T.qZA(),T._uU(57,"\n            "),T.TgZ(58,"div",24),T._uU(59,"\n              "),T._UZ(60,"input",32),T._uU(61,"\n              "),T.TgZ(62,"label",33),T._uU(63),T.ALo(64,"i18n"),T.TgZ(65,"div",27),T._uU(66),T.ALo(67,"i18n"),T.qZA(),T._uU(68,"\n              "),T.qZA(),T._uU(69,"\n            "),T.qZA(),T._uU(70,"\n            "),T.TgZ(71,"div",34),T._uU(72,"\n              "),T._UZ(73,"input",35),T._uU(74,"\n              "),T.TgZ(75,"label",36),T._uU(76),T.ALo(77,"i18n"),T.YNc(78,ce,11,9,"ng-container",37),T._uU(79,"\n                "),T.YNc(80,ue,5,3,"ng-template",null,38,T.W1O),T._uU(82,"\n              "),T.qZA(),T._uU(83,"\n            "),T.qZA(),T._uU(84,"\n          "),T.qZA(),T._uU(85,"\n          "),T.YNc(86,pe,8,4,"ng-container",6),T._uU(87,"\n          "),T.YNc(88,ge,25,12,"ng-container",6),T._uU(89,"\n          "),T.TgZ(90,"bit-form-field"),T._uU(91,"\n            "),T.TgZ(92,"bit-label"),T._uU(93),T.ALo(94,"i18n"),T.qZA(),T._uU(95,"\n            "),T._UZ(96,"input",39),T._uU(97,"\n            "),T.TgZ(98,"bit-hint"),T._uU(99),T.ALo(100,"i18n"),T.qZA(),T._uU(101,"\n          "),T.qZA(),T._uU(102,"\n        "),T.qZA(),T._uU(103,"\n        "),T.YNc(104,me,13,19,"bit-tab",40),T._uU(105,"\n        "),T.TgZ(106,"bit-tab",19),T.ALo(107,"i18n"),T._uU(108,"\n          "),T.YNc(109,he,3,3,"div",41),T._uU(110,"\n          "),T.YNc(111,Ue,21,9,"div",41),T.ALo(112,"async"),T._uU(113,"\n          "),T.YNc(114,fe,5,15,"bit-access-selector",42),T.qZA(),T._uU(115,"\n      "),T.qZA()}if(2&e){const e=T.MAs(81),n=T.oxw();T.Q6J("selectedIndex",n.tabIndex),T.xp6(2),T.Q6J("label",T.lcZ(3,31,"role")),T.xp6(3),T.Q6J("ngIf",!n.editMode),T.xp6(5),T.hij("\n              ",T.lcZ(11,33,"memberRole"),"\n              "),T.xp6(2),T.s9C("appA11yTitle",T.lcZ(13,35,"learnMore")),T.xp6(9),T.Q6J("value",n.organizationUserType.User),T.xp6(3),T.hij("\n                ",T.lcZ(25,37,"user"),"\n                "),T.xp6(3),T.hij("\n                  ",T.lcZ(28,39,"userDesc"),"\n                "),T.xp6(7),T.Q6J("value",n.organizationUserType.Manager),T.xp6(3),T.hij("\n                ",T.lcZ(38,41,"manager"),"\n                "),T.xp6(3),T.hij("\n                  ",T.lcZ(41,43,"managerDesc"),"\n                "),T.xp6(7),T.Q6J("value",n.organizationUserType.Admin),T.xp6(3),T.hij("\n                ",T.lcZ(51,45,"admin"),"\n                "),T.xp6(3),T.hij("\n                  ",T.lcZ(54,47,"adminDesc"),"\n                "),T.xp6(7),T.Q6J("value",n.organizationUserType.Owner),T.xp6(3),T.hij("\n                ",T.lcZ(64,49,"owner"),"\n                "),T.xp6(3),T.hij("\n                  ",T.lcZ(67,51,"ownerDesc"),"\n                "),T.xp6(7),T.Q6J("value",n.organizationUserType.Custom),T.uIk("disabled",!n.canUseCustomPermissions||null),T.xp6(3),T.hij("\n                ",T.lcZ(77,53,"custom"),"\n                "),T.xp6(2),T.Q6J("ngIf",!n.canUseCustomPermissions)("ngIfElse",e),T.xp6(8),T.Q6J("ngIf",n.customUserTypeSelected),T.xp6(2),T.Q6J("ngIf",n.canUseSecretsManager),T.xp6(5),T.Oqu(T.lcZ(94,55,"externalId")),T.xp6(6),T.Oqu(T.lcZ(100,57,"externalIdDesc")),T.xp6(5),T.Q6J("ngIf",n.organization.useGroups),T.xp6(2),T.Q6J("label",T.lcZ(107,59,"collections")),T.xp6(3),T.Q6J("ngIf",n.organization.useGroups),T.xp6(2),T.Q6J("ngIf",!T.lcZ(112,61,n.flexibleCollectionsEnabled$)),T.xp6(3),T.Q6J("ngIf",!n.accessAllCollections)}}function _e(e,n){if(1&e&&(T.TgZ(0,"button",80),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e){const e=T.oxw();T.Q6J("bitAction",e.restore)("disabled",e.loading),T.xp6(1),T.hij("\n          ",T.lcZ(2,3,"restoreAccess"),"\n        ")}}function be(e,n){if(1&e&&(T.TgZ(0,"button",80),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e){const e=T.oxw();T.Q6J("bitAction",e.revoke)("disabled",e.loading),T.xp6(1),T.hij("\n          ",T.lcZ(2,3,"revokeAccess"),"\n        ")}}function ve(e,n){if(1&e&&(T._UZ(0,"button",81),T.ALo(1,"i18n")),2&e){const e=T.oxw();T.Q6J("appA11yTitle",T.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(ne||(ne={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}(te||(te={}));class we{get customUserTypeSelected(){return this.formGroup.value.type===h.je.Custom}get accessAllCollections(){return this.formGroup.value.accessAllCollections}constructor(e,n,t,i,o,s,r,a,u,l,d,p){this.params=e,this.dialogRef=n,this.i18nService=t,this.platformUtilsService=i,this.organizationService=o,this.formBuilder=s,this.collectionAdminService=r,this.groupService=a,this.userService=u,this.organizationUserService=l,this.dialogService=d,this.configService=p,this.flexibleCollectionsEnabled$=this.configService.getFeatureFlag$(Z.T.FlexibleCollections,!1),this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=h.je,this.PermissionMode=w.R9,this.showNoMasterPasswordWarning=!1,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:["",{updateOn:"blur"}],type:h.je.User,externalId:this.formBuilder.control({value:"",disabled:!0}),accessAllCollections:!1,accessSecretsManager:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAssignedCollectionsGroup:this.formBuilder.group({manageAssignedCollections:!1,editAssignedCollections:!1,deleteAssignedCollections:!1}),manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new c.x,this.submit=()=>ie(this,void 0,void 0,(function*(){var e;if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex!==ne.Role&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("role"))));if(!this.canUseCustomPermissions&&this.customUserTypeSelected)return void this.platformUtilsService.showToast("error",null,this.i18nService.t("customNonEnterpriseError"));const n=new v.Qg;if(n.id=this.params.organizationUserId,n.organizationId=this.params.organizationId,n.accessAll=this.accessAllCollections,n.type=this.formGroup.value.type,n.permissions=this.setRequestPermissions(null!==(e=n.permissions)&&void 0!==e?e:new U.Q,n.type!==h.je.Custom),n.collections=this.formGroup.value.access.filter((e=>e.type===w.zD.Collection)).map(w.E2),n.groups=this.formGroup.value.groups.map((e=>e.id)),n.accessSecretsManager=this.formGroup.value.accessSecretsManager,this.editMode)yield this.userService.save(n);else{n.id=this.params.organizationUserId;const e=this.organization.planProductType===f.kv.TeamsStarter?10:20,t=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];if(t.length>e)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("tooManyEmails",e)}});if(this.organization.hasReseller&&this.params.numConfirmedMembers+t.length>this.organization.seats)return void this.formGroup.controls.emails.setErrors({tooManyEmails:{message:this.i18nService.t("seatLimitReachedContactYourProvider")}});yield this.userService.invite(t,n)}this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.params.name)),this.close(te.Saved)})),this.delete=()=>ie(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";let n=yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.params.name]},content:{key:e},type:"warning"});return!!n&&(!(this.showNoMasterPasswordWarning&&(n=yield this.noMasterPasswordConfirmationDialog(),!n))&&(yield this.organizationUserService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.params.name)),void this.close(te.Deleted)))})),this.revoke=()=>ie(this,void 0,void 0,(function*(){if(!this.editMode)return;let e=yield this.dialogService.openSimpleDialog({title:{key:"revokeUserId",placeholders:[this.params.name]},content:{key:"revokeUserConfirmation"},acceptButtonText:{key:"revokeAccess"},type:"warning"});return!!e&&(!(this.showNoMasterPasswordWarning&&(e=yield this.noMasterPasswordConfirmationDialog(),!e))&&(yield this.organizationUserService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.params.name)),this.isRevoked=!0,void this.close(te.Revoked)))})),this.restore=()=>ie(this,void 0,void 0,(function*(){this.editMode&&(yield this.organizationUserService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.params.name)),this.isRevoked=!1,this.close(te.Restored))})),this.ProductType=f.kv}ngOnInit(){var e;return ie(this,void 0,void 0,(function*(){this.editMode=null!=this.params.organizationUserId,this.tabIndex=null!==(e=this.params.initialTab)&&void 0!==e?e:ne.Role,this.title=this.i18nService.t(this.editMode?"editMember":"inviteMember");const n=(0,u.of)(this.organizationService.get(this.params.organizationId)).pipe((0,l.d)({refCount:!0,bufferSize:1})),t=n.pipe((0,d.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,u.of)([]))));(0,p.a)({organization:n,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:this.params.organizationUserId?this.userService.get(this.params.organizationId,this.params.organizationUserId):(0,u.of)(null),groups:t}).pipe((0,g.R)(this.destroy$)).subscribe((({organization:e,collections:n,userDetails:t,groups:i})=>{this.organization=e,this.canUseCustomPermissions=e.useCustomPermissions,this.canUseSecretsManager=e.useSecretsManager&&(0,_.Sp)("secretsManager");const o=[a.kI.required,A,x(this.organization,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionFreePlan",e.seats)),y(this.organization,this.params.allOrganizationUserEmails,this.i18nService.t("subscriptionFamiliesPlan",e.seats))],s=this.formGroup.get("emails");if(s.setValidators(o),s.updateValueAndValidity(),this.collectionAccessItems=[].concat(n.map((e=>Ae(e)))),this.groupAccessItems=[].concat(i.map((e=>{return n=e,{type:w.zD.Group,id:n.id,labelName:n.name,listName:n.name};var n}))),this.params.organizationUserId){if(!t)throw new Error("Could not find user to edit.");this.isRevoked=t.status===h.Dn.Revoked,this.showNoMasterPasswordWarning=t.status>h.Dn.Invited&&!1===t.hasMasterPassword;const e={editAssignedCollections:t.permissions.editAssignedCollections,deleteAssignedCollections:t.permissions.deleteAssignedCollections,manageAssignedCollections:t.permissions.editAssignedCollections&&t.permissions.deleteAssignedCollections},o={createNewCollections:t.permissions.createNewCollections,editAnyCollection:t.permissions.editAnyCollection,deleteAnyCollection:t.permissions.deleteAnyCollection,manageAllCollections:t.permissions.createNewCollections&&t.permissions.editAnyCollection&&t.permissions.deleteAnyCollection};t.type===h.je.Custom&&this.permissionsGroup.patchValue({accessEventLogs:t.permissions.accessEventLogs,accessImportExport:t.permissions.accessImportExport,accessReports:t.permissions.accessReports,manageGroups:t.permissions.manageGroups,manageSso:t.permissions.manageSso,managePolicies:t.permissions.managePolicies,manageUsers:t.permissions.manageUsers,manageResetPassword:t.permissions.manageResetPassword,manageAssignedCollectionsGroup:e,manageAllCollectionsGroup:o});const s=i.filter((e=>t.groups.includes(e.id))).flatMap((e=>e.collections.map((t=>{const i=n.find((e=>e.id===t.id));return{group:e,collection:i,accessSelection:t}}))));this.collectionAccessItems=this.collectionAccessItems.concat(s.map((({collection:e,accessSelection:n,group:t})=>Ae(e,n,t))));const r=function(e){if(null==e)return[];return[].concat(e.collections.map((e=>({id:e.id,type:w.zD.Collection,permission:(0,w.d4)(e)}))))}(t),a=function(e){if(null==e)return[];return[].concat(e.map((e=>({id:e,type:w.zD.Group}))))}(t.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:t.type,externalId:t.externalId,accessAllCollections:t.accessAll,access:r,accessSecretsManager:t.accessSecretsManager,groups:a})}this.loading=!1}))}))}check(e,n){e.checked=null==n?!e.checked:n,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((n=>this.check(n,e)))}setRequestPermissions(e,n){if(n)return new U.Q;const t={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,editAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,deleteAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections};return Object.assign(e,t)}handleDependentPermissions(){this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("accountRecoveryManageUsers")))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return ie(this,void 0,void 0,(function*(){this.close(te.Canceled)}))}close(e){this.dialogRef.close(e)}noMasterPasswordConfirmationDialog(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.params.name]},type:"warning"})}}function Ae(e,n,t){return{type:w.zD.Collection,id:t?`${e.id}-${t.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==t,readonlyPermission:n?(0,w.d4)(n):void 0,viaGroupName:null==t?void 0:t.name}}we.ɵfac=function(e){return new(e||we)(T.Y36(r.Kt),T.Y36(r.zj),T.Y36(q.D),T.Y36(C.P),T.Y36(m.Mn),T.Y36(a.qu),T.Y36(b.m),T.Y36(v.lT),T.Y36(v.XD),T.Y36(k.t),T.Y36(S.x),T.Y36(I.i))},we.ɵcmp=T.Xpm({type:we,selectors:[["ng-component"]],decls:40,vars:19,consts:[[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],[1,"tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","badgeType","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["role","radiogroup","aria-labelledby","roleGroupLabel",1,"tw-mb-6"],["id","roleGroupLabel",1,"tw-mb-2","tw-block","tw-text-base","tw-font-semibold","tw-text-main"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"tw-mb-2","tw-flex","tw-items-baseline"],["type","radio","id","userTypeUser","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeUser",1,"tw-m-0"],[1,"text-base","tw-block","tw-font-normal","tw-text-muted"],["type","radio","id","userTypeManager","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeManager",1,"tw-m-0"],["type","radio","id","userTypeAdmin","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeAdmin",1,"tw-m-0"],["type","radio","id","userTypeOwner","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeOwner",1,"tw-m-0"],[1,"tw-flex","tw-items-baseline"],["type","radio","id","userTypeCustom","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeCustom",1,"tw-m-0"],[4,"ngIf","ngIfElse"],["enterprise",""],["bitInput","","type","text","formControlName","externalId"],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled",4,"ngIf"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["href","https://bitwarden.com/contact/","target","_blank"],["customPermissionsFC",""],[1,"mt-4","d-flex","tw-font-semibold"],[1,"row",3,"formGroup"],[1,"col-6"],[1,"mb-3"],[1,"tw-font-semibold"],[1,"tw-mb-2","tw-mr-2","tw-mt-0"],["parentId","manageAssignedCollections",3,"checkboxes"],["type","checkbox","name","accessEventLogs","id","accessEventLogs","formControlName","accessEventLogs"],["for","accessEventLogs",1,"!tw-font-normal"],["type","checkbox","name","accessImportExport","id","accessImportExport","formControlName","accessImportExport"],["for","accessImportExport",1,"!tw-font-normal"],["type","checkbox","name","accessReports","id","accessReports","formControlName","accessReports"],["for","accessReports",1,"!tw-font-normal"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","name","manageGroups","id","manageGroups","formControlName","manageGroups"],["for","manageGroups",1,"!tw-font-normal"],["type","checkbox","name","manageSso","id","manageSso","formControlName","manageSso"],["for","manageSso",1,"!tw-font-normal"],["type","checkbox","name","managePolicies","id","managePolicies","formControlName","managePolicies"],["for","managePolicies",1,"!tw-font-normal"],["type","checkbox","name","manageUsers","id","manageUsers","formControlName","manageUsers",3,"change"],["for","manageUsers",1,"!tw-font-normal"],["type","checkbox","name","manageResetPassword","id","manageResetPassword","formControlName","manageResetPassword",3,"change"],["for","manageResetPassword",1,"!tw-font-normal"],[1,"col-4"],[1,"mt-4"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager",3,"appA11yTitle"],[1,"tw-text-muted"],["type","checkbox","bitCheckbox","","formControlName","accessSecretsManager"],[1,"tw-mb-6"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled"],["type","checkbox","bitCheckbox","","formControlName","accessAllCollections"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText","flexibleCollectionsEnabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled"]],template:function(e,n){1&e&&(T.TgZ(0,"form",0),T._uU(1,"\n  "),T.TgZ(2,"bit-dialog",1),T._uU(3,"\n    "),T.TgZ(4,"span",2),T._uU(5),T.YNc(6,oe,2,1,"span",3),T._uU(7,"\n      "),T.YNc(8,se,3,3,"span",4),T._uU(9,"\n    "),T.qZA(),T._uU(10,"\n    "),T.TgZ(11,"div",5),T._uU(12,"\n      "),T.YNc(13,re,9,6,"ng-container",6),T._uU(14,"\n      "),T.YNc(15,Ze,116,63,"bit-tab-group",7),T._uU(16,"\n    "),T.qZA(),T._uU(17,"\n    "),T.ynx(18,8),T._uU(19,"\n      "),T.TgZ(20,"button",9),T._uU(21),T.ALo(22,"i18n"),T.qZA(),T._uU(23,"\n      "),T.TgZ(24,"button",10),T.NdJ("click",(function(){return n.cancel()})),T._uU(25),T.ALo(26,"i18n"),T.qZA(),T._uU(27,"\n      "),T.TgZ(28,"div",11),T._uU(29,"\n        "),T.YNc(30,_e,3,5,"button",12),T._uU(31,"\n        "),T.YNc(32,be,3,5,"button",12),T._uU(33,"\n        "),T.YNc(34,ve,2,5,"button",13),T._uU(35,"\n      "),T.qZA(),T._uU(36,"\n    "),T.BQk(),T._uU(37,"\n  "),T.qZA(),T._uU(38,"\n"),T.qZA(),T._uU(39,"\n")),2&e&&(T.Q6J("formGroup",n.formGroup)("bitSubmit",n.submit),T.xp6(2),T.Q6J("disablePadding",!n.loading),T.xp6(3),T.hij("\n      ",n.title,"\n      "),T.xp6(1),T.Q6J("ngIf",!n.loading&&n.params.name),T.xp6(2),T.Q6J("ngIf",n.isRevoked),T.xp6(5),T.Q6J("ngIf",n.loading),T.xp6(2),T.Q6J("ngIf",!n.loading),T.xp6(5),T.Q6J("disabled",n.loading),T.xp6(1),T.hij("\n        ",T.lcZ(22,15,"save"),"\n      "),T.xp6(3),T.Q6J("disabled",n.loading),T.xp6(1),T.hij("\n        ",T.lcZ(26,17,"cancel"),"\n      "),T.xp6(5),T.Q6J("ngIf",n.editMode&&n.isRevoked),T.xp6(2),T.Q6J("ngIf",n.editMode&&!n.isRevoked),T.xp6(2),T.Q6J("ngIf",n.editMode))},dependencies:[P.O5,a._Y,a.Fj,a.Wl,a._,a.JJ,a.JL,a.sg,a.u,M.B,N.Q,L.b,z.u,J.l,R.r,Q.b,O.a,G.d,Y.G,j.A,E.u,D.M,B.Q,F.Q,$.i,K.f,ee,P.Ov,W.C],encapsulation:2});var xe=t(20953);class ye{}ye.ɵfac=function(e){return new(e||ye)},ye.ɵmod=T.oAB({type:ye}),ye.ɵinj=T.cJS({imports:[s.P,xe.c]});var Te=t(75557),qe=t(47064),Ce=t(92786),ke=t(59260),Se=t(59157),Ie=t(99042),Pe=t(70032),Me=t(5712),Ne=t(19576),Le=t(77494);class ze{}var Je=t(53988),Re=t(68134),Qe=t(54193),Oe=t(33287),Ge=t(570),Ye=t(72802);class je{constructor(){this.collections=[],this.groups=[],this.groupNames=[],this.collectionNames=[]}static fromResponse(e){const n=Object.assign(new je,e);return null!=e.collections&&(n.collections=e.collections.map((e=>new Ye.K(e)))),null!=e.groups&&(n.groups=e.groups),n}}var Ee=t(68553),De=t(2138),Be=t(14970),Fe=t(18362),$e=t(54735),Ke=t(50941),He=t(26361),We=t(73672),Ve=function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(n){s(n)}}function a(e){try{c(i.throw(e))}catch(n){s(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}))};function Xe(e,n){if(1&e&&(T.TgZ(0,"div",16),T._uU(1),T.qZA()),2&e){const e=T.oxw().$implicit;T.xp6(1),T.hij("\n                  ",e.email,"\n                ")}}function en(e,n){if(1&e&&(T.TgZ(0,"tr",11),T._uU(1,"\n          "),T.TgZ(2,"td",5),T._uU(3,"\n            "),T.TgZ(4,"div",12),T._uU(5,"\n              "),T._UZ(6,"bit-avatar",13),T.ALo(7,"userName"),T._uU(8,"\n              "),T.TgZ(9,"div",14),T._uU(10,"\n                "),T.TgZ(11,"div"),T._uU(12),T.ALo(13,"userName"),T.qZA(),T._uU(14,"\n                "),T.YNc(15,Xe,2,1,"div",15),T._uU(16,"\n              "),T.qZA(),T._uU(17,"\n            "),T.qZA(),T._uU(18,"\n          "),T.qZA(),T._uU(19,"\n          "),T.TgZ(20,"td",5),T._uU(21),T.ALo(22,"userType"),T.qZA(),T._uU(23,"\n        "),T.qZA()),2&e){const e=n.$implicit;T.xp6(6),T.Q6J("text",T.lcZ(7,6,e))("id",e.userId)("color",e.avatarColor),T.xp6(6),T.hij("\n                  ",T.lcZ(13,8,e),"\n                "),T.xp6(3),T.Q6J("ngIf",e.name),T.xp6(6),T.Oqu(T.lcZ(22,10,e.type))}}function nn(e,n){if(1&e&&(T._uU(0,"\n        "),T.YNc(1,en,24,12,"tr",10),T.ALo(2,"async"),T._uU(3,"\n      ")),2&e){const e=n.$implicit;T.xp6(1),T.Q6J("ngForOf",T.lcZ(2,1,e))}}class tn{constructor(e,n,t,i,o){this.dialogRef=e,this.data=n,this.organizationUserService=t,this.platformUtilsService=i,this.i18nService=o,this.dataSource=new De.G,this.submit=()=>Ve(this,void 0,void 0,(function*(){yield this.organizationUserService.putOrganizationUserBulkEnableSecretsManager(this.data.orgId,this.dataSource.data.map((e=>e.id))),this.platformUtilsService.showToast("success",null,this.i18nService.t("activatedAccessToSecretsManager")),this.dialogRef.close()}))}ngOnInit(){this.dataSource.data=this.data.users}static open(e,n){return e.open(tn,{data:n})}}tn.ɵfac=function(e){return new(e||tn)(T.Y36(r.zj),T.Y36(r.Kt),T.Y36(k.t),T.Y36(C.P),T.Y36(q.D))},tn.ɵcmp=T.Xpm({type:tn,selectors:[["ng-component"]],decls:44,vars:20,consts:[["dialogSize","large"],["bitDialogTitle",""],["bitDialogContent",""],[3,"dataSource"],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["class","tw-text-sm tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-text-muted"]],template:function(e,n){1&e&&(T.TgZ(0,"bit-dialog",0),T._uU(1,"\n  "),T.TgZ(2,"span",1),T._uU(3),T.ALo(4,"i18n"),T.qZA(),T._uU(5,"\n  "),T.TgZ(6,"span",2),T._uU(7,"\n    "),T.TgZ(8,"p"),T._uU(9),T.ALo(10,"i18n"),T.qZA(),T._uU(11,"\n    "),T.TgZ(12,"bit-table",3),T._uU(13,"\n      "),T.ynx(14,4),T._uU(15,"\n        "),T.TgZ(16,"tr"),T._uU(17,"\n          "),T.TgZ(18,"th",5),T._uU(19),T.ALo(20,"i18n"),T.qZA(),T._uU(21,"\n          "),T.TgZ(22,"th",5),T._uU(23),T.ALo(24,"i18n"),T.qZA(),T._uU(25,"\n        "),T.qZA(),T._uU(26,"\n      "),T.BQk(),T._uU(27,"\n      "),T.YNc(28,nn,4,3,"ng-template",6),T._uU(29,"\n    "),T.qZA(),T._uU(30,"\n  "),T.qZA(),T._uU(31,"\n  "),T.ynx(32,7),T._uU(33,"\n    "),T.TgZ(34,"button",8),T._uU(35),T.ALo(36,"i18n"),T.qZA(),T._uU(37,"\n    "),T.TgZ(38,"button",9),T._uU(39),T.ALo(40,"i18n"),T.qZA(),T._uU(41,"\n  "),T.BQk(),T._uU(42,"\n"),T.qZA(),T._uU(43,"\n")),2&e&&(T.xp6(3),T.Oqu(T.lcZ(4,8,"activateSecretsManager")),T.xp6(6),T.Oqu(T.lcZ(10,10,"bulkEnableSecretsManagerDescription")),T.xp6(3),T.Q6J("dataSource",n.dataSource),T.xp6(7),T.Oqu(T.lcZ(20,12,"member")),T.xp6(4),T.Oqu(T.lcZ(24,14,"role")),T.xp6(11),T.Q6J("bitAction",n.submit),T.xp6(1),T.hij("\n      ",T.lcZ(36,16,"activateAccess"),"\n    "),T.xp6(4),T.hij("\n      ",T.lcZ(40,18,"close"),"\n    "))},dependencies:[P.sg,P.O5,N.Q,Be.A,R.r,O.a,Fe.f,$e.a,Ke.Y,He.v,$e.f,P.Ov,W.C,Ne.z,We.t],encapsulation:2});var on=t(20172),sn=t(24083),rn=function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(n){s(n)}}function a(e){try{c(i.throw(e))}catch(n){s(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}))};function an(e,n){1&e&&(T.TgZ(0,"bit-callout",7),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.hij("\n      ",T.lcZ(2,1,"noSelectedUsersApplicable"),"\n    "))}function cn(e,n){if(1&e&&(T.TgZ(0,"bit-callout",7),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.hij("\n      ",e.error,"\n    ")}}function un(e,n){1&e&&(T.TgZ(0,"p"),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.hij("\n          ",T.lcZ(2,1,"removeMembersWithoutMasterPasswordWarning"),"\n        "))}function ln(e,n){if(1&e&&(T.TgZ(0,"bit-callout",13),T._uU(1,"\n        "),T.TgZ(2,"p"),T._uU(3),T.ALo(4,"i18n"),T.qZA(),T._uU(5,"\n        "),T.YNc(6,un,3,3,"p",3),T._uU(7,"\n      "),T.qZA()),2&e){const e=T.oxw(2);T.xp6(3),T.Oqu(T.lcZ(4,2,"revokeUsersWarning")),T.xp6(3),T.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function dn(e,n){1&e&&(T.TgZ(0,"th",14),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"details")))}function pn(e,n){if(1&e&&(T.TgZ(0,"small",20),T._uU(1),T.qZA()),2&e){const e=T.oxw().$implicit;T.xp6(1),T.Oqu(e.name)}}function gn(e,n){1&e&&(T.ynx(0),T._uU(1," - "),T.BQk())}function mn(e,n){1&e&&(T.ynx(0),T._uU(1,"\n                  "),T._UZ(2,"i",22),T._uU(3),T.ALo(4,"i18n"),T.BQk()),2&e&&(T.xp6(3),T.hij("\n                  ",T.lcZ(4,1,"noMasterPassword"),"\n                "))}function hn(e,n){if(1&e&&(T.TgZ(0,"td",14),T._uU(1,"\n              "),T.TgZ(2,"span",21),T._uU(3,"\n                "),T.YNc(4,gn,2,0,"ng-container",3),T._uU(5,"\n                "),T.YNc(6,mn,5,3,"ng-container",3),T._uU(7,"\n              "),T.qZA(),T._uU(8,"\n            "),T.qZA()),2&e){const e=T.oxw().$implicit;T.xp6(4),T.Q6J("ngIf",!0===e.hasMasterPassword),T.xp6(2),T.Q6J("ngIf",!1===e.hasMasterPassword)}}function Un(e,n){if(1&e&&(T.TgZ(0,"tr",16),T._uU(1,"\n            "),T.TgZ(2,"td",17),T._uU(3,"\n              "),T._UZ(4,"bit-avatar",18),T.ALo(5,"userName"),T._uU(6,"\n            "),T.qZA(),T._uU(7,"\n            "),T.TgZ(8,"td",14),T._uU(9),T.YNc(10,pn,2,1,"small",19),T._uU(11,"\n            "),T.qZA(),T._uU(12,"\n            "),T.YNc(13,hn,9,2,"td",11),T._uU(14,"\n          "),T.qZA()),2&e){const e=n.$implicit,t=T.oxw(3);T.xp6(4),T.Q6J("text",T.lcZ(5,5,e))("id",e.id),T.xp6(5),T.hij("\n              ",e.email,"\n              "),T.xp6(1),T.Q6J("ngIf",e.name),T.xp6(3),T.Q6J("ngIf",t.showNoMasterPasswordWarning)}}function fn(e,n){if(1&e&&(T._uU(0,"\n          "),T.YNc(1,Un,15,7,"tr",15),T._uU(2,"\n        ")),2&e){const e=T.oxw(2);T.xp6(1),T.Q6J("ngForOf",e.users)}}function Zn(e,n){if(1&e&&(T.ynx(0),T._uU(1,"\n      "),T.YNc(2,ln,8,4,"bit-callout",8),T._uU(3,"\n\n      "),T.TgZ(4,"bit-table"),T._uU(5,"\n        "),T.ynx(6,9),T._uU(7,"\n          "),T.TgZ(8,"tr"),T._uU(9,"\n            "),T.TgZ(10,"th",10),T._uU(11),T.ALo(12,"i18n"),T.qZA(),T._uU(13,"\n            "),T.YNc(14,dn,3,3,"th",11),T._uU(15,"\n          "),T.qZA(),T._uU(16,"\n        "),T.BQk(),T._uU(17,"\n        "),T.YNc(18,fn,3,1,"ng-template",12),T._uU(19,"\n      "),T.qZA(),T._uU(20,"\n    "),T.BQk()),2&e){const e=T.oxw();T.xp6(2),T.Q6J("ngIf",e.users.length>0&&!e.error&&e.isRevoking),T.xp6(9),T.Oqu(T.lcZ(12,3,"user")),T.xp6(3),T.Q6J("ngIf",e.showNoMasterPasswordWarning)}}function _n(e,n){if(1&e&&(T.TgZ(0,"small",20),T._uU(1),T.qZA()),2&e){const e=T.oxw().$implicit;T.xp6(1),T.Oqu(e.name)}}function bn(e,n){if(1&e&&(T.TgZ(0,"td",14),T._uU(1),T.qZA()),2&e){const e=T.oxw().$implicit,n=T.oxw(3);T.xp6(1),T.hij("\n              ",n.statuses.get(e.id),"\n            ")}}function vn(e,n){1&e&&(T.TgZ(0,"td",14),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.hij("\n              ",T.lcZ(2,1,"bulkFilteredMessage"),"\n            "))}function wn(e,n){if(1&e&&(T.TgZ(0,"tr",16),T._uU(1,"\n            "),T.TgZ(2,"td",17),T._uU(3,"\n              "),T._UZ(4,"bit-avatar",18),T.ALo(5,"userName"),T._uU(6,"\n            "),T.qZA(),T._uU(7,"\n            "),T.TgZ(8,"td",14),T._uU(9),T.YNc(10,_n,2,1,"small",19),T._uU(11,"\n            "),T.qZA(),T._uU(12,"\n            "),T.YNc(13,bn,2,1,"td",11),T._uU(14,"\n            "),T.YNc(15,vn,3,3,"td",11),T._uU(16,"\n          "),T.qZA()),2&e){const e=n.$implicit,t=T.oxw(3);T.xp6(4),T.Q6J("text",T.lcZ(5,6,e))("id",e.id),T.xp6(5),T.hij("\n              ",e.email,"\n              "),T.xp6(1),T.Q6J("ngIf",e.name),T.xp6(3),T.Q6J("ngIf",t.statuses.has(e.id)),T.xp6(2),T.Q6J("ngIf",!t.statuses.has(e.id))}}function An(e,n){if(1&e&&(T._uU(0,"\n          "),T.YNc(1,wn,17,8,"tr",15),T._uU(2,"\n        ")),2&e){const e=T.oxw(2);T.xp6(1),T.Q6J("ngForOf",e.users)}}function xn(e,n){1&e&&(T.ynx(0),T._uU(1,"\n      "),T.TgZ(2,"bit-table"),T._uU(3,"\n        "),T.ynx(4,9),T._uU(5,"\n          "),T.TgZ(6,"tr"),T._uU(7,"\n            "),T.TgZ(8,"th",10),T._uU(9),T.ALo(10,"i18n"),T.qZA(),T._uU(11,"\n            "),T.TgZ(12,"th"),T._uU(13),T.ALo(14,"i18n"),T.qZA(),T._uU(15,"\n          "),T.qZA(),T._uU(16,"\n        "),T.BQk(),T._uU(17,"\n        "),T.YNc(18,An,3,1,"ng-template",12),T._uU(19,"\n      "),T.qZA(),T._uU(20,"\n    "),T.BQk()),2&e&&(T.xp6(9),T.Oqu(T.lcZ(10,2,"user")),T.xp6(4),T.Oqu(T.lcZ(14,4,"status")))}function yn(e,n){if(1&e&&(T.TgZ(0,"button",23),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.Q6J("bitAction",e.submit),T.xp6(1),T.hij("\n      ",e.bulkTitle,"\n    ")}}class Tn{constructor(e,n,t){this.i18nService=e,this.organizationUserService=n,this.data=t,this.statuses=new Map,this.loading=!1,this.done=!1,this.showNoMasterPasswordWarning=!1,this.submit=()=>rn(this,void 0,void 0,(function*(){try{const e=yield this.performBulkUserAction(),n=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t(n);this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}})),this.isRevoking=t.isRevoking,this.organizationId=t.organizationId,this.users=t.users,this.showNoMasterPasswordWarning=this.users.some((e=>!1===e.hasMasterPassword))}get bulkTitle(){const e=this.isRevoking?"revokeUsers":"restoreUsers";return this.i18nService.t(e)}performBulkUserAction(){return rn(this,void 0,void 0,(function*(){const e=this.users.map((e=>e.id));return this.isRevoking?yield this.organizationUserService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserService.restoreManyOrganizationUsers(this.organizationId,e)}))}static open(e,n){return e.open(Tn,{data:n})}}Tn.ɵfac=function(e){return new(e||Tn)(T.Y36(q.D),T.Y36(k.t),T.Y36(r.Kt))},Tn.ɵcmp=T.Xpm({type:Tn,selectors:[["app-bulk-restore-revoke"]],decls:29,vars:9,consts:[["bitDialogTitle",""],["bitDialogContent",""],["type","danger",4,"ngIf"],[4,"ngIf"],["bitDialogFooter",""],["type","button","bitButton","",3,"bitAction",4,"ngIf"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""],["type","danger"],["type","warning",4,"ngIf"],["header",""],["bitCell","","colspan","2"],["bitCell","",4,"ngIf"],["body",""],["type","warning"],["bitCell",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","","width","30"],["size","small",3,"text","id"],["class","tw-block tw-text-muted",4,"ngIf"],[1,"tw-block","tw-text-muted"],[1,"tw-block","tw-lowercase","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],["type","button","bitButton","",3,"bitAction"]],template:function(e,n){1&e&&(T.TgZ(0,"bit-dialog"),T._uU(1,"\n  "),T.ynx(2,0),T._uU(3,"\n    "),T.TgZ(4,"h1"),T._uU(5),T.qZA(),T._uU(6,"\n  "),T.BQk(),T._uU(7,"\n  "),T.TgZ(8,"div",1),T._uU(9,"\n    "),T.YNc(10,an,3,3,"bit-callout",2),T._uU(11,"\n\n    "),T.YNc(12,cn,2,1,"bit-callout",2),T._uU(13,"\n\n    "),T.YNc(14,Zn,21,5,"ng-container",3),T._uU(15,"\n\n    "),T.YNc(16,xn,21,6,"ng-container",3),T._uU(17,"\n  "),T.qZA(),T._uU(18,"\n  "),T.ynx(19,4),T._uU(20,"\n    "),T.YNc(21,yn,2,2,"button",5),T._uU(22,"\n    "),T.TgZ(23,"button",6),T._uU(24),T.ALo(25,"i18n"),T.qZA(),T._uU(26,"\n  "),T.BQk(),T._uU(27,"\n"),T.qZA(),T._uU(28,"\n")),2&e&&(T.xp6(5),T.Oqu(n.bulkTitle),T.xp6(5),T.Q6J("ngIf",n.users.length<=0),T.xp6(2),T.Q6J("ngIf",n.error),T.xp6(2),T.Q6J("ngIf",!n.done),T.xp6(2),T.Q6J("ngIf",n.done),T.xp6(5),T.Q6J("ngIf",!n.done&&n.users.length>0),T.xp6(3),T.hij("\n      ",T.lcZ(25,7,"close"),"\n    "))},dependencies:[P.sg,P.O5,N.Q,Be.A,R.r,sn.O,O.a,Fe.f,$e.a,Ke.Y,He.v,$e.f,W.C,Ne.z],encapsulation:2});var qn=t(63971),Cn=t(56945),kn=t(27737),Sn=t(86277),In=t(83924),Pn=t(66459),Mn=t(24610),Nn=t(62374),Ln=t(53707),zn=t(85356),Jn=t(2051),Rn=t(14422),Qn=function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(n){s(n)}}function a(e){try{c(i.throw(e))}catch(n){s(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}))};function On(e,n){if(1&e&&(T.TgZ(0,"small",30),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.name)}}function Gn(e,n){if(1&e&&(T.TgZ(0,"auth-password-callout",31),T._uU(1,"\n        "),T.qZA()),2&e){const e=T.oxw();T.Q6J("policy",e.enforcedPolicyOptions)}}const Yn=function(e,n){return{"bwi-eye":e,"bwi-eye-slash":n}};class jn{constructor(e,n,t,i,o,s,r){this.accountRecoveryService=e,this.i18nService=n,this.platformUtilsService=t,this.passwordGenerationService=i,this.policyService=o,this.logService=s,this.dialogService=r,this.onPasswordReset=new T.vpe,this.newPassword=null,this.showPassword=!1,this.destroy$=new c.x}ngOnInit(){return Qn(this,void 0,void 0,(function*(){this.policyService.masterPasswordPolicyOptions$().pipe((0,g.R)(this.destroy$)).subscribe((e=>this.enforcedPolicyOptions=e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){var e,n;return Qn(this,void 0,void 0,(function*(){const t=null!==(n=null===(e=yield this.passwordGenerationService.getOptions())||void 0===e?void 0:e[0])&&void 0!==n?n:{};this.newPassword=yield this.passwordGenerationService.generatePassword(t),this.passwordStrengthComponent.updatePasswordStrength(this.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return Qn(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordRequired")),!1;if(this.newPassword.length<H.c.minimumPasswordLength)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordMinlength",H.c.minimumPasswordLength)),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthResult.score,this.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthResult.score<3){if(!(yield this.dialogService.openSimpleDialog({title:{key:"weakMasterPassword"},content:{key:"weakMasterPasswordDesc"},type:"warning"})))return!1}try{this.formPromise=this.accountRecoveryService.resetMasterPassword(this.newPassword,this.email,this.id,this.organizationId),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}this.formPromise=null}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}getStrengthResult(e){this.passwordStrengthResult=e}}jn.ɵfac=function(e){return new(e||jn)(T.Y36(Sn.n),T.Y36(q.D),T.Y36(C.P),T.Y36(kn.UW),T.Y36(In.d),T.Y36(Pn.$),T.Y36(S.x))},jn.ɵcmp=T.Xpm({type:jn,selectors:[["app-reset-password"]],viewQuery:function(e,n){if(1&e&&T.Gf(Cn.Z,5),2&e){let e;T.iGM(e=T.CRH())&&(n.passwordStrengthComponent=e.first)}},inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:44,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"password","email","showText","passwordStrengthResult"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["message","resetPasswordMasterPasswordPolicyInEffect",3,"policy"]],template:function(e,n){if(1&e&&(T.TgZ(0,"div",0),T._uU(1,"\n  "),T.TgZ(2,"div",1),T._uU(3,"\n    "),T.TgZ(4,"form",2,3),T.NdJ("ngSubmit",(function(){return n.submit()})),T._uU(6,"\n      "),T.TgZ(7,"div",4),T._uU(8,"\n        "),T.TgZ(9,"h1",5),T._uU(10),T.ALo(11,"i18n"),T.YNc(12,On,2,1,"small",6),T._uU(13,"\n        "),T.qZA(),T._uU(14,"\n        "),T.TgZ(15,"button",7),T.ALo(16,"i18n"),T._uU(17,"\n          "),T.TgZ(18,"span",8),T._uU(19,"×"),T.qZA(),T._uU(20,"\n        "),T.qZA(),T._uU(21,"\n      "),T.qZA(),T._uU(22,"\n      "),T.TgZ(23,"div",9),T._uU(24,"\n        "),T.TgZ(25,"app-callout",10),T._uU(26),T.ALo(27,"i18n"),T.qZA(),T._uU(28,"\n        "),T.YNc(29,Gn,2,1,"auth-password-callout",11),T._uU(30,"\n        "),T.TgZ(31,"div",12),T._uU(32,"\n          "),T.TgZ(33,"div",13),T._uU(34,"\n            "),T.TgZ(35,"div",14),T._uU(36,"\n              "),T.TgZ(37,"label",15),T._uU(38),T.ALo(39,"i18n"),T.qZA(),T._uU(40,"\n              "),T.TgZ(41,"div",16),T._uU(42,"\n                "),T.TgZ(43,"a",17),T.NdJ("click",(function(){return n.generatePassword()})),T.ALo(44,"i18n"),T._uU(45,"\n                  "),T._UZ(46,"i",18),T._uU(47,"\n                "),T.qZA(),T._uU(48,"\n              "),T.qZA(),T._uU(49,"\n            "),T.qZA(),T._uU(50,"\n            "),T.TgZ(51,"div",19),T._uU(52,"\n              "),T.TgZ(53,"input",20),T.NdJ("ngModelChange",(function(e){return n.newPassword=e})),T.qZA(),T._uU(54,"\n              "),T.TgZ(55,"div",21),T._uU(56,"\n                "),T.TgZ(57,"button",22),T.NdJ("click",(function(){return n.togglePassword()})),T.ALo(58,"i18n"),T._uU(59,"\n                  "),T._UZ(60,"i",23),T._uU(61,"\n                "),T.qZA(),T._uU(62,"\n                "),T.TgZ(63,"button",22),T.NdJ("click",(function(){return n.copy(n.newPassword)})),T.ALo(64,"i18n"),T._uU(65,"\n                  "),T._UZ(66,"i",24),T._uU(67,"\n                "),T.qZA(),T._uU(68,"\n              "),T.qZA(),T._uU(69,"\n            "),T.qZA(),T._uU(70,"\n            "),T.TgZ(71,"app-password-strength",25),T.NdJ("passwordStrengthResult",(function(e){return n.getStrengthResult(e)})),T._uU(72,"\n            "),T.qZA(),T._uU(73,"\n          "),T.qZA(),T._uU(74,"\n        "),T.qZA(),T._uU(75,"\n      "),T.qZA(),T._uU(76,"\n      "),T.TgZ(77,"div",26),T._uU(78,"\n        "),T.TgZ(79,"button",27),T._uU(80,"\n          "),T._UZ(81,"i",28),T.ALo(82,"i18n"),T._uU(83,"\n          "),T.TgZ(84,"span"),T._uU(85),T.ALo(86,"i18n"),T.qZA(),T._uU(87,"\n        "),T.qZA(),T._uU(88,"\n        "),T.TgZ(89,"button",29),T._uU(90),T.ALo(91,"i18n"),T.qZA(),T._uU(92,"\n      "),T.qZA(),T._uU(93,"\n    "),T.qZA(),T._uU(94,"\n  "),T.qZA(),T._uU(95,"\n"),T.qZA(),T._uU(96,"\n")),2&e){const e=T.MAs(5);T.xp6(4),T.Q6J("appApiAction",n.formPromise),T.xp6(6),T.hij("\n          ",T.lcZ(11,20,"recoverAccount"),"\n          "),T.xp6(2),T.Q6J("ngIf",n.name),T.xp6(3),T.s9C("appA11yTitle",T.lcZ(16,22,"close")),T.xp6(11),T.hij("",T.xi3(27,24,"resetPasswordLoggedOutWarning",n.loggedOutWarningName),"\n        "),T.xp6(3),T.Q6J("ngIf",n.enforcedPolicyOptions),T.xp6(9),T.Oqu(T.lcZ(39,27,"newPassword")),T.xp6(5),T.s9C("appA11yTitle",T.lcZ(44,29,"generatePassword")),T.xp6(10),T.s9C("type",n.showPassword?"text":"password"),T.Q6J("ngModel",n.newPassword),T.xp6(4),T.s9C("appA11yTitle",T.lcZ(58,31,"toggleVisibility")),T.xp6(3),T.Q6J("ngClass",T.WLB(41,Yn,!n.showPassword,n.showPassword)),T.xp6(3),T.s9C("appA11yTitle",T.lcZ(64,33,"copyPassword")),T.xp6(8),T.Q6J("password",n.newPassword)("email",n.email)("showText",!0),T.xp6(8),T.Q6J("disabled",e.loading),T.xp6(2),T.s9C("title",T.lcZ(82,35,"loading")),T.xp6(4),T.Oqu(T.lcZ(86,37,"save")),T.xp6(5),T.hij("\n          ",T.lcZ(91,39,"cancel"),"\n        ")}},dependencies:[P.mk,P.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,M.B,Mn.b,Nn.U,Ln.O,zn.b,Jn.O,Cn.Z,Rn.e,W.C],encapsulation:2});var En=t(55602),Dn=t(76528),Bn=t(51430),Fn=t(14494),$n=t(50137),Kn=t(4871),Hn=t(58172),Wn=t(97360),Vn=t(31754),Xn=t(56617),et=t(1874),nt=t(12492),tt=t(73974),it=t(26194),ot=t(44234),st=t(91849),rt=t(98797),at=t(65777),ct=t(94239),ut=function(e,n,t,i){return new(t||(t=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(n){s(n)}}function a(e){try{c(i.throw(e))}catch(n){s(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}c((i=i.apply(e,n||[])).next())}))};const lt=["groupsTemplate"],dt=["confirmTemplate"],pt=["resetPasswordTemplate"],gt=["bulkStatusTemplate"],mt=["bulkConfirmTemplate"],ht=["bulkRemoveTemplate"];function Ut(e,n){if(1&e&&(T.TgZ(0,"span",17),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.allCount)}}function ft(e,n){if(1&e&&(T.TgZ(0,"span",17),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.invitedCount)}}function Zt(e,n){if(1&e&&(T.TgZ(0,"span",17),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.acceptedCount)}}function _t(e,n){if(1&e&&(T.TgZ(0,"span",17),T._uU(1),T.qZA()),2&e){const e=T.oxw();T.xp6(1),T.Oqu(e.revokedCount)}}function bt(e,n){1&e&&(T.ynx(0),T._uU(1,"\n    "),T._UZ(2,"i",18),T.ALo(3,"i18n"),T._uU(4,"\n    "),T.TgZ(5,"span",19),T._uU(6),T.ALo(7,"i18n"),T.qZA(),T._uU(8,"\n  "),T.BQk()),2&e&&(T.xp6(2),T.s9C("title",T.lcZ(3,2,"loading")),T.xp6(4),T.Oqu(T.lcZ(7,4,"loading")))}function vt(e,n){1&e&&(T.TgZ(0,"p"),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"noMembersInList")))}function wt(e,n){1&e&&(T.TgZ(0,"app-callout",38),T.ALo(1,"i18n"),T._uU(2),T.ALo(3,"i18n"),T.qZA()),2&e&&(T.s9C("title",T.lcZ(1,2,"confirmUsers")),T.xp6(2),T.hij("\n        ",T.lcZ(3,4,"usersNeedConfirmed"),"\n      "))}function At(e,n){if(1&e){const e=T.EpF();T.ynx(0),T._uU(1,"\n                  "),T.TgZ(2,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.bulkEnableSM())})),T._uU(3),T.ALo(4,"i18n"),T.qZA(),T._uU(5,"\n                  "),T._UZ(6,"bit-menu-divider"),T._uU(7,"\n                "),T.BQk()}2&e&&(T.xp6(3),T.hij("\n                    ",T.lcZ(4,1,"activateSecretsManager"),"\n                  "))}function xt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(3);return T.KtG(n.bulkConfirm())})),T._uU(1,"\n                  "),T.TgZ(2,"span",39),T._uU(3,"\n                    "),T._UZ(4,"i",40),T._uU(5),T.ALo(6,"i18n"),T.qZA(),T._uU(7,"\n                "),T.qZA()}2&e&&(T.xp6(5),T.hij("\n                    ",T.lcZ(6,1,"confirmSelected"),"\n                  "))}function yt(e,n){1&e&&(T.TgZ(0,"span",59),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"invited")))}function Tt(e,n){1&e&&(T.TgZ(0,"span",60),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"needsConfirmation")))}function qt(e,n){1&e&&(T.TgZ(0,"span",59),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"revoked")))}function Ct(e,n){if(1&e&&(T.TgZ(0,"div",61),T._uU(1),T.qZA()),2&e){const e=T.oxw().$implicit;T.xp6(1),T.hij("\n                    ",e.email,"\n                  ")}}function kt(e,n){if(1&e&&T._UZ(0,"bit-badge-list",62),2&e){const e=T.oxw().$implicit,n=T.oxw(4);T.Q6J("items",n.organization.useGroups?e.groupNames:e.collectionNames)("maxItems",3)}}function St(e,n){1&e&&(T.TgZ(0,"span"),T._uU(1),T.ALo(2,"i18n"),T.qZA()),2&e&&(T.xp6(1),T.Oqu(T.lcZ(2,1,"all")))}function It(e,n){1&e&&(T.ynx(0),T._uU(1,"\n                "),T._UZ(2,"i",63),T.ALo(3,"i18n"),T._uU(4,"\n                "),T.TgZ(5,"span",64),T._uU(6),T.ALo(7,"i18n"),T.qZA(),T._uU(8,"\n              "),T.BQk()),2&e&&(T.xp6(2),T.s9C("title",T.lcZ(3,2,"userUsingTwoStep")),T.xp6(4),T.Oqu(T.lcZ(7,4,"userUsingTwoStep")))}function Pt(e,n){1&e&&(T.ynx(0),T._uU(1,"\n                "),T._UZ(2,"i",65),T.ALo(3,"i18n"),T._uU(4,"\n                "),T.TgZ(5,"span",64),T._uU(6),T.ALo(7,"i18n"),T.qZA(),T._uU(8,"\n              "),T.BQk()),2&e&&(T.xp6(2),T.s9C("title",T.lcZ(3,2,"enrolledAccountRecovery")),T.xp6(4),T.Oqu(T.lcZ(7,4,"enrolledAccountRecovery")))}function Mt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.reinvite(n))})),T._uU(1,"\n                  "),T._UZ(2,"i",66),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij("\n                  ",T.lcZ(4,1,"resendInvitation"),"\n                "))}function Nt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.confirm(n))})),T._uU(1,"\n                  "),T.TgZ(2,"span",39),T._uU(3,"\n                    "),T._UZ(4,"i",67),T._uU(5),T.ALo(6,"i18n"),T.qZA(),T._uU(7,"\n                "),T.qZA()}2&e&&(T.xp6(5),T.hij(" ",T.lcZ(6,1,"confirm"),"\n                  "))}function Lt(e,n){1&e&&T._UZ(0,"bit-menu-divider")}function zt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.edit(n,t.memberTab.Groups))})),T._uU(1,"\n                  "),T._UZ(2,"i",68),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij(" ",T.lcZ(4,1,"groups"),"\n                "))}function Jt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.events(n))})),T._uU(1,"\n                  "),T._UZ(2,"i",69),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij(" ",T.lcZ(4,1,"eventLogs"),"\n                "))}function Rt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.resetPassword(n))})),T._uU(1,"\n                  "),T._UZ(2,"i",70),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij(" ",T.lcZ(4,1,"recoverAccount"),"\n                "))}function Qt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.restore(n))})),T._uU(1,"\n                  "),T._UZ(2,"i",71),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij("\n                  ",T.lcZ(4,1,"restoreAccess"),"\n                "))}function Ot(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw().$implicit,t=T.oxw(4);return T.KtG(t.revoke(n))})),T._uU(1,"\n                  "),T._UZ(2,"i",72),T._uU(3),T.ALo(4,"i18n"),T.qZA()}2&e&&(T.xp6(3),T.hij("\n                  ",T.lcZ(4,1,"revokeAccess"),"\n                "))}function Gt(e,n){if(1&e){const e=T.EpF();T.TgZ(0,"tr",42),T._uU(1,"\n            "),T.TgZ(2,"td",43),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.checkUser(n))})),T._uU(3,"\n              "),T.TgZ(4,"input",44),T.NdJ("ngModelChange",(function(n){const t=T.CHM(e).$implicit;return T.KtG(t.checked=n)})),T.qZA(),T._uU(5,"\n            "),T.qZA(),T._uU(6,"\n            "),T.TgZ(7,"td",45),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.edit(n))})),T._uU(8,"\n              "),T.TgZ(9,"div",46),T._uU(10,"\n                "),T._UZ(11,"bit-avatar",47),T.ALo(12,"userName"),T._uU(13,"\n                "),T.TgZ(14,"div",48),T._uU(15,"\n                  "),T.TgZ(16,"div"),T._uU(17,"\n                    "),T.TgZ(18,"button",49),T._uU(19),T.qZA(),T._uU(20,"\n                    "),T.YNc(21,yt,3,3,"span",50),T._uU(22,"\n                    "),T.YNc(23,Tt,3,3,"span",51),T._uU(24,"\n                    "),T.YNc(25,qt,3,3,"span",50),T._uU(26,"\n                  "),T.qZA(),T._uU(27,"\n                  "),T.YNc(28,Ct,2,1,"div",52),T._uU(29,"\n                "),T.qZA(),T._uU(30,"\n              "),T.qZA(),T._uU(31,"\n            "),T.qZA(),T._uU(32,"\n\n            "),T.TgZ(33,"td",45),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.edit(n,t.organization.useGroups?t.memberTab.Groups:t.memberTab.Collections))})),T._uU(34,"\n              "),T.YNc(35,kt,1,2,"bit-badge-list",53),T._uU(36,"\n              "),T.YNc(37,St,3,3,"span",9),T._uU(38,"\n            "),T.qZA(),T._uU(39,"\n\n            "),T.TgZ(40,"td",54),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.edit(n,t.memberTab.Role))})),T._uU(41),T.ALo(42,"userType"),T.qZA(),T._uU(43,"\n\n            "),T.TgZ(44,"td",55),T._uU(45,"\n              "),T.YNc(46,It,9,6,"ng-container",9),T._uU(47,"\n              "),T.YNc(48,Pt,9,6,"ng-container",9),T._uU(49,"\n            "),T.qZA(),T._uU(50,"\n            "),T.TgZ(51,"td",26),T._uU(52,"\n              "),T._UZ(53,"button",28),T.ALo(54,"i18n"),T._uU(55,"\n\n              "),T.TgZ(56,"bit-menu",null,56),T._uU(58,"\n                "),T.YNc(59,Mt,5,3,"button",32),T._uU(60,"\n                "),T.YNc(61,Nt,8,3,"button",32),T._uU(62,"\n                "),T.YNc(63,Lt,1,0,"bit-menu-divider",9),T._uU(64,"\n                "),T.TgZ(65,"button",30),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.edit(n,t.memberTab.Role))})),T._uU(66,"\n                  "),T._UZ(67,"i",57),T._uU(68),T.ALo(69,"i18n"),T.qZA(),T._uU(70,"\n                "),T.YNc(71,zt,5,3,"button",32),T._uU(72,"\n                "),T.TgZ(73,"button",30),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.edit(n,t.memberTab.Collections))})),T._uU(74,"\n                  "),T._UZ(75,"i",58),T._uU(76),T.ALo(77,"i18n"),T.qZA(),T._uU(78,"\n                "),T._UZ(79,"bit-menu-divider"),T._uU(80,"\n                "),T.YNc(81,Jt,5,3,"button",32),T._uU(82,"\n                "),T.YNc(83,Rt,5,3,"button",32),T._uU(84,"\n                "),T.YNc(85,Qt,5,3,"button",32),T._uU(86,"\n                "),T.YNc(87,Ot,5,3,"button",32),T._uU(88,"\n                "),T.TgZ(89,"button",30),T.NdJ("click",(function(){const n=T.CHM(e).$implicit,t=T.oxw(4);return T.KtG(t.remove(n))})),T._uU(90,"\n                  "),T.TgZ(91,"span",35),T._uU(92,"\n                    "),T._UZ(93,"i",36),T._uU(94),T.ALo(95,"i18n"),T.qZA(),T._uU(96,"\n                "),T.qZA(),T._uU(97,"\n              "),T.qZA(),T._uU(98,"\n            "),T.qZA(),T._uU(99,"\n          "),T.qZA()}if(2&e){const e=n.$implicit,t=T.MAs(57),i=T.oxw(4);let o;T.xp6(4),T.Q6J("ngModel",e.checked),T.xp6(7),T.Q6J("text",T.lcZ(12,27,e))("id",e.userId)("color",e.avatarColor),T.xp6(8),T.hij("\n                      ",null!==(o=e.name)&&void 0!==o?o:e.email,"\n                    "),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Invited),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Accepted),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Revoked),T.xp6(3),T.Q6J("ngIf",e.name),T.xp6(7),T.Q6J("ngIf",i.organization.useGroups||!e.accessAll),T.xp6(2),T.Q6J("ngIf",!i.organization.useGroups&&e.accessAll),T.xp6(4),T.hij("\n              ",T.lcZ(42,29,e.type),"\n            "),T.xp6(5),T.Q6J("ngIf",e.twoFactorEnabled),T.xp6(2),T.Q6J("ngIf",i.showEnrolledStatus(e)),T.xp6(5),T.s9C("appA11yTitle",T.lcZ(54,31,"options")),T.Q6J("bitMenuTriggerFor",t),T.xp6(6),T.Q6J("ngIf",e.status===i.userStatusType.Invited),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Accepted),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Accepted||e.status===i.userStatusType.Invited),T.xp6(5),T.hij(" ",T.lcZ(69,33,"memberRole"),"\n                "),T.xp6(3),T.Q6J("ngIf",i.organization.useGroups),T.xp6(5),T.hij(" ",T.lcZ(77,35,"collections"),"\n                "),T.xp6(5),T.Q6J("ngIf",i.organization.useEvents&&e.status===i.userStatusType.Confirmed),T.xp6(2),T.Q6J("ngIf",i.allowResetPassword(e)),T.xp6(2),T.Q6J("ngIf",e.status===i.userStatusType.Revoked),T.xp6(2),T.Q6J("ngIf",e.status!==i.userStatusType.Revoked),T.xp6(7),T.hij(" ",T.lcZ(95,37,"remove"),"\n                  ")}}function Yt(e,n){if(1&e&&(T._uU(0,"\n          "),T.YNc(1,Gt,100,39,"tr",41),T._uU(2,"\n        ")),2&e){const e=T.oxw(2).ngIf;T.xp6(1),T.Q6J("ngForOf",e)}}function jt(e,n){if(1&e){const e=T.EpF();T.ynx(0),T._uU(1,"\n      "),T.YNc(2,wt,4,6,"app-callout",20),T._uU(3,"\n      "),T.TgZ(4,"bit-table",21),T.NdJ("scrolled",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.loadMore())})),T._uU(5,"\n        "),T.ynx(6,22),T._uU(7,"\n          "),T.TgZ(8,"tr"),T._uU(9,"\n            "),T.TgZ(10,"th",23),T._uU(11,"\n              "),T.TgZ(12,"input",24),T.NdJ("change",(function(n){T.CHM(e);const t=T.oxw(2);return T.KtG(t.selectAll(n.target.checked))})),T.qZA(),T._uU(13,"\n              "),T.TgZ(14,"label",25),T._uU(15),T.ALo(16,"i18n"),T.qZA(),T._uU(17,"\n            "),T.qZA(),T._uU(18,"\n            "),T.TgZ(19,"th",26),T._uU(20),T.ALo(21,"i18n"),T.qZA(),T._uU(22,"\n            "),T.TgZ(23,"th",26),T._uU(24),T.ALo(25,"i18n"),T.qZA(),T._uU(26,"\n            "),T.TgZ(27,"th",26),T._uU(28),T.ALo(29,"i18n"),T.qZA(),T._uU(30,"\n            "),T.TgZ(31,"th",26),T._uU(32),T.ALo(33,"i18n"),T.qZA(),T._uU(34,"\n            "),T.TgZ(35,"th",27),T._uU(36,"\n              "),T._UZ(37,"button",28),T.ALo(38,"i18n"),T._uU(39,"\n\n              "),T.TgZ(40,"bit-menu",null,29),T._uU(42,"\n                "),T.YNc(43,At,8,3,"ng-container",9),T.ALo(44,"async"),T._uU(45,"\n                "),T.TgZ(46,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.bulkReinvite())})),T._uU(47,"\n                  "),T._UZ(48,"i",31),T._uU(49),T.ALo(50,"i18n"),T.qZA(),T._uU(51,"\n                "),T.YNc(52,xt,8,3,"button",32),T._uU(53,"\n                "),T.TgZ(54,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.bulkRestore())})),T._uU(55,"\n                  "),T._UZ(56,"i",33),T._uU(57),T.ALo(58,"i18n"),T.qZA(),T._uU(59,"\n                "),T.TgZ(60,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.bulkRevoke())})),T._uU(61,"\n                  "),T._UZ(62,"i",34),T._uU(63),T.ALo(64,"i18n"),T.qZA(),T._uU(65,"\n                "),T.TgZ(66,"button",30),T.NdJ("click",(function(){T.CHM(e);const n=T.oxw(2);return T.KtG(n.bulkRemove())})),T._uU(67,"\n                  "),T.TgZ(68,"span",35),T._uU(69,"\n                    "),T._UZ(70,"i",36),T._uU(71),T.ALo(72,"i18n"),T.qZA(),T._uU(73,"\n                "),T.qZA(),T._uU(74,"\n              "),T.qZA(),T._uU(75,"\n            "),T.qZA(),T._uU(76,"\n          "),T.qZA(),T._uU(77,"\n        "),T.BQk(),T._uU(78,"\n        "),T.YNc(79,Yt,3,1,"ng-template",37),T._uU(80,"\n      "),T.qZA(),T._uU(81,"\n    "),T.BQk()}if(2&e){const e=T.MAs(41),n=T.oxw(2);T.xp6(2),T.Q6J("ngIf",n.showConfirmUsers),T.xp6(2),T.Q6J("infiniteScrollDistance",1)("infiniteScrollDisabled",!n.isPaging()),T.xp6(11),T.Oqu(T.lcZ(16,16,"all")),T.xp6(5),T.Oqu(T.lcZ(21,18,"name")),T.xp6(4),T.Oqu(T.lcZ(25,20,n.organization.useGroups?"groups":"collections")),T.xp6(4),T.Oqu(T.lcZ(29,22,"role")),T.xp6(4),T.Oqu(T.lcZ(33,24,"policies")),T.xp6(5),T.s9C("appA11yTitle",T.lcZ(38,26,"options")),T.Q6J("bitMenuTriggerFor",e),T.xp6(6),T.Q6J("ngIf",T.lcZ(44,28,n.canUseSecretsManager$)),T.xp6(6),T.hij("\n                  ",T.lcZ(50,30,"reinviteSelected"),"\n                "),T.xp6(3),T.Q6J("ngIf",n.showBulkConfirmUsers),T.xp6(5),T.hij("\n                  ",T.lcZ(58,32,"restoreAccess"),"\n                "),T.xp6(6),T.hij("\n                  ",T.lcZ(64,34,"revokeAccess"),"\n                "),T.xp6(8),T.hij("\n                    ",T.lcZ(72,36,"remove"),"\n                  ")}}function Et(e,n){if(1&e&&(T.ynx(0),T._uU(1,"\n    "),T.YNc(2,vt,3,3,"p",9),T._uU(3,"\n    "),T.YNc(4,jt,82,38,"ng-container",9),T._uU(5,"\n  "),T.BQk()),2&e){const e=n.ngIf;T.xp6(2),T.Q6J("ngIf",!e.length),T.xp6(2),T.Q6J("ngIf",e.length)}}function Dt(e,n){}function Bt(e,n){}function Ft(e,n){}function $t(e,n){}function Kt(e,n){}function Ht(e,n){}function Wt(e,n){}const Vt=function(e,n){return[e,n,"name","email","id"]};class Xt extends Ge.b{constructor(e,n,t,i,o,s,r,a,u,l,d,p,g,m,U,f,Z,_,b,v,w,A,x){super(e,r,t,o,s,a,i,d,p,g,U,b),this.route=n,this.policyService=u,this.policyApiService=l,this.syncService=m,this.organizationService=f,this.organizationApiService=Z,this.organizationUserService=_,this.router=v,this.groupService=w,this.collectionService=A,this.configService=x,this.userType=h.je,this.userStatusType=h.Dn,this.memberTab=ne,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.destroy$=new c.x}ngOnInit(){return ut(this,void 0,void 0,(function*(){const e=this.route.params.pipe((0,Ce.U)((e=>this.organizationService.get(e.organizationId))),(0,l.d)({refCount:!0,bufferSize:1}));this.canUseSecretsManager$=e.pipe((0,Ce.U)((e=>e.useSecretsManager&&(0,_.Sp)("secretsManager"))));const n=e.pipe((0,d.w)((e=>e.isProviderUser?(0,ke.D)(this.policyApiService.getPolicies(e.id)).pipe((0,Ce.U)((e=>this.policyService.mapPoliciesFromToken(e)))):this.policyService.policies$)));(0,p.a)([this.route.queryParams,n,e]).pipe((0,Se.b)((([e,n,t])=>ut(this,void 0,void 0,(function*(){if(this.organization=t,this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const e=yield this.cryptoService.getOrgKey(this.organization.id),n=yield this.cryptoService.makeKeyPair(e),t=new Je.u(n[0],n[1].encryptedString),i=yield this.organizationApiService.updateKeys(this.organization.id,t);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}const i=n.filter((e=>e.type===h.Mi.ResetPassword)).find((e=>e.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==i?void 0:i.enabled,yield this.load(),this.searchText=e.search,null!=e.viewEvents){const n=this.users.filter((n=>n.id===e.viewEvents));n.length>0&&n[0].status===h.Dn.Confirmed&&this.events(n[0])}})))),(0,g.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){const e=Object.create(null,{load:{get:()=>super.load}});return ut(this,void 0,void 0,(function*(){yield e.load.call(this)}))}getUsers(){var e;return ut(this,void 0,void 0,(function*(){let n,t;const i=this.organizationUserService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?n=this.getGroupNameMap():t=this.getCollectionNameMap();const[o,s,r]=yield Promise.all([i,n,t]),a=yield this.configService.getFeatureFlag(Z.T.FlexibleCollections,!1);return null===(e=o.data)||void 0===e?void 0:e.map((e=>{var n,t;const i=je.fromResponse(e);return a&&(i.accessAll=!1),i.groupNames=i.groups.map((e=>s.get(e))).sort(null===(n=this.i18nService.collator)||void 0===n?void 0:n.compare),i.collectionNames=i.collections.map((e=>r.get(e.id))).sort(null===(t=this.i18nService.collator)||void 0===t?void 0:t.compare),i}))}))}getGroupNameMap(){return ut(this,void 0,void 0,(function*(){const e=yield this.groupService.getAll(this.organization.id),n=new Map;return e.forEach((e=>n.set(e.id,e.name))),n}))}getCollectionNameMap(){return ut(this,void 0,void 0,(function*(){const e=new Map,n=(yield this.apiService.getCollections(this.organization.id)).data.map((e=>new Qe.F(new Re.Z(e))));return(yield this.collectionService.decryptMany(n)).forEach((n=>e.set(n.id,n.name))),e}))}deleteUser(e){return this.organizationUserService.deleteOrganizationUser(this.organization.id,e)}revokeUser(e){return this.organizationUserService.revokeOrganizationUser(this.organization.id,e)}restoreUser(e){return this.organizationUserService.restoreOrganizationUser(this.organization.id,e)}reinviteUser(e){return this.organizationUserService.postOrganizationUserReinvite(this.organization.id,e)}confirmUser(e,n){return ut(this,void 0,void 0,(function*(){const t=yield this.cryptoService.getOrgKey(this.organization.id),i=yield this.cryptoService.rsaEncrypt(t.key,n),o=new ze;o.key=i.encryptedString,yield this.organizationUserService.postOrganizationUserConfirm(this.organization.id,e.id,o)}))}allowResetPassword(e){let n=!1;switch(this.organization.type){case h.je.Owner:n=!0;break;case h.je.Admin:n=e.type!==h.je.Owner;break;case h.je.Custom:n=e.type!==h.je.Owner&&e.type!==h.je.Admin}return this.organization.canManageUsersPassword&&n&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===h.Dn.Confirmed}showEnrolledStatus(e){return this.organization.useResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}getManageBillingText(){return this.organization.canEditSubscription?"ManageBilling":"NoManageBilling"}getProductKey(e){let n="";switch(e){case f.kv.Free:n="freeOrg";break;case f.kv.TeamsStarter:n="teamsStarterPlan";break;default:throw new Error(`Unsupported product type: ${e}`)}return`${n}InvLimitReached${this.getManageBillingText()}`}getDialogTitle(e){switch(e){case f.kv.Free:return"upgrade";case f.kv.TeamsStarter:return"contactSupportShort";default:throw new Error(`Unsupported product type: ${e}`)}}getDialogContent(){return this.i18nService.t(this.getProductKey(this.organization.planProductType),this.organization.seats)}getAcceptButtonText(){return this.organization.canEditSubscription?this.i18nService.t(this.getDialogTitle(this.organization.planProductType)):this.i18nService.t("ok")}handleDialogClose(e){return ut(this,void 0,void 0,(function*(){if(e&&this.organization.canEditSubscription)switch(this.organization.planProductType){case f.kv.Free:yield this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}});break;case f.kv.TeamsStarter:window.open("https://bitwarden.com/contact/","_blank");break;default:throw new Error(`Unsupported product type: ${this.organization.planProductType}`)}}))}showSeatLimitReachedDialog(){return ut(this,void 0,void 0,(function*(){const e={title:this.i18nService.t("upgradeOrganization"),content:this.getDialogContent(),type:"primary",acceptButtonText:this.getAcceptButtonText()};this.organization.canEditSubscription||(e.cancelButtonText=null);const n=this.dialogService.openSimpleDialogRef(e);(0,Ie.z)(n.closed).then(this.handleDialogClose.bind(this))}))}edit(e,n=ne.Role){var t,i;return ut(this,void 0,void 0,(function*(){if(!e&&this.organization.hasReseller&&this.organization.seats===this.confirmedCount)return void this.platformUtilsService.showToast("error",this.i18nService.t("seatLimitReached"),this.i18nService.t("contactYourProvider"));if(!e&&this.allUsers.length===this.organization.seats&&(this.organization.planProductType===f.kv.Free||this.organization.planProductType===f.kv.TeamsStarter))return void(yield this.showSeatLimitReachedDialog());const o=(s=this.dialogService,r={data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,organizationUserId:null!=e?e.id:null,allOrganizationUserEmails:null!==(i=null===(t=this.allUsers)||void 0===t?void 0:t.map((e=>e.email)))&&void 0!==i?i:[],usesKeyConnector:null==e?void 0:e.usesKeyConnector,initialTab:n,numConfirmedMembers:this.confirmedCount}},s.open(we,r));var s,r;switch(yield(0,Pe.n)(o.closed)){case te.Deleted:this.removeUser(e);break;case te.Saved:case te.Revoked:case te.Restored:this.load()}}))}bulkRemove(){return ut(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(on.I,this.bulkRemoveModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkRevoke(){return ut(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return ut(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(e){return ut(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const n=Tn.open(this.dialogService,{organizationId:this.organization.id,users:this.getCheckedUsers(),isRevoking:e});yield(0,Ie.z)(n.closed),yield this.load()}))}bulkReinvite(){return ut(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),n=e.filter((e=>e.status===h.Dn.Invited));if(n.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const t=this.organizationUserService.postManyOrganizationUserReinvite(this.organization.id,n.map((e=>e.id)));this.showBulkStatus(e,n,t,this.i18nService.t("bulkReinviteMessage"))}catch(t){this.validationService.showError(t)}this.actionPromise=null}}))}bulkConfirm(){return ut(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Ee.$,this.bulkConfirmModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkEnableSM(){return ut(this,void 0,void 0,(function*(){const e=this.getCheckedUsers();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));const n=tn.open(this.dialogService,{orgId:this.organization.id,users:e});yield(0,Pe.n)(n.closed),this.selectAll(!1)}))}events(e){return ut(this,void 0,void 0,(function*(){yield(0,Oe.Z)(this.dialogService,{data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,entityId:e.id,showUser:!1,entity:"user"}})}))}resetPassword(e){return ut(this,void 0,void 0,(function*(){const[n]=yield this.modalService.openViewRef(jn,this.resetPasswordModalRef,(t=>{t.name=this.userNamePipe.transform(e),t.email=null!=e?e.email:null,t.organizationId=this.organization.id,t.id=null!=e?e.id:null,t.onPasswordReset.subscribe((()=>{n.close(),this.load()}))}))}))}removeUserConfirmationDialog(e){return ut(this,void 0,void 0,(function*(){const n=e.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";return!!(yield this.dialogService.openSimpleDialog({title:{key:"removeUserIdAccess",placeholders:[this.userNamePipe.transform(e)]},content:{key:n},type:"warning"}))&&(!(e.status>h.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}revokeUserConfirmationDialog(e){return ut(this,void 0,void 0,(function*(){return!!(yield this.dialogService.openSimpleDialog({title:{key:"revokeAccess",placeholders:[this.userNamePipe.transform(e)]},content:this.revokeWarningMessage(),acceptButtonText:{key:"revokeAccess"},type:"warning"}))&&(!(e.status>h.Dn.Invited&&!1===e.hasMasterPassword)||(yield this.noMasterPasswordConfirmationDialog(e)))}))}showBulkStatus(e,n,t,i){return ut(this,void 0,void 0,(function*(){const[o,s]=yield this.modalService.openViewRef(qn.C,this.bulkStatusModalRef,(e=>{e.loading=!0}));let r=!1;o.onShown.subscribe((()=>{r&&o.close()}));try{const r=yield t;if(o){const t=r.data.filter((e=>""!==e.error)).reduce(((e,n)=>Object.assign(Object.assign({},e),{[n.id]:n.error})),{}),o=n.reduce(((e,n)=>Object.assign(Object.assign({},e),{[n.id]:n})),{});s.users=e.map((e=>{var n;let s=null!==(n=t[e.id])&&void 0!==n?n:i;return o.hasOwnProperty(e.id)||(s=this.i18nService.t("bulkFilteredMessage")),{user:e,error:t.hasOwnProperty(e.id),message:s}})),s.loading=!1}}catch(a){r=!0,o.close()}}))}noMasterPasswordConfirmationDialog(e){return ut(this,void 0,void 0,(function*(){return this.dialogService.openSimpleDialog({title:{key:"removeOrgUserNoMasterPasswordTitle"},content:{key:"removeOrgUserNoMasterPasswordDesc",placeholders:[this.userNamePipe.transform(e)]},type:"warning"})}))}}Xt.ɵfac=function(e){return new(e||Xt)(T.Y36(En.s),T.Y36(Te.gz),T.Y36(q.D),T.Y36(Le.Z),T.Y36(C.P),T.Y36(Dn.$),T.Y36(Bn.o),T.Y36(Fn.R),T.Y36(In.d),T.Y36($n.P),T.Y36(Pn.$),T.Y36(Me.C),T.Y36(Ne.z),T.Y36(Kn._),T.Y36(Hn.b),T.Y36(m.Mn),T.Y36(Wn.M),T.Y36(k.t),T.Y36(S.x),T.Y36(Te.F0),T.Y36(v.lT),T.Y36(Vn.a),T.Y36(I.i))},Xt.ɵcmp=T.Xpm({type:Xt,selectors:[["app-org-people"]],viewQuery:function(e,n){if(1&e&&(T.Gf(lt,7,T.s_b),T.Gf(dt,7,T.s_b),T.Gf(pt,7,T.s_b),T.Gf(gt,7,T.s_b),T.Gf(mt,7,T.s_b),T.Gf(ht,7,T.s_b)),2&e){let e;T.iGM(e=T.CRH())&&(n.groupsModalRef=e.first),T.iGM(e=T.CRH())&&(n.confirmModalRef=e.first),T.iGM(e=T.CRH())&&(n.resetPasswordModalRef=e.first),T.iGM(e=T.CRH())&&(n.bulkStatusModalRef=e.first),T.iGM(e=T.CRH())&&(n.bulkConfirmModalRef=e.first),T.iGM(e=T.CRH())&&(n.bulkRemoveModalRef=e.first)}},features:[T.qOj],decls:76,vars:45,consts:[[1,"container","page-content"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[1,"tw-flex","tw-items-center","tw-justify-end","tw-space-x-3"],[3,"selected","selectedChange"],[3,"value"],["bitBadge","","badgeType","info",4,"ngIf"],[1,"tw-grow",3,"ngModel","placeholder","ngModelChange"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","badgeType","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell",""],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-close"],["body",""],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["bitRow","","alignContent","middle"],["bitCell","",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id","color"],[1,"tw-flex","tw-flex-col"],["type","button","bitLink",""],["bitBadge","","class","tw-text-xs","badgeType","secondary",4,"ngIf"],["bitBadge","","class","tw-text-xs","badgeType","warning",4,"ngIf"],["class","tw-text-sm tw-text-muted",4,"ngIf"],["badgeType","secondary",3,"items","maxItems",4,"ngIf"],["bitCell","",1,"tw-cursor-pointer","tw-text-sm","tw-text-muted",3,"click"],["bitCell","",1,"tw-text-muted"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitBadge","","badgeType","secondary",1,"tw-text-xs"],["bitBadge","","badgeType","warning",1,"tw-text-xs"],[1,"tw-text-sm","tw-text-muted"],["badgeType","secondary",3,"items","maxItems"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],[1,"tw-sr-only"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"]],template:function(e,n){1&e&&(T.TgZ(0,"div",0),T._uU(1,"\n  "),T.TgZ(2,"div",1),T._uU(3,"\n    "),T.TgZ(4,"h1"),T._uU(5),T.ALo(6,"i18n"),T.qZA(),T._uU(7,"\n    "),T.TgZ(8,"div",2),T._uU(9,"\n      "),T.TgZ(10,"bit-toggle-group",3),T.NdJ("selectedChange",(function(e){return n.filter(e)})),T.ALo(11,"i18n"),T._uU(12,"\n        "),T.TgZ(13,"bit-toggle",4),T._uU(14),T.ALo(15,"i18n"),T.YNc(16,Ut,2,1,"span",5),T._uU(17,"\n        "),T.qZA(),T._uU(18,"\n\n        "),T.TgZ(19,"bit-toggle",4),T._uU(20),T.ALo(21,"i18n"),T.YNc(22,ft,2,1,"span",5),T._uU(23,"\n        "),T.qZA(),T._uU(24,"\n\n        "),T.TgZ(25,"bit-toggle",4),T._uU(26),T.ALo(27,"i18n"),T.YNc(28,Zt,2,1,"span",5),T._uU(29,"\n        "),T.qZA(),T._uU(30,"\n\n        "),T.TgZ(31,"bit-toggle",4),T._uU(32),T.ALo(33,"i18n"),T.YNc(34,_t,2,1,"span",5),T._uU(35,"\n        "),T.qZA(),T._uU(36,"\n      "),T.qZA(),T._uU(37,"\n\n      "),T.TgZ(38,"bit-search",6),T.NdJ("ngModelChange",(function(e){return n.searchText=e})),T.ALo(39,"i18n"),T.qZA(),T._uU(40,"\n\n      "),T.TgZ(41,"button",7),T.NdJ("click",(function(){return n.invite()})),T._uU(42,"\n        "),T._UZ(43,"i",8),T._uU(44),T.ALo(45,"i18n"),T.qZA(),T._uU(46,"\n    "),T.qZA(),T._uU(47,"\n  "),T.qZA(),T._uU(48,"\n  "),T.YNc(49,bt,9,6,"ng-container",9),T._uU(50,"\n  "),T.YNc(51,Et,6,2,"ng-container",9),T.ALo(52,"search"),T._uU(53,"\n  "),T.YNc(54,Dt,0,0,"ng-template",null,10,T.W1O),T._uU(56,"\n  "),T.YNc(57,Bt,0,0,"ng-template",null,11,T.W1O),T._uU(59,"\n  "),T.YNc(60,Ft,0,0,"ng-template",null,12,T.W1O),T._uU(62,"\n  "),T.YNc(63,$t,0,0,"ng-template",null,13,T.W1O),T._uU(65,"\n  "),T.YNc(66,Kt,0,0,"ng-template",null,14,T.W1O),T._uU(68,"\n  "),T.YNc(69,Ht,0,0,"ng-template",null,15,T.W1O),T._uU(71,"\n  "),T.YNc(72,Wt,0,0,"ng-template",null,16,T.W1O),T._uU(74,"\n"),T.qZA(),T._uU(75,"\n")),2&e&&(T.xp6(5),T.Oqu(T.lcZ(6,20,"members")),T.xp6(5),T.Q6J("selected",n.status),T.uIk("aria-label",T.lcZ(11,22,"memberStatusFilter")),T.xp6(3),T.Q6J("value",null),T.xp6(1),T.hij("\n          ",T.lcZ(15,24,"all")," "),T.xp6(2),T.Q6J("ngIf",n.allCount),T.xp6(3),T.Q6J("value",n.userStatusType.Invited),T.xp6(1),T.hij("\n          ",T.lcZ(21,26,"invited"),"\n          "),T.xp6(2),T.Q6J("ngIf",n.invitedCount),T.xp6(3),T.Q6J("value",n.userStatusType.Accepted),T.xp6(1),T.hij("\n          ",T.lcZ(27,28,"needsConfirmation"),"\n          "),T.xp6(2),T.Q6J("ngIf",n.acceptedCount),T.xp6(3),T.Q6J("value",n.userStatusType.Revoked),T.xp6(1),T.hij("\n          ",T.lcZ(33,30,"revoked"),"\n          "),T.xp6(2),T.Q6J("ngIf",n.revokedCount),T.xp6(4),T.Q6J("ngModel",n.searchText)("placeholder",T.lcZ(39,32,"searchMembers")),T.xp6(6),T.hij("\n        ",T.lcZ(45,34,"inviteMember"),"\n      "),T.xp6(5),T.Q6J("ngIf",n.loading),T.xp6(2),T.Q6J("ngIf",!n.loading&&(n.isPaging()?n.pagedUsers:T.G7q(52,36,T.WLB(42,Vt,n.users,n.searchText)))))},dependencies:[P.sg,P.O5,a.Wl,a.JJ,a.On,Xn.Ry,M.B,Ln.O,Be.A,et.b,J.l,R.r,Q.b,B.Q,nt._,tt.M,it.t,ot.e,st.n,$e.a,Ke.Y,He.v,$e.f,rt.f,at.n,ct.g,P.Ov,W.C,Me.C,Ne.z,We.t],encapsulation:2});const ei=[{path:"",component:Xt,canActivate:[qe.G],data:{titleId:"members",organizationPermissions:m.tt}}];class ni{}ni.ɵfac=function(e){return new(e||ni)},ni.ɵmod=T.oAB({type:ni}),ni.ɵinj=T.cJS({imports:[Te.Bz.forChild(ei),Te.Bz]});class ti{}ti.ɵfac=function(e){return new(e||ti)},ti.ɵmod=T.oAB({type:ti}),ti.ɵinj=T.cJS({imports:[s.P,o.f,ni,ye,i.ey]})}}]);
//# sourceMappingURL=16.8160b1d9a179e10338e9.js.map