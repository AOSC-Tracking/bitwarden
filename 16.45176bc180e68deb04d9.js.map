{"version":3,"file":"16.45176bc180e68deb04d9.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/validators/comma-separated-emails.validator.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/validators/org-without-additional-seat-limit-reached-with-upgrade-path.validator.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/validators/org-without-additional-seat-limit-reached-without-upgrade-path.validator.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/nested-checkbox.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/nested-checkbox.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/member-dialog.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/member-dialog.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/member-dialog/member-dialog.module.ts","webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/abstractions/organization-user/requests/organization-user-confirm.request.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/core/views/organization-user.view.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/bulk/bulk-enable-sm-dialog.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/bulk/bulk-enable-sm-dialog.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/bulk/bulk-restore-revoke.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/bulk/bulk-restore-revoke.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/reset-password.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/components/reset-password.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/people.component.html","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/people.component.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/members-routing.module.ts","webpack://@bitwarden/web-vault/./src/app/admin-console/organizations/members/members.module.ts"],"sourcesContent":["import { AbstractControl, ValidationErrors, Validators } from \"@angular/forms\";\n\nfunction validateEmails(emails: string) {\n  return (\n    emails\n      .split(\",\")\n      .map((email) => Validators.email(<AbstractControl>{ value: email.trim() }))\n      .find((_) => _ !== null) === undefined\n  );\n}\n\nexport function commaSeparatedEmails(control: AbstractControl): ValidationErrors | null {\n  if (control.value === \"\" || !control.value || validateEmails(control.value)) {\n    return null;\n  }\n  return { multipleEmails: { message: \"multipleInputEmails\" } };\n}\n","import { AbstractControl, ValidationErrors, ValidatorFn } from \"@angular/forms\";\n\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { ProductType } from \"@bitwarden/common/enums\";\n\n/**\n * If the organization doesn't allow additional seat options, this checks if the seat limit has been reached when adding\n * new users\n * @param organization An object representing the organization\n * @param allOrganizationUserEmails An array of strings with existing user email addresses\n * @param errorMessage A localized string to display if validation fails\n * @returns A function that validates an `AbstractControl` and returns `ValidationErrors` or `null`\n */\nexport function orgWithoutAdditionalSeatLimitReachedWithUpgradePathValidator(\n  organization: Organization,\n  allOrganizationUserEmails: string[],\n  errorMessage: string\n): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    if (control.value === \"\" || !control.value) {\n      return null;\n    }\n\n    const newEmailsToAdd = Array.from(\n      new Set(\n        control.value\n          .split(\",\")\n          .filter(\n            (newEmailToAdd: string) =>\n              newEmailToAdd &&\n              newEmailToAdd.trim() !== \"\" &&\n              !allOrganizationUserEmails.some(\n                (existingEmail) => existingEmail === newEmailToAdd.trim()\n              )\n          )\n      )\n    );\n\n    return organization.planProductType === ProductType.Free &&\n      allOrganizationUserEmails.length + newEmailsToAdd.length > organization.seats\n      ? { freePlanLimitReached: { message: errorMessage } }\n      : null;\n  };\n}\n","import { AbstractControl, ValidationErrors, ValidatorFn } from \"@angular/forms\";\n\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { ProductType } from \"@bitwarden/common/enums\";\n\n/**\n * If the organization doesn't allow additional seat options, this checks if the seat limit has been reached when adding\n * new users\n * @param organization An object representing the organization\n * @param allOrganizationUserEmails An array of strings with existing user email addresses\n * @param errorMessage A localized string to display if validation fails\n * @returns A function that validates an `AbstractControl` and returns `ValidationErrors` or `null`\n */\nexport function orgWithoutAdditionalSeatLimitReachedWithoutUpgradePathValidator(\n  organization: Organization,\n  allOrganizationUserEmails: string[],\n  errorMessage: string\n): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    if (control.value === \"\" || !control.value) {\n      return null;\n    }\n\n    const newEmailsToAdd = Array.from(\n      new Set(\n        control.value\n          .split(\",\")\n          .filter(\n            (newEmailToAdd: string) =>\n              newEmailToAdd &&\n              newEmailToAdd.trim() !== \"\" &&\n              !allOrganizationUserEmails.some(\n                (existingEmail) => existingEmail === newEmailToAdd.trim()\n              )\n          )\n      )\n    );\n\n    return (organization.planProductType === ProductType.Families ||\n      organization.planProductType === ProductType.TeamsStarter) &&\n      allOrganizationUserEmails.length + newEmailsToAdd.length > organization.seats\n      ? { orgSeatLimitReachedWithoutUpgradePath: { message: errorMessage } }\n      : null;\n  };\n}\n","<div [formGroup]=\"checkboxes\">\n  <input\n    type=\"checkbox\"\n    [name]=\"pascalize(parentId)\"\n    [id]=\"parentId\"\n    [formControlName]=\"parentId\"\n    [indeterminate]=\"parentIndeterminate\"\n  />\n  <label class=\"!tw-font-normal\" [for]=\"parentId\">\n    {{ parentId | i18n }}\n  </label>\n  <div class=\"tw-ml-6\">\n    <ng-container *ngFor=\"let c of checkboxes.controls | keyvalue; trackBy: key\">\n      <div class=\"\" *ngIf=\"c.key != parentId\">\n        <input\n          class=\"\"\n          type=\"checkbox\"\n          [name]=\"pascalize(c.key)\"\n          [id]=\"c.key\"\n          [formControl]=\"c.value\"\n          (change)=\"onChildCheck()\"\n        />\n        <label class=\"!tw-font-normal\" [for]=\"c.key\">\n          {{ c.key | i18n }}\n        </label>\n      </div>\n    </ng-container>\n  </div>\n</div>\n","import { KeyValue } from \"@angular/common\";\nimport { Component, EventEmitter, Input, Output, OnInit, OnDestroy } from \"@angular/core\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\n\n@Component({\n  selector: \"app-nested-checkbox\",\n  templateUrl: \"nested-checkbox.component.html\",\n})\nexport class NestedCheckboxComponent implements OnInit, OnDestroy {\n  private destroy$ = new Subject<void>();\n\n  @Input() parentId: string;\n  @Input() checkboxes: FormGroup<Record<string, FormControl<boolean>>>;\n  @Output() onSavedUser = new EventEmitter();\n  @Output() onDeletedUser = new EventEmitter();\n\n  get parentIndeterminate() {\n    return (\n      this.children.some(([key, control]) => control.value == true) &&\n      !this.children.every(([key, control]) => control.value == true)\n    );\n  }\n\n  ngOnInit(): void {\n    this.checkboxes.controls[this.parentId].valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((value) => {\n        Object.values(this.checkboxes.controls).forEach((control) =>\n          control.setValue(value, { emitEvent: false })\n        );\n      });\n  }\n\n  private get parentCheckbox() {\n    return this.checkboxes.controls[this.parentId];\n  }\n\n  get children() {\n    return Object.entries(this.checkboxes.controls).filter(([key, value]) => key != this.parentId);\n  }\n\n  protected onChildCheck() {\n    const parentChecked = this.children.every(([key, value]) => value.value == true);\n    this.parentCheckbox.setValue(parentChecked, { emitEvent: false });\n  }\n\n  protected key(index: number, item: KeyValue<string, FormControl<boolean>>) {\n    return item.key;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  pascalize(s: string) {\n    return Utils.camelToPascalCase(s);\n  }\n}\n","import { DIALOG_DATA, DialogConfig, DialogRef } from \"@angular/cdk/dialog\";\nimport { Component, Inject, OnDestroy, OnInit } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { combineLatest, of, shareReplay, Subject, switchMap, takeUntil } from \"rxjs\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserService } from \"@bitwarden/common/admin-console/abstractions/organization-user/organization-user.service\";\nimport {\n  OrganizationUserStatusType,\n  OrganizationUserType,\n} from \"@bitwarden/common/admin-console/enums\";\nimport { PermissionsApi } from \"@bitwarden/common/admin-console/models/api/permissions.api\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { ProductType } from \"@bitwarden/common/enums\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/platform/abstractions/config/config.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { CollectionView } from \"@bitwarden/common/vault/models/view/collection.view\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { flagEnabled } from \"../../../../../../utils/flags\";\nimport { CollectionAdminService } from \"../../../../../vault/core/collection-admin.service\";\nimport {\n  CollectionAccessSelectionView,\n  GroupService,\n  GroupView,\n  OrganizationUserAdminView,\n  UserAdminService,\n} from \"../../../core\";\nimport {\n  AccessItemType,\n  AccessItemValue,\n  AccessItemView,\n  convertToPermission,\n  convertToSelectionView,\n  PermissionMode,\n} from \"../../../shared/components/access-selector\";\n\nimport { commaSeparatedEmails } from \"./validators/comma-separated-emails.validator\";\nimport { orgWithoutAdditionalSeatLimitReachedWithUpgradePathValidator } from \"./validators/org-without-additional-seat-limit-reached-with-upgrade-path.validator\";\nimport { orgWithoutAdditionalSeatLimitReachedWithoutUpgradePathValidator } from \"./validators/org-without-additional-seat-limit-reached-without-upgrade-path.validator\";\n\nexport enum MemberDialogTab {\n  Role = 0,\n  Groups = 1,\n  Collections = 2,\n}\n\nexport interface MemberDialogParams {\n  name: string;\n  organizationId: string;\n  organizationUserId: string;\n  allOrganizationUserEmails: string[];\n  usesKeyConnector: boolean;\n  initialTab?: MemberDialogTab;\n}\n\nexport enum MemberDialogResult {\n  Saved = \"saved\",\n  Canceled = \"canceled\",\n  Deleted = \"deleted\",\n  Revoked = \"revoked\",\n  Restored = \"restored\",\n}\n\n@Component({\n  templateUrl: \"member-dialog.component.html\",\n})\nexport class MemberDialogComponent implements OnInit, OnDestroy {\n  protected flexibleCollectionsEnabled$ = this.configService.getFeatureFlag$(\n    FeatureFlag.FlexibleCollections,\n    false\n  );\n\n  loading = true;\n  editMode = false;\n  isRevoked = false;\n  title: string;\n  access: \"all\" | \"selected\" = \"selected\";\n  collections: CollectionView[] = [];\n  organizationUserType = OrganizationUserType;\n  canUseCustomPermissions: boolean;\n  PermissionMode = PermissionMode;\n  canUseSecretsManager: boolean;\n  showNoMasterPasswordWarning = false;\n\n  protected organization: Organization;\n  protected collectionAccessItems: AccessItemView[] = [];\n  protected groupAccessItems: AccessItemView[] = [];\n  protected tabIndex: MemberDialogTab;\n  protected formGroup = this.formBuilder.group({\n    emails: [\"\", { updateOn: \"blur\" }],\n    type: OrganizationUserType.User,\n    externalId: this.formBuilder.control({ value: \"\", disabled: true }),\n    accessAllCollections: false,\n    accessSecretsManager: false,\n    access: [[] as AccessItemValue[]],\n    groups: [[] as AccessItemValue[]],\n  });\n\n  protected permissionsGroup = this.formBuilder.group({\n    manageAssignedCollectionsGroup: this.formBuilder.group<Record<string, boolean>>({\n      manageAssignedCollections: false,\n      editAssignedCollections: false,\n      deleteAssignedCollections: false,\n    }),\n    manageAllCollectionsGroup: this.formBuilder.group<Record<string, boolean>>({\n      manageAllCollections: false,\n      createNewCollections: false,\n      editAnyCollection: false,\n      deleteAnyCollection: false,\n    }),\n    accessEventLogs: false,\n    accessImportExport: false,\n    accessReports: false,\n    manageGroups: false,\n    manageSso: false,\n    managePolicies: false,\n    manageUsers: false,\n    manageResetPassword: false,\n  });\n\n  private destroy$ = new Subject<void>();\n\n  get customUserTypeSelected(): boolean {\n    return this.formGroup.value.type === OrganizationUserType.Custom;\n  }\n\n  get accessAllCollections(): boolean {\n    return this.formGroup.value.accessAllCollections;\n  }\n\n  constructor(\n    @Inject(DIALOG_DATA) protected params: MemberDialogParams,\n    private dialogRef: DialogRef<MemberDialogResult>,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private organizationService: OrganizationService,\n    private formBuilder: FormBuilder,\n    // TODO: We should really look into consolidating naming conventions for these services\n    private collectionAdminService: CollectionAdminService,\n    private groupService: GroupService,\n    private userService: UserAdminService,\n    private organizationUserService: OrganizationUserService,\n    private dialogService: DialogService,\n    private configService: ConfigServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    this.editMode = this.params.organizationUserId != null;\n    this.tabIndex = this.params.initialTab ?? MemberDialogTab.Role;\n    this.title = this.i18nService.t(this.editMode ? \"editMember\" : \"inviteMember\");\n\n    const organization$ = of(this.organizationService.get(this.params.organizationId)).pipe(\n      shareReplay({ refCount: true, bufferSize: 1 })\n    );\n    const groups$ = organization$.pipe(\n      switchMap((organization) => {\n        if (!organization.useGroups) {\n          return of([] as GroupView[]);\n        }\n\n        return this.groupService.getAll(this.params.organizationId);\n      })\n    );\n\n    combineLatest({\n      organization: organization$,\n      collections: this.collectionAdminService.getAll(this.params.organizationId),\n      userDetails: this.params.organizationUserId\n        ? this.userService.get(this.params.organizationId, this.params.organizationUserId)\n        : of(null),\n      groups: groups$,\n    })\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(({ organization, collections, userDetails, groups }) => {\n        this.organization = organization;\n        this.canUseCustomPermissions = organization.useCustomPermissions;\n        this.canUseSecretsManager = organization.useSecretsManager && flagEnabled(\"secretsManager\");\n\n        const emailsControlValidators = [\n          Validators.required,\n          commaSeparatedEmails,\n          orgWithoutAdditionalSeatLimitReachedWithUpgradePathValidator(\n            this.organization,\n            this.params.allOrganizationUserEmails,\n            this.i18nService.t(\"subscriptionFreePlan\", organization.seats)\n          ),\n          orgWithoutAdditionalSeatLimitReachedWithoutUpgradePathValidator(\n            this.organization,\n            this.params.allOrganizationUserEmails,\n            this.i18nService.t(\"subscriptionFamiliesPlan\", organization.seats)\n          ),\n        ];\n\n        const emailsControl = this.formGroup.get(\"emails\");\n        emailsControl.setValidators(emailsControlValidators);\n        emailsControl.updateValueAndValidity();\n\n        this.collectionAccessItems = [].concat(\n          collections.map((c) => mapCollectionToAccessItemView(c))\n        );\n\n        this.groupAccessItems = [].concat(\n          groups.map<AccessItemView>((g) => mapGroupToAccessItemView(g))\n        );\n\n        if (this.params.organizationUserId) {\n          if (!userDetails) {\n            throw new Error(\"Could not find user to edit.\");\n          }\n          this.isRevoked = userDetails.status === OrganizationUserStatusType.Revoked;\n          this.showNoMasterPasswordWarning =\n            userDetails.status > OrganizationUserStatusType.Invited &&\n            userDetails.hasMasterPassword === false;\n          const assignedCollectionsPermissions = {\n            editAssignedCollections: userDetails.permissions.editAssignedCollections,\n            deleteAssignedCollections: userDetails.permissions.deleteAssignedCollections,\n            manageAssignedCollections:\n              userDetails.permissions.editAssignedCollections &&\n              userDetails.permissions.deleteAssignedCollections,\n          };\n          const allCollectionsPermissions = {\n            createNewCollections: userDetails.permissions.createNewCollections,\n            editAnyCollection: userDetails.permissions.editAnyCollection,\n            deleteAnyCollection: userDetails.permissions.deleteAnyCollection,\n            manageAllCollections:\n              userDetails.permissions.createNewCollections &&\n              userDetails.permissions.editAnyCollection &&\n              userDetails.permissions.deleteAnyCollection,\n          };\n          if (userDetails.type === OrganizationUserType.Custom) {\n            this.permissionsGroup.patchValue({\n              accessEventLogs: userDetails.permissions.accessEventLogs,\n              accessImportExport: userDetails.permissions.accessImportExport,\n              accessReports: userDetails.permissions.accessReports,\n              manageGroups: userDetails.permissions.manageGroups,\n              manageSso: userDetails.permissions.manageSso,\n              managePolicies: userDetails.permissions.managePolicies,\n              manageUsers: userDetails.permissions.manageUsers,\n              manageResetPassword: userDetails.permissions.manageResetPassword,\n              manageAssignedCollectionsGroup: assignedCollectionsPermissions,\n              manageAllCollectionsGroup: allCollectionsPermissions,\n            });\n          }\n\n          const collectionsFromGroups = groups\n            .filter((group) => userDetails.groups.includes(group.id))\n            .flatMap((group) =>\n              group.collections.map((accessSelection) => {\n                const collection = collections.find((c) => c.id === accessSelection.id);\n                return { group, collection, accessSelection };\n              })\n            );\n\n          this.collectionAccessItems = this.collectionAccessItems.concat(\n            collectionsFromGroups.map(({ collection, accessSelection, group }) =>\n              mapCollectionToAccessItemView(collection, accessSelection, group)\n            )\n          );\n\n          const accessSelections = mapToAccessSelections(userDetails);\n          const groupAccessSelections = mapToGroupAccessSelections(userDetails.groups);\n\n          this.formGroup.removeControl(\"emails\");\n          this.formGroup.patchValue({\n            type: userDetails.type,\n            externalId: userDetails.externalId,\n            accessAllCollections: userDetails.accessAll,\n            access: accessSelections,\n            accessSecretsManager: userDetails.accessSecretsManager,\n            groups: groupAccessSelections,\n          });\n        }\n\n        this.loading = false;\n      });\n  }\n\n  check(c: CollectionView, select?: boolean) {\n    (c as any).checked = select == null ? !(c as any).checked : select;\n    if (!(c as any).checked) {\n      c.readOnly = false;\n    }\n  }\n\n  selectAll(select: boolean) {\n    this.collections.forEach((c) => this.check(c, select));\n  }\n\n  setRequestPermissions(p: PermissionsApi, clearPermissions: boolean): PermissionsApi {\n    if (clearPermissions) {\n      return new PermissionsApi();\n    }\n    const partialPermissions: Partial<PermissionsApi> = {\n      accessEventLogs: this.permissionsGroup.value.accessEventLogs,\n      accessImportExport: this.permissionsGroup.value.accessImportExport,\n      accessReports: this.permissionsGroup.value.accessReports,\n      manageGroups: this.permissionsGroup.value.manageGroups,\n      manageSso: this.permissionsGroup.value.manageSso,\n      managePolicies: this.permissionsGroup.value.managePolicies,\n      manageUsers: this.permissionsGroup.value.manageUsers,\n      manageResetPassword: this.permissionsGroup.value.manageResetPassword,\n      createNewCollections:\n        this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,\n      editAnyCollection: this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,\n      deleteAnyCollection:\n        this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,\n      editAssignedCollections:\n        this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,\n      deleteAssignedCollections:\n        this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections,\n    };\n\n    return Object.assign(p, partialPermissions);\n  }\n\n  handleDependentPermissions() {\n    // Manage Password Reset (Account Recovery) must have Manage Users enabled\n    if (\n      this.permissionsGroup.value.manageResetPassword &&\n      !this.permissionsGroup.value.manageUsers\n    ) {\n      this.permissionsGroup.value.manageUsers = true;\n      (document.getElementById(\"manageUsers\") as HTMLInputElement).checked = true;\n      this.platformUtilsService.showToast(\n        \"info\",\n        null,\n        this.i18nService.t(\"accountRecoveryManageUsers\")\n      );\n    }\n  }\n\n  submit = async () => {\n    this.formGroup.markAllAsTouched();\n\n    if (this.formGroup.invalid) {\n      if (this.tabIndex !== MemberDialogTab.Role) {\n        this.platformUtilsService.showToast(\n          \"error\",\n          null,\n          this.i18nService.t(\"fieldOnTabRequiresAttention\", this.i18nService.t(\"role\"))\n        );\n      }\n      return;\n    }\n\n    if (!this.canUseCustomPermissions && this.customUserTypeSelected) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"customNonEnterpriseError\")\n      );\n      return;\n    }\n\n    const userView = new OrganizationUserAdminView();\n    userView.id = this.params.organizationUserId;\n    userView.organizationId = this.params.organizationId;\n    userView.accessAll = this.accessAllCollections;\n    userView.type = this.formGroup.value.type;\n    userView.permissions = this.setRequestPermissions(\n      userView.permissions ?? new PermissionsApi(),\n      userView.type !== OrganizationUserType.Custom\n    );\n    userView.collections = this.formGroup.value.access\n      .filter((v) => v.type === AccessItemType.Collection)\n      .map(convertToSelectionView);\n    userView.groups = this.formGroup.value.groups.map((m) => m.id);\n    userView.accessSecretsManager = this.formGroup.value.accessSecretsManager;\n\n    if (this.editMode) {\n      await this.userService.save(userView);\n    } else {\n      userView.id = this.params.organizationUserId;\n      const maxEmailsCount =\n        this.organization.planProductType === ProductType.TeamsStarter ? 10 : 20;\n      const emails = [...new Set(this.formGroup.value.emails.trim().split(/\\s*,\\s*/))];\n      if (emails.length > maxEmailsCount) {\n        this.formGroup.controls.emails.setErrors({\n          tooManyEmails: { message: this.i18nService.t(\"tooManyEmails\", maxEmailsCount) },\n        });\n        return;\n      }\n      await this.userService.invite(emails, userView);\n    }\n\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(this.editMode ? \"editedUserId\" : \"invitedUsers\", this.params.name)\n    );\n    this.close(MemberDialogResult.Saved);\n  };\n\n  delete = async () => {\n    if (!this.editMode) {\n      return;\n    }\n\n    const message = this.params.usesKeyConnector\n      ? \"removeUserConfirmationKeyConnector\"\n      : \"removeOrgUserConfirmation\";\n\n    let confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"removeUserIdAccess\", placeholders: [this.params.name] },\n      content: { key: message },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    if (this.showNoMasterPasswordWarning) {\n      confirmed = await this.noMasterPasswordConfirmationDialog();\n\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    await this.organizationUserService.deleteOrganizationUser(\n      this.params.organizationId,\n      this.params.organizationUserId\n    );\n\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"removedUserId\", this.params.name)\n    );\n    this.close(MemberDialogResult.Deleted);\n  };\n\n  revoke = async () => {\n    if (!this.editMode) {\n      return;\n    }\n\n    let confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"revokeUserId\", placeholders: [this.params.name] },\n      content: { key: \"revokeUserConfirmation\" },\n      acceptButtonText: { key: \"revokeAccess\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    if (this.showNoMasterPasswordWarning) {\n      confirmed = await this.noMasterPasswordConfirmationDialog();\n\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    await this.organizationUserService.revokeOrganizationUser(\n      this.params.organizationId,\n      this.params.organizationUserId\n    );\n\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"revokedUserId\", this.params.name)\n    );\n    this.isRevoked = true;\n    this.close(MemberDialogResult.Revoked);\n  };\n\n  restore = async () => {\n    if (!this.editMode) {\n      return;\n    }\n\n    await this.organizationUserService.restoreOrganizationUser(\n      this.params.organizationId,\n      this.params.organizationUserId\n    );\n\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"restoredUserId\", this.params.name)\n    );\n    this.isRevoked = false;\n    this.close(MemberDialogResult.Restored);\n  };\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  protected async cancel() {\n    this.close(MemberDialogResult.Canceled);\n  }\n\n  private close(result: MemberDialogResult) {\n    this.dialogRef.close(result);\n  }\n\n  private noMasterPasswordConfirmationDialog() {\n    return this.dialogService.openSimpleDialog({\n      title: {\n        key: \"removeOrgUserNoMasterPasswordTitle\",\n      },\n      content: {\n        key: \"removeOrgUserNoMasterPasswordDesc\",\n        placeholders: [this.params.name],\n      },\n      type: \"warning\",\n    });\n  }\n\n  protected readonly ProductType = ProductType;\n}\n\nfunction mapCollectionToAccessItemView(\n  collection: CollectionView,\n  accessSelection?: CollectionAccessSelectionView,\n  group?: GroupView\n): AccessItemView {\n  return {\n    type: AccessItemType.Collection,\n    id: group ? `${collection.id}-${group.id}` : collection.id,\n    labelName: collection.name,\n    listName: collection.name,\n    readonly: group !== undefined,\n    readonlyPermission: accessSelection ? convertToPermission(accessSelection) : undefined,\n    viaGroupName: group?.name,\n  };\n}\n\nfunction mapGroupToAccessItemView(group: GroupView): AccessItemView {\n  return {\n    type: AccessItemType.Group,\n    id: group.id,\n    labelName: group.name,\n    listName: group.name,\n  };\n}\n\nfunction mapToAccessSelections(user: OrganizationUserAdminView): AccessItemValue[] {\n  if (user == undefined) {\n    return [];\n  }\n  return [].concat(\n    user.collections.map<AccessItemValue>((selection) => ({\n      id: selection.id,\n      type: AccessItemType.Collection,\n      permission: convertToPermission(selection),\n    }))\n  );\n}\n\nfunction mapToGroupAccessSelections(groups: string[]): AccessItemValue[] {\n  if (groups == undefined) {\n    return [];\n  }\n  return [].concat(\n    groups.map((groupId) => ({\n      id: groupId,\n      type: AccessItemType.Group,\n    }))\n  );\n}\n\n/**\n * Strongly typed helper to open a UserDialog\n * @param dialogService Instance of the dialog service that will be used to open the dialog\n * @param config Configuration for the dialog\n */\nexport function openUserAddEditDialog(\n  dialogService: DialogService,\n  config: DialogConfig<MemberDialogParams>\n) {\n  return dialogService.open<MemberDialogResult, MemberDialogParams>(MemberDialogComponent, config);\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"submit\">\n  <bit-dialog [disablePadding]=\"!loading\" dialogSize=\"large\">\n    <span bitDialogTitle>\n      {{ title }}\n      <span class=\"tw-text-sm tw-normal-case tw-text-muted\" *ngIf=\"!loading && params.name\">{{\n        params.name\n      }}</span>\n      <span bitBadge badgeType=\"secondary\" *ngIf=\"isRevoked\">{{ \"revoked\" | i18n }}</span>\n    </span>\n    <div bitDialogContent>\n      <ng-container *ngIf=\"loading\">\n        <i\n          class=\"bwi bwi-spinner bwi-spin text-muted\"\n          title=\"{{ 'loading' | i18n }}\"\n          aria-hidden=\"true\"\n        ></i>\n        <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n      </ng-container>\n      <bit-tab-group *ngIf=\"!loading\" [(selectedIndex)]=\"tabIndex\">\n        <bit-tab [label]=\"'role' | i18n\">\n          <ng-container *ngIf=\"!editMode\">\n            <p>{{ \"inviteUserDesc\" | i18n }}</p>\n            <bit-form-field>\n              <bit-label>{{ \"email\" | i18n }}</bit-label>\n              <input id=\"emails\" type=\"text\" appAutoFocus bitInput formControlName=\"emails\" />\n              <bit-hint>{{\n                \"inviteMultipleEmailDesc\"\n                  | i18n : (organization.planProductType === ProductType.TeamsStarter ? \"10\" : \"20\")\n              }}</bit-hint>\n            </bit-form-field>\n          </ng-container>\n          <fieldset role=\"radiogroup\" aria-labelledby=\"roleGroupLabel\" class=\"tw-mb-6\">\n            <legend\n              id=\"roleGroupLabel\"\n              class=\"tw-mb-2 tw-block tw-text-base tw-font-semibold tw-text-main\"\n            >\n              {{ \"memberRole\" | i18n }}\n              <a\n                target=\"_blank\"\n                rel=\"noopener\"\n                appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n                href=\"https://bitwarden.com/help/user-types-access-control/\"\n              >\n                <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n              </a>\n            </legend>\n            <div class=\"tw-mb-2 tw-flex tw-items-baseline\">\n              <input\n                type=\"radio\"\n                id=\"userTypeUser\"\n                [value]=\"organizationUserType.User\"\n                class=\"tw-relative tw-bottom-[-1px] tw-mr-2\"\n                formControlName=\"type\"\n                name=\"type\"\n              />\n              <label class=\"tw-m-0\" for=\"userTypeUser\">\n                {{ \"user\" | i18n }}\n                <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                  {{ \"userDesc\" | i18n }}\n                </div>\n              </label>\n            </div>\n            <div class=\"tw-mb-2 tw-flex tw-items-baseline\">\n              <input\n                type=\"radio\"\n                id=\"userTypeManager\"\n                [value]=\"organizationUserType.Manager\"\n                class=\"tw-relative tw-bottom-[-1px] tw-mr-2\"\n                formControlName=\"type\"\n                name=\"type\"\n              />\n              <label class=\"tw-m-0\" for=\"userTypeManager\">\n                {{ \"manager\" | i18n }}\n                <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                  {{ \"managerDesc\" | i18n }}\n                </div>\n              </label>\n            </div>\n            <div class=\"tw-mb-2 tw-flex tw-items-baseline\">\n              <input\n                type=\"radio\"\n                id=\"userTypeAdmin\"\n                [value]=\"organizationUserType.Admin\"\n                class=\"tw-relative tw-bottom-[-1px] tw-mr-2\"\n                formControlName=\"type\"\n                name=\"type\"\n              />\n              <label class=\"tw-m-0\" for=\"userTypeAdmin\">\n                {{ \"admin\" | i18n }}\n                <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                  {{ \"adminDesc\" | i18n }}\n                </div>\n              </label>\n            </div>\n            <div class=\"tw-mb-2 tw-flex tw-items-baseline\">\n              <input\n                type=\"radio\"\n                id=\"userTypeOwner\"\n                [value]=\"organizationUserType.Owner\"\n                class=\"tw-relative tw-bottom-[-1px] tw-mr-2\"\n                formControlName=\"type\"\n                name=\"type\"\n              />\n              <label class=\"tw-m-0\" for=\"userTypeOwner\">\n                {{ \"owner\" | i18n }}\n                <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                  {{ \"ownerDesc\" | i18n }}\n                </div>\n              </label>\n            </div>\n            <div class=\"tw-flex tw-items-baseline\">\n              <input\n                type=\"radio\"\n                id=\"userTypeCustom\"\n                [value]=\"organizationUserType.Custom\"\n                formControlName=\"type\"\n                name=\"type\"\n                class=\"tw-relative tw-bottom-[-1px] tw-mr-2\"\n                [attr.disabled]=\"!canUseCustomPermissions || null\"\n              />\n              <label class=\"tw-m-0\" for=\"userTypeCustom\">\n                {{ \"custom\" | i18n }}\n                <ng-container *ngIf=\"!canUseCustomPermissions; else enterprise\">\n                  <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                    {{ \"customDescNonEnterpriseStart\" | i18n\n                    }}<a href=\"https://bitwarden.com/contact/\" target=\"_blank\">{{\n                      \"customDescNonEnterpriseLink\" | i18n\n                    }}</a\n                    >{{ \"customDescNonEnterpriseEnd\" | i18n }}\n                  </div>\n                </ng-container>\n                <ng-template #enterprise>\n                  <div class=\"text-base tw-block tw-font-normal tw-text-muted\">\n                    {{ \"customDesc\" | i18n }}\n                  </div>\n                </ng-template>\n              </label>\n            </div>\n          </fieldset>\n          <ng-container *ngIf=\"customUserTypeSelected\">\n            <h3 class=\"mt-4 d-flex tw-font-semibold\">\n              {{ \"permissions\" | i18n }}\n            </h3>\n            <div class=\"row\" [formGroup]=\"permissionsGroup\">\n              <div class=\"col-6\">\n                <div class=\"mb-3\">\n                  <label class=\"tw-font-semibold\">{{ \"managerPermissions\" | i18n }}</label>\n                  <hr class=\"tw-mb-2 tw-mr-2 tw-mt-0\" />\n                  <app-nested-checkbox\n                    parentId=\"manageAssignedCollections\"\n                    [checkboxes]=\"permissionsGroup.controls.manageAssignedCollectionsGroup\"\n                  >\n                  </app-nested-checkbox>\n                </div>\n              </div>\n              <div class=\"col-6\">\n                <div class=\"mb-3\">\n                  <label class=\"tw-font-semibold\">{{ \"adminPermissions\" | i18n }}</label>\n                  <hr class=\"tw-mb-2 tw-mr-2 tw-mt-0\" />\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"accessEventLogs\"\n                      id=\"accessEventLogs\"\n                      formControlName=\"accessEventLogs\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"accessEventLogs\">\n                      {{ \"accessEventLogs\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"accessImportExport\"\n                      id=\"accessImportExport\"\n                      formControlName=\"accessImportExport\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"accessImportExport\">\n                      {{ \"accessImportExport\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"accessReports\"\n                      id=\"accessReports\"\n                      formControlName=\"accessReports\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"accessReports\">\n                      {{ \"accessReports\" | i18n }}\n                    </label>\n                  </div>\n                  <app-nested-checkbox\n                    parentId=\"manageAllCollections\"\n                    [checkboxes]=\"permissionsGroup.controls.manageAllCollectionsGroup\"\n                  >\n                  </app-nested-checkbox>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"manageGroups\"\n                      id=\"manageGroups\"\n                      formControlName=\"manageGroups\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"manageGroups\">\n                      {{ \"manageGroups\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"manageSso\"\n                      id=\"manageSso\"\n                      formControlName=\"manageSso\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"manageSso\">\n                      {{ \"manageSso\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"managePolicies\"\n                      id=\"managePolicies\"\n                      formControlName=\"managePolicies\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"managePolicies\">\n                      {{ \"managePolicies\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"manageUsers\"\n                      id=\"manageUsers\"\n                      formControlName=\"manageUsers\"\n                      (change)=\"handleDependentPermissions()\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"manageUsers\">\n                      {{ \"manageUsers\" | i18n }}\n                    </label>\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"manageResetPassword\"\n                      id=\"manageResetPassword\"\n                      formControlName=\"manageResetPassword\"\n                      (change)=\"handleDependentPermissions()\"\n                    />\n                    <label class=\"!tw-font-normal\" for=\"manageResetPassword\">\n                      {{ \"manageAccountRecovery\" | i18n }}\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-container>\n          <ng-container *ngIf=\"canUseSecretsManager\">\n            <h3 class=\"mt-4\">\n              {{ \"secretsManager\" | i18n }}\n              <a\n                target=\"_blank\"\n                rel=\"noopener\"\n                appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n                href=\"https://bitwarden.com/help/manage-your-organization/#access-to-secrets-manager\"\n              >\n                <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n              </a>\n            </h3>\n            <p class=\"tw-text-muted\">{{ \"secretsManagerAccessDescription\" | i18n }}</p>\n            <bit-form-control>\n              <input type=\"checkbox\" bitCheckbox formControlName=\"accessSecretsManager\" />\n              <bit-label>\n                {{ \"userAccessSecretsManagerGA\" | i18n }}\n              </bit-label>\n            </bit-form-control>\n          </ng-container>\n          <bit-form-field>\n            <bit-label>{{ \"externalId\" | i18n }}</bit-label>\n            <input bitInput type=\"text\" formControlName=\"externalId\" />\n            <bit-hint>{{ \"externalIdDesc\" | i18n }}</bit-hint>\n          </bit-form-field>\n        </bit-tab>\n        <bit-tab *ngIf=\"organization.useGroups\" [label]=\"'groups' | i18n\">\n          <div class=\"tw-mb-6\">\n            {{ \"groupAccessUserDesc\" | i18n }}\n          </div>\n          <bit-access-selector\n            formControlName=\"groups\"\n            [items]=\"groupAccessItems\"\n            [columnHeader]=\"'groups' | i18n\"\n            [selectorLabelText]=\"'selectGroups' | i18n\"\n            [emptySelectionText]=\"'noGroupsAdded' | i18n\"\n            [flexibleCollectionsEnabled]=\"flexibleCollectionsEnabled$ | async\"\n          ></bit-access-selector>\n        </bit-tab>\n        <bit-tab [label]=\"'collections' | i18n\">\n          <div *ngIf=\"organization.useGroups\" class=\"tw-mb-6\">\n            {{ \"userPermissionOverrideHelper\" | i18n }}\n          </div>\n          <div class=\"tw-mb-6\">\n            <bit-form-control>\n              <input type=\"checkbox\" bitCheckbox formControlName=\"accessAllCollections\" />\n              <bit-label>\n                {{ \"accessAllCollectionsDesc\" | i18n }}\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                  appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n                  href=\"https://bitwarden.com/help/user-types-access-control/#access-control\"\n                >\n                  <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n                </a>\n              </bit-label>\n              <bit-hint>{{ \"accessAllCollectionsHelp\" | i18n }}</bit-hint>\n            </bit-form-control>\n          </div>\n          <bit-access-selector\n            *ngIf=\"!accessAllCollections\"\n            [permissionMode]=\"PermissionMode.Edit\"\n            formControlName=\"access\"\n            [showGroupColumn]=\"organization.useGroups\"\n            [items]=\"collectionAccessItems\"\n            [columnHeader]=\"'collection' | i18n\"\n            [selectorLabelText]=\"'selectCollections' | i18n\"\n            [emptySelectionText]=\"'noCollectionsAdded' | i18n\"\n            [flexibleCollectionsEnabled]=\"flexibleCollectionsEnabled$ | async\"\n          ></bit-access-selector\n        ></bit-tab>\n      </bit-tab-group>\n    </div>\n    <ng-container bitDialogFooter>\n      <button type=\"submit\" bitButton bitFormButton buttonType=\"primary\" [disabled]=\"loading\">\n        {{ \"save\" | i18n }}\n      </button>\n      <button\n        type=\"button\"\n        bitButton\n        bitFormButton\n        buttonType=\"secondary\"\n        (click)=\"cancel()\"\n        [disabled]=\"loading\"\n      >\n        {{ \"cancel\" | i18n }}\n      </button>\n      <div class=\"tw-ml-auto\">\n        <button\n          *ngIf=\"editMode && isRevoked\"\n          type=\"button\"\n          bitButton\n          bitFormButton\n          buttonType=\"secondary\"\n          [bitAction]=\"restore\"\n          [disabled]=\"loading\"\n        >\n          {{ \"restoreAccess\" | i18n }}\n        </button>\n        <button\n          *ngIf=\"editMode && !isRevoked\"\n          type=\"button\"\n          bitButton\n          bitFormButton\n          buttonType=\"secondary\"\n          [bitAction]=\"revoke\"\n          [disabled]=\"loading\"\n        >\n          {{ \"revokeAccess\" | i18n }}\n        </button>\n        <button\n          *ngIf=\"editMode\"\n          type=\"button\"\n          bitIconButton=\"bwi-trash\"\n          buttonType=\"danger\"\n          bitFormButton\n          [appA11yTitle]=\"'delete' | i18n\"\n          [bitAction]=\"delete\"\n          [disabled]=\"loading\"\n        ></button>\n      </div>\n    </ng-container>\n  </bit-dialog>\n</form>\n","import { NgModule } from \"@angular/core\";\n\nimport { RadioButtonModule } from \"@bitwarden/components\";\n\nimport { SharedOrganizationModule } from \"../../../shared\";\n\nimport { MemberDialogComponent } from \"./member-dialog.component\";\nimport { NestedCheckboxComponent } from \"./nested-checkbox.component\";\n\n@NgModule({\n  declarations: [MemberDialogComponent, NestedCheckboxComponent],\n  imports: [SharedOrganizationModule, RadioButtonModule],\n  exports: [MemberDialogComponent],\n})\nexport class UserDialogModule {}\n","export class OrganizationUserConfirmRequest {\n  key: string;\n}\n","import { OrganizationUserUserDetailsResponse } from \"@bitwarden/common/admin-console/abstractions/organization-user/responses\";\nimport {\n  OrganizationUserStatusType,\n  OrganizationUserType,\n} from \"@bitwarden/common/admin-console/enums\";\nimport { PermissionsApi } from \"@bitwarden/common/admin-console/models/api/permissions.api\";\n\nimport { CollectionAccessSelectionView } from \"./collection-access-selection.view\";\n\nexport class OrganizationUserView {\n  id: string;\n  userId: string;\n  type: OrganizationUserType;\n  status: OrganizationUserStatusType;\n  accessAll: boolean;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  name: string;\n  email: string;\n  avatarColor: string;\n  twoFactorEnabled: boolean;\n  usesKeyConnector: boolean;\n  hasMasterPassword: boolean;\n\n  collections: CollectionAccessSelectionView[] = [];\n  groups: string[] = [];\n\n  groupNames: string[] = [];\n  collectionNames: string[] = [];\n\n  static fromResponse(response: OrganizationUserUserDetailsResponse): OrganizationUserView {\n    const view = Object.assign(new OrganizationUserView(), response) as OrganizationUserView;\n\n    if (response.collections != undefined) {\n      view.collections = response.collections.map((c) => new CollectionAccessSelectionView(c));\n    }\n\n    if (response.groups != undefined) {\n      view.groups = response.groups;\n    }\n\n    return view;\n  }\n}\n","<bit-dialog dialogSize=\"large\">\n  <span bitDialogTitle>{{ \"activateSecretsManager\" | i18n }}</span>\n  <span bitDialogContent>\n    <p>{{ \"bulkEnableSecretsManagerDescription\" | i18n }}</p>\n    <bit-table [dataSource]=\"dataSource\">\n      <ng-container header>\n        <tr>\n          <th bitCell>{{ \"member\" | i18n }}</th>\n          <th bitCell>{{ \"role\" | i18n }}</th>\n        </tr>\n      </ng-container>\n      <ng-template body let-rows$>\n        <tr bitRow *ngFor=\"let u of rows$ | async\">\n          <td bitCell>\n            <div class=\"tw-flex tw-items-center\">\n              <bit-avatar\n                size=\"small\"\n                [text]=\"u | userName\"\n                [id]=\"u.userId\"\n                [color]=\"u.avatarColor\"\n                class=\"tw-mr-3\"\n              ></bit-avatar>\n              <div class=\"tw-flex tw-flex-col\">\n                <div>\n                  {{ u | userName }}\n                </div>\n                <div class=\"tw-text-sm tw-text-muted\" *ngIf=\"u.name\">\n                  {{ u.email }}\n                </div>\n              </div>\n            </div>\n          </td>\n          <td bitCell>{{ u.type | userType }}</td>\n        </tr>\n      </ng-template>\n    </bit-table>\n  </span>\n  <ng-container bitDialogFooter>\n    <button type=\"button\" bitButton buttonType=\"primary\" [bitAction]=\"submit\">\n      {{ \"activateAccess\" | i18n }}\n    </button>\n    <button type=\"button\" bitButton buttonType=\"secondary\" bitDialogClose>\n      {{ \"close\" | i18n }}\n    </button>\n  </ng-container>\n</bit-dialog>\n","import { DialogRef, DIALOG_DATA } from \"@angular/cdk/dialog\";\nimport { Component, Inject, OnInit } from \"@angular/core\";\n\nimport { OrganizationUserService } from \"@bitwarden/common/admin-console/abstractions/organization-user/organization-user.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DialogService, TableDataSource } from \"@bitwarden/components\";\n\nimport { OrganizationUserView } from \"../../../core\";\n\nexport type BulkEnableSecretsManagerDialogData = {\n  orgId: string;\n  users: OrganizationUserView[];\n};\n\n@Component({\n  templateUrl: `bulk-enable-sm-dialog.component.html`,\n})\nexport class BulkEnableSecretsManagerDialogComponent implements OnInit {\n  protected dataSource = new TableDataSource<OrganizationUserView>();\n  constructor(\n    public dialogRef: DialogRef,\n    @Inject(DIALOG_DATA) private data: BulkEnableSecretsManagerDialogData,\n    private organizationUserService: OrganizationUserService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  ngOnInit(): void {\n    this.dataSource.data = this.data.users;\n  }\n\n  submit = async () => {\n    await this.organizationUserService.putOrganizationUserBulkEnableSecretsManager(\n      this.data.orgId,\n      this.dataSource.data.map((u) => u.id)\n    );\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"activatedAccessToSecretsManager\")\n    );\n    this.dialogRef.close();\n  };\n\n  static open(dialogService: DialogService, data: BulkEnableSecretsManagerDialogData) {\n    return dialogService.open<unknown, BulkEnableSecretsManagerDialogData>(\n      BulkEnableSecretsManagerDialogComponent,\n      { data }\n    );\n  }\n}\n","<bit-dialog>\n  <ng-container bitDialogTitle>\n    <h1>{{ bulkTitle }}</h1>\n  </ng-container>\n  <div bitDialogContent>\n    <bit-callout type=\"danger\" *ngIf=\"users.length <= 0\">\n      {{ \"noSelectedUsersApplicable\" | i18n }}\n    </bit-callout>\n\n    <bit-callout type=\"danger\" *ngIf=\"error\">\n      {{ error }}\n    </bit-callout>\n\n    <ng-container *ngIf=\"!done\">\n      <bit-callout type=\"warning\" *ngIf=\"users.length > 0 && !error && isRevoking\">\n        <p>{{ \"revokeUsersWarning\" | i18n }}</p>\n        <p *ngIf=\"this.showNoMasterPasswordWarning\">\n          {{ \"removeMembersWithoutMasterPasswordWarning\" | i18n }}\n        </p>\n      </bit-callout>\n\n      <bit-table>\n        <ng-container header>\n          <tr>\n            <th bitCell colspan=\"2\">{{ \"user\" | i18n }}</th>\n            <th bitCell *ngIf=\"this.showNoMasterPasswordWarning\">{{ \"details\" | i18n }}</th>\n          </tr>\n        </ng-container>\n        <ng-template body>\n          <tr bitRow *ngFor=\"let user of users\">\n            <td bitCell width=\"30\">\n              <bit-avatar [text]=\"user | userName\" [id]=\"user.id\" size=\"small\"></bit-avatar>\n            </td>\n            <td bitCell>\n              {{ user.email }}\n              <small class=\"tw-block tw-text-muted\" *ngIf=\"user.name\">{{ user.name }}</small>\n            </td>\n            <td bitCell *ngIf=\"this.showNoMasterPasswordWarning\">\n              <span class=\"tw-block tw-lowercase tw-text-muted\">\n                <ng-container *ngIf=\"user.hasMasterPassword === true\"> - </ng-container>\n                <ng-container *ngIf=\"user.hasMasterPassword === false\">\n                  <i class=\"bwi bwi-exclamation-triangle\" aria-hidden=\"true\"></i>\n                  {{ \"noMasterPassword\" | i18n }}\n                </ng-container>\n              </span>\n            </td>\n          </tr>\n        </ng-template>\n      </bit-table>\n    </ng-container>\n\n    <ng-container *ngIf=\"done\">\n      <bit-table>\n        <ng-container header>\n          <tr>\n            <th bitCell colspan=\"2\">{{ \"user\" | i18n }}</th>\n            <th>{{ \"status\" | i18n }}</th>\n          </tr>\n        </ng-container>\n        <ng-template body>\n          <tr bitRow *ngFor=\"let user of users\">\n            <td bitCell width=\"30\">\n              <bit-avatar [text]=\"user | userName\" [id]=\"user.id\" size=\"small\"></bit-avatar>\n            </td>\n            <td bitCell>\n              {{ user.email }}\n              <small class=\"tw-block tw-text-muted\" *ngIf=\"user.name\">{{ user.name }}</small>\n            </td>\n            <td bitCell *ngIf=\"statuses.has(user.id)\">\n              {{ statuses.get(user.id) }}\n            </td>\n            <td bitCell *ngIf=\"!statuses.has(user.id)\">\n              {{ \"bulkFilteredMessage\" | i18n }}\n            </td>\n          </tr>\n        </ng-template>\n      </bit-table>\n    </ng-container>\n  </div>\n  <ng-container bitDialogFooter>\n    <button type=\"button\" bitButton *ngIf=\"!done && users.length > 0\" [bitAction]=\"submit\">\n      {{ bulkTitle }}\n    </button>\n    <button type=\"button\" bitButton buttonType=\"secondary\" bitDialogClose>\n      {{ \"close\" | i18n }}\n    </button>\n  </ng-container>\n</bit-dialog>\n","import { DIALOG_DATA } from \"@angular/cdk/dialog\";\nimport { Component, Inject } from \"@angular/core\";\n\nimport { OrganizationUserService } from \"@bitwarden/common/admin-console/abstractions/organization-user/organization-user.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\nimport { BulkUserDetails } from \"./bulk-status.component\";\n\ntype BulkRestoreDialogParams = {\n  organizationId: string;\n  users: BulkUserDetails[];\n  isRevoking: boolean;\n};\n\n@Component({\n  selector: \"app-bulk-restore-revoke\",\n  templateUrl: \"bulk-restore-revoke.component.html\",\n})\nexport class BulkRestoreRevokeComponent {\n  isRevoking: boolean;\n  organizationId: string;\n  users: BulkUserDetails[];\n\n  statuses: Map<string, string> = new Map();\n\n  loading = false;\n  done = false;\n  error: string;\n  showNoMasterPasswordWarning = false;\n\n  constructor(\n    protected i18nService: I18nService,\n    private organizationUserService: OrganizationUserService,\n    @Inject(DIALOG_DATA) protected data: BulkRestoreDialogParams\n  ) {\n    this.isRevoking = data.isRevoking;\n    this.organizationId = data.organizationId;\n    this.users = data.users;\n    this.showNoMasterPasswordWarning = this.users.some((u) => u.hasMasterPassword === false);\n  }\n\n  get bulkTitle() {\n    const titleKey = this.isRevoking ? \"revokeUsers\" : \"restoreUsers\";\n    return this.i18nService.t(titleKey);\n  }\n\n  submit = async () => {\n    try {\n      const response = await this.performBulkUserAction();\n\n      const bulkMessage = this.isRevoking ? \"bulkRevokedMessage\" : \"bulkRestoredMessage\";\n      response.data.forEach((entry) => {\n        const error = entry.error !== \"\" ? entry.error : this.i18nService.t(bulkMessage);\n        this.statuses.set(entry.id, error);\n      });\n      this.done = true;\n    } catch (e) {\n      this.error = e.message;\n    }\n  };\n\n  protected async performBulkUserAction() {\n    const userIds = this.users.map((user) => user.id);\n    if (this.isRevoking) {\n      return await this.organizationUserService.revokeManyOrganizationUsers(\n        this.organizationId,\n        userIds\n      );\n    } else {\n      return await this.organizationUserService.restoreManyOrganizationUsers(\n        this.organizationId,\n        userIds\n      );\n    }\n  }\n\n  static open(dialogService: DialogService, data: BulkRestoreDialogParams) {\n    return dialogService.open(BulkRestoreRevokeComponent, { data });\n  }\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"resetPasswordTitle\">\n  <div class=\"modal-dialog\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n      <div class=\"modal-header\">\n        <h1 class=\"modal-title\" id=\"resetPasswordTitle\">\n          {{ \"recoverAccount\" | i18n }}\n          <small class=\"text-muted\" *ngIf=\"name\">{{ name }}</small>\n        </h1>\n        <button\n          type=\"button\"\n          class=\"close\"\n          data-dismiss=\"modal\"\n          appA11yTitle=\"{{ 'close' | i18n }}\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <app-callout type=\"warning\"\n          >{{ \"resetPasswordLoggedOutWarning\" | i18n : loggedOutWarningName }}\n        </app-callout>\n        <auth-password-callout\n          [policy]=\"enforcedPolicyOptions\"\n          message=\"resetPasswordMasterPasswordPolicyInEffect\"\n          *ngIf=\"enforcedPolicyOptions\"\n        >\n        </auth-password-callout>\n        <div class=\"row\">\n          <div class=\"col form-group\">\n            <div class=\"d-flex\">\n              <label for=\"newPassword\">{{ \"newPassword\" | i18n }}</label>\n              <div class=\"ml-auto d-flex\">\n                <a\n                  href=\"#\"\n                  class=\"d-block mr-2 bwi-icon-above-input\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'generatePassword' | i18n }}\"\n                  (click)=\"generatePassword()\"\n                >\n                  <i class=\"bwi bwi-lg bwi-fw bwi-refresh\" aria-hidden=\"true\"></i>\n                </a>\n              </div>\n            </div>\n            <div class=\"input-group mb-1\">\n              <input\n                id=\"newPassword\"\n                class=\"form-control text-monospace\"\n                appAutofocus\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"NewPassword\"\n                [(ngModel)]=\"newPassword\"\n                required\n                appInputVerbatim\n                autocomplete=\"new-password\"\n              />\n              <div class=\"input-group-append\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword()\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary\"\n                  appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n                  (click)=\"copy(newPassword)\"\n                >\n                  <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n                </button>\n              </div>\n            </div>\n            <app-password-strength\n              [password]=\"newPassword\"\n              [email]=\"email\"\n              [showText]=\"true\"\n              (passwordStrengthResult)=\"getStrengthResult($event)\"\n            >\n            </app-password-strength>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\" [disabled]=\"form.loading\">\n          <i class=\"bwi bwi-spinner bwi-spin\" title=\"{{ 'loading' | i18n }}\" aria-hidden=\"true\"></i>\n          <span>{{ \"save\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport zxcvbn from \"zxcvbn\";\n\nimport { PasswordStrengthComponent } from \"@bitwarden/angular/shared/components/password-strength/password-strength.component\";\nimport { OrganizationUserService } from \"@bitwarden/common/admin-console/abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserResetPasswordRequest } from \"@bitwarden/common/admin-console/abstractions/organization-user/requests\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { KdfConfig } from \"@bitwarden/common/auth/models/domain/kdf-config\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { Utils } from \"@bitwarden/common/platform/misc/utils\";\nimport { EncString } from \"@bitwarden/common/platform/models/domain/enc-string\";\nimport {\n  SymmetricCryptoKey,\n  UserKey,\n} from \"@bitwarden/common/platform/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-reset-password\",\n  templateUrl: \"reset-password.component.html\",\n})\nexport class ResetPasswordComponent implements OnInit, OnDestroy {\n  @Input() name: string;\n  @Input() email: string;\n  @Input() id: string;\n  @Input() organizationId: string;\n  @Output() onPasswordReset = new EventEmitter();\n  @ViewChild(PasswordStrengthComponent) passwordStrengthComponent: PasswordStrengthComponent;\n\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  newPassword: string = null;\n  showPassword = false;\n  passwordStrengthResult: zxcvbn.ZXCVBNResult;\n  formPromise: Promise<any>;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private policyService: PolicyService,\n    private cryptoService: CryptoService,\n    private logService: LogService,\n    private organizationUserService: OrganizationUserService,\n    private dialogService: DialogService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .masterPasswordPolicyOptions$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(\n        (enforcedPasswordPolicyOptions) =>\n          (this.enforcedPolicyOptions = enforcedPasswordPolicyOptions)\n      );\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get loggedOutWarningName() {\n    return this.name != null ? this.name : this.i18nService.t(\"thisUser\");\n  }\n\n  async generatePassword() {\n    const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n    this.newPassword = await this.passwordGenerationService.generatePassword(options);\n    this.passwordStrengthComponent.updatePasswordStrength(this.newPassword);\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"newPassword\").focus();\n  }\n\n  copy(value: string) {\n    if (value == null) {\n      return;\n    }\n\n    this.platformUtilsService.copyToClipboard(value, { window: window });\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n\n  async submit() {\n    // Validation\n    if (this.newPassword == null || this.newPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return false;\n    }\n\n    if (this.newPassword.length < Utils.minimumPasswordLength) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordMinlength\", Utils.minimumPasswordLength)\n      );\n      return false;\n    }\n\n    if (\n      this.enforcedPolicyOptions != null &&\n      !this.policyService.evaluateMasterPassword(\n        this.passwordStrengthResult.score,\n        this.newPassword,\n        this.enforcedPolicyOptions\n      )\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordPolicyRequirementsNotMet\")\n      );\n      return;\n    }\n\n    if (this.passwordStrengthResult.score < 3) {\n      const result = await this.dialogService.openSimpleDialog({\n        title: { key: \"weakMasterPassword\" },\n        content: { key: \"weakMasterPasswordDesc\" },\n        type: \"warning\",\n      });\n\n      if (!result) {\n        return false;\n      }\n    }\n\n    // Get user Information (kdf type, kdf iterations, resetPasswordKey, private key) and change password\n    try {\n      this.formPromise = this.organizationUserService\n        .getOrganizationUserResetPasswordDetails(this.organizationId, this.id)\n        .then(async (response) => {\n          if (response == null) {\n            throw new Error(this.i18nService.t(\"resetPasswordDetailsError\"));\n          }\n\n          const kdfType = response.kdf;\n          const kdfIterations = response.kdfIterations;\n          const kdfMemory = response.kdfMemory;\n          const kdfParallelism = response.kdfParallelism;\n          const resetPasswordKey = response.resetPasswordKey;\n          const encryptedPrivateKey = response.encryptedPrivateKey;\n\n          // Decrypt Organization's encrypted Private Key with org key\n          const orgSymKey = await this.cryptoService.getOrgKey(this.organizationId);\n          const decPrivateKey = await this.cryptoService.decryptToBytes(\n            new EncString(encryptedPrivateKey),\n            orgSymKey\n          );\n\n          // Decrypt User's Reset Password Key to get UserKey\n          const decValue = await this.cryptoService.rsaDecrypt(resetPasswordKey, decPrivateKey);\n          const existingUserKey = new SymmetricCryptoKey(decValue) as UserKey;\n\n          // Create new master key and hash new password\n          const newMasterKey = await this.cryptoService.makeMasterKey(\n            this.newPassword,\n            this.email.trim().toLowerCase(),\n            kdfType,\n            new KdfConfig(kdfIterations, kdfMemory, kdfParallelism)\n          );\n          const newMasterKeyHash = await this.cryptoService.hashMasterKey(\n            this.newPassword,\n            newMasterKey\n          );\n\n          // Create new encrypted user key for the User\n          const newUserKey = await this.cryptoService.encryptUserKeyWithMasterKey(\n            newMasterKey,\n            existingUserKey\n          );\n\n          // Create request\n          const request = new OrganizationUserResetPasswordRequest();\n          request.key = newUserKey[1].encryptedString;\n          request.newMasterPasswordHash = newMasterKeyHash;\n\n          // Change user's password\n          return this.organizationUserService.putOrganizationUserResetPassword(\n            this.organizationId,\n            this.id,\n            request\n          );\n        });\n\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"resetPasswordSuccess\")\n      );\n      this.onPasswordReset.emit();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  getStrengthResult(result: zxcvbn.ZXCVBNResult) {\n    this.passwordStrengthResult = result;\n  }\n}\n","<div class=\"container page-content\">\n  <div class=\"tw-mb-4 tw-flex tw-flex-col tw-space-y-4\">\n    <h1>{{ \"members\" | i18n }}</h1>\n    <div class=\"tw-flex tw-items-center tw-justify-end tw-space-x-3\">\n      <bit-toggle-group\n        [selected]=\"status\"\n        (selectedChange)=\"filter($event)\"\n        [attr.aria-label]=\"'memberStatusFilter' | i18n\"\n      >\n        <bit-toggle [value]=\"null\">\n          {{ \"all\" | i18n }} <span bitBadge badgeType=\"info\" *ngIf=\"allCount\">{{ allCount }}</span>\n        </bit-toggle>\n\n        <bit-toggle [value]=\"userStatusType.Invited\">\n          {{ \"invited\" | i18n }}\n          <span bitBadge badgeType=\"info\" *ngIf=\"invitedCount\">{{ invitedCount }}</span>\n        </bit-toggle>\n\n        <bit-toggle [value]=\"userStatusType.Accepted\">\n          {{ \"needsConfirmation\" | i18n }}\n          <span bitBadge badgeType=\"info\" *ngIf=\"acceptedCount\">{{ acceptedCount }}</span>\n        </bit-toggle>\n\n        <bit-toggle [value]=\"userStatusType.Revoked\">\n          {{ \"revoked\" | i18n }}\n          <span bitBadge badgeType=\"info\" *ngIf=\"revokedCount\">{{ revokedCount }}</span>\n        </bit-toggle>\n      </bit-toggle-group>\n\n      <bit-search\n        class=\"tw-grow\"\n        [(ngModel)]=\"searchText\"\n        [placeholder]=\"'searchMembers' | i18n\"\n      ></bit-search>\n\n      <button type=\"button\" bitButton buttonType=\"primary\" (click)=\"invite()\">\n        <i class=\"bwi bwi-plus bwi-fw\" aria-hidden=\"true\"></i>\n        {{ \"inviteMember\" | i18n }}\n      </button>\n    </div>\n  </div>\n  <ng-container *ngIf=\"loading\">\n    <i\n      class=\"bwi bwi-spinner bwi-spin text-muted\"\n      title=\"{{ 'loading' | i18n }}\"\n      aria-hidden=\"true\"\n    ></i>\n    <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n  </ng-container>\n  <ng-container\n    *ngIf=\"\n      !loading &&\n      (isPaging()\n        ? pagedUsers\n        : (users | search : searchText : 'name' : 'email' : 'id')) as searchedUsers\n    \"\n  >\n    <p *ngIf=\"!searchedUsers.length\">{{ \"noMembersInList\" | i18n }}</p>\n    <ng-container *ngIf=\"searchedUsers.length\">\n      <app-callout\n        type=\"info\"\n        title=\"{{ 'confirmUsers' | i18n }}\"\n        icon=\"bwi bwi-check-circle\"\n        *ngIf=\"showConfirmUsers\"\n      >\n        {{ \"usersNeedConfirmed\" | i18n }}\n      </app-callout>\n      <bit-table\n        infinite-scroll\n        [infiniteScrollDistance]=\"1\"\n        [infiniteScrollDisabled]=\"!isPaging()\"\n        (scrolled)=\"loadMore()\"\n      >\n        <ng-container header>\n          <tr>\n            <th bitCell class=\"tw-w-20\">\n              <input\n                type=\"checkbox\"\n                bitCheckbox\n                class=\"tw-mr-1\"\n                (change)=\"selectAll($any($event.target).checked)\"\n                id=\"selectAll\"\n              />\n              <label class=\"tw-mb-0 !tw-font-bold !tw-text-muted\" for=\"selectAll\">{{\n                \"all\" | i18n\n              }}</label>\n            </th>\n            <th bitCell>{{ \"name\" | i18n }}</th>\n            <th bitCell>{{ (organization.useGroups ? \"groups\" : \"collections\") | i18n }}</th>\n            <th bitCell>{{ \"role\" | i18n }}</th>\n            <th bitCell>{{ \"policies\" | i18n }}</th>\n            <th bitCell class=\"tw-w-10\">\n              <button\n                [bitMenuTriggerFor]=\"headerMenu\"\n                type=\"button\"\n                bitIconButton=\"bwi-ellipsis-v\"\n                size=\"small\"\n                appA11yTitle=\"{{ 'options' | i18n }}\"\n              ></button>\n\n              <bit-menu #headerMenu>\n                <ng-container *ngIf=\"canUseSecretsManager$ | async\">\n                  <button type=\"button\" bitMenuItem (click)=\"bulkEnableSM()\">\n                    {{ \"activateSecretsManager\" | i18n }}\n                  </button>\n                  <bit-menu-divider></bit-menu-divider>\n                </ng-container>\n                <button type=\"button\" bitMenuItem (click)=\"bulkReinvite()\">\n                  <i class=\"bwi bwi-fw bwi-envelope\" aria-hidden=\"true\"></i>\n                  {{ \"reinviteSelected\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"bulkConfirm()\"\n                  *ngIf=\"showBulkConfirmUsers\"\n                >\n                  <span class=\"tw-text-success\">\n                    <i class=\"bwi bwi-fw bwi-check\" aria-hidden=\"true\"></i>\n                    {{ \"confirmSelected\" | i18n }}\n                  </span>\n                </button>\n                <button type=\"button\" bitMenuItem (click)=\"bulkRestore()\">\n                  <i class=\"bwi bwi-fw bwi-plus-circle\" aria-hidden=\"true\"></i>\n                  {{ \"restoreAccess\" | i18n }}\n                </button>\n                <button type=\"button\" bitMenuItem (click)=\"bulkRevoke()\">\n                  <i class=\"bwi bwi-fw bwi-minus-circle\" aria-hidden=\"true\"></i>\n                  {{ \"revokeAccess\" | i18n }}\n                </button>\n                <button type=\"button\" bitMenuItem (click)=\"bulkRemove()\">\n                  <span class=\"tw-text-danger\">\n                    <i aria-hidden=\"true\" class=\"bwi bwi-close\"></i>\n                    {{ \"remove\" | i18n }}\n                  </span>\n                </button>\n              </bit-menu>\n            </th>\n          </tr>\n        </ng-container>\n        <ng-template body>\n          <tr bitRow *ngFor=\"let u of searchedUsers\" alignContent=\"middle\">\n            <td bitCell (click)=\"checkUser(u)\">\n              <input type=\"checkbox\" bitCheckbox [(ngModel)]=\"$any(u).checked\" />\n            </td>\n            <td bitCell (click)=\"edit(u)\" class=\"tw-cursor-pointer\">\n              <div class=\"tw-flex tw-items-center\">\n                <bit-avatar\n                  size=\"small\"\n                  [text]=\"u | userName\"\n                  [id]=\"u.userId\"\n                  [color]=\"u.avatarColor\"\n                  class=\"tw-mr-3\"\n                ></bit-avatar>\n                <div class=\"tw-flex tw-flex-col\">\n                  <div>\n                    <button type=\"button\" bitLink>\n                      {{ u.name ?? u.email }}\n                    </button>\n                    <span\n                      bitBadge\n                      class=\"tw-text-xs\"\n                      badgeType=\"secondary\"\n                      *ngIf=\"u.status === userStatusType.Invited\"\n                      >{{ \"invited\" | i18n }}</span\n                    >\n                    <span\n                      bitBadge\n                      class=\"tw-text-xs\"\n                      badgeType=\"warning\"\n                      *ngIf=\"u.status === userStatusType.Accepted\"\n                      >{{ \"needsConfirmation\" | i18n }}</span\n                    >\n                    <span\n                      bitBadge\n                      class=\"tw-text-xs\"\n                      badgeType=\"secondary\"\n                      *ngIf=\"u.status === userStatusType.Revoked\"\n                      >{{ \"revoked\" | i18n }}</span\n                    >\n                  </div>\n                  <div class=\"tw-text-sm tw-text-muted\" *ngIf=\"u.name\">\n                    {{ u.email }}\n                  </div>\n                </div>\n              </div>\n            </td>\n\n            <td\n              bitCell\n              (click)=\"edit(u, organization.useGroups ? memberTab.Groups : memberTab.Collections)\"\n              class=\"tw-cursor-pointer\"\n            >\n              <bit-badge-list\n                *ngIf=\"organization.useGroups || !u.accessAll\"\n                [items]=\"organization.useGroups ? u.groupNames : u.collectionNames\"\n                [maxItems]=\"3\"\n                badgeType=\"secondary\"\n              ></bit-badge-list>\n              <span *ngIf=\"!organization.useGroups && u.accessAll\">{{ \"all\" | i18n }}</span>\n            </td>\n\n            <td\n              bitCell\n              (click)=\"edit(u, memberTab.Role)\"\n              class=\"tw-cursor-pointer tw-text-sm tw-text-muted\"\n            >\n              {{ u.type | userType }}\n            </td>\n\n            <td bitCell class=\"tw-text-muted\">\n              <ng-container *ngIf=\"u.twoFactorEnabled\">\n                <i\n                  class=\"bwi bwi-lock\"\n                  title=\"{{ 'userUsingTwoStep' | i18n }}\"\n                  aria-hidden=\"true\"\n                ></i>\n                <span class=\"tw-sr-only\">{{ \"userUsingTwoStep\" | i18n }}</span>\n              </ng-container>\n              <ng-container *ngIf=\"showEnrolledStatus($any(u))\">\n                <i\n                  class=\"bwi bwi-key\"\n                  title=\"{{ 'enrolledAccountRecovery' | i18n }}\"\n                  aria-hidden=\"true\"\n                ></i>\n                <span class=\"tw-sr-only\">{{ \"enrolledAccountRecovery\" | i18n }}</span>\n              </ng-container>\n            </td>\n            <td bitCell>\n              <button\n                [bitMenuTriggerFor]=\"rowMenu\"\n                type=\"button\"\n                bitIconButton=\"bwi-ellipsis-v\"\n                size=\"small\"\n                appA11yTitle=\"{{ 'options' | i18n }}\"\n              ></button>\n\n              <bit-menu #rowMenu>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"reinvite(u)\"\n                  *ngIf=\"u.status === userStatusType.Invited\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-envelope\"></i>\n                  {{ \"resendInvitation\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"confirm(u)\"\n                  *ngIf=\"u.status === userStatusType.Accepted\"\n                >\n                  <span class=\"tw-text-success\">\n                    <i aria-hidden=\"true\" class=\"bwi bwi-check\"></i> {{ \"confirm\" | i18n }}\n                  </span>\n                </button>\n                <bit-menu-divider\n                  *ngIf=\"\n                    u.status === userStatusType.Accepted || u.status === userStatusType.Invited\n                  \"\n                ></bit-menu-divider>\n                <button type=\"button\" bitMenuItem (click)=\"edit(u, memberTab.Role)\">\n                  <i aria-hidden=\"true\" class=\"bwi bwi-user\"></i> {{ \"memberRole\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"edit(u, memberTab.Groups)\"\n                  *ngIf=\"organization.useGroups\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-users\"></i> {{ \"groups\" | i18n }}\n                </button>\n                <button type=\"button\" bitMenuItem (click)=\"edit(u, memberTab.Collections)\">\n                  <i aria-hidden=\"true\" class=\"bwi bwi-collection\"></i> {{ \"collections\" | i18n }}\n                </button>\n                <bit-menu-divider></bit-menu-divider>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"events(u)\"\n                  *ngIf=\"organization.useEvents && u.status === userStatusType.Confirmed\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-file-text\"></i> {{ \"eventLogs\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"resetPassword(u)\"\n                  *ngIf=\"allowResetPassword(u)\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-key\"></i> {{ \"recoverAccount\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"restore(u)\"\n                  *ngIf=\"u.status === userStatusType.Revoked\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-plus-circle\"></i>\n                  {{ \"restoreAccess\" | i18n }}\n                </button>\n                <button\n                  type=\"button\"\n                  bitMenuItem\n                  (click)=\"revoke(u)\"\n                  *ngIf=\"u.status !== userStatusType.Revoked\"\n                >\n                  <i aria-hidden=\"true\" class=\"bwi bwi-minus-circle\"></i>\n                  {{ \"revokeAccess\" | i18n }}\n                </button>\n                <button type=\"button\" bitMenuItem (click)=\"remove(u)\">\n                  <span class=\"tw-text-danger\">\n                    <i aria-hidden=\"true\" class=\"bwi bwi-close\"></i> {{ \"remove\" | i18n }}\n                  </span>\n                </button>\n              </bit-menu>\n            </td>\n          </tr>\n        </ng-template>\n      </bit-table>\n    </ng-container>\n  </ng-container>\n  <ng-template #addEdit></ng-template>\n  <ng-template #groupsTemplate></ng-template>\n  <ng-template #confirmTemplate></ng-template>\n  <ng-template #resetPasswordTemplate></ng-template>\n  <ng-template #bulkStatusTemplate></ng-template>\n  <ng-template #bulkConfirmTemplate></ng-template>\n  <ng-template #bulkRemoveTemplate></ng-template>\n</div>\n","import { Component, OnDestroy, OnInit, ViewChild, ViewContainerRef } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport {\n  combineLatest,\n  concatMap,\n  firstValueFrom,\n  from,\n  lastValueFrom,\n  map,\n  Observable,\n  shareReplay,\n  Subject,\n  switchMap,\n  takeUntil,\n} from \"rxjs\";\n\nimport { SearchPipe } from \"@bitwarden/angular/pipes/search.pipe\";\nimport { UserNamePipe } from \"@bitwarden/angular/pipes/user-name.pipe\";\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserService } from \"@bitwarden/common/admin-console/abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserConfirmRequest } from \"@bitwarden/common/admin-console/abstractions/organization-user/requests\";\nimport {\n  OrganizationUserBulkResponse,\n  OrganizationUserUserDetailsResponse,\n} from \"@bitwarden/common/admin-console/abstractions/organization-user/responses\";\nimport { PolicyApiServiceAbstraction as PolicyApiService } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport {\n  OrganizationUserStatusType,\n  OrganizationUserType,\n  PolicyType,\n} from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { OrganizationKeysRequest } from \"@bitwarden/common/admin-console/models/request/organization-keys.request\";\nimport { ProductType } from \"@bitwarden/common/enums\";\nimport { ListResponse } from \"@bitwarden/common/models/response/list.response\";\nimport { CryptoService } from \"@bitwarden/common/platform/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/platform/abstractions/validation.service\";\nimport { CollectionService } from \"@bitwarden/common/vault/abstractions/collection.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CollectionData } from \"@bitwarden/common/vault/models/data/collection.data\";\nimport { Collection } from \"@bitwarden/common/vault/models/domain/collection\";\nimport { CollectionDetailsResponse } from \"@bitwarden/common/vault/models/response/collection.response\";\nimport { DialogService, SimpleDialogOptions } from \"@bitwarden/components\";\n\nimport { flagEnabled } from \"../../../../utils/flags\";\nimport { openEntityEventsDialog } from \"../../../admin-console/organizations/manage/entity-events.component\";\nimport { BasePeopleComponent } from \"../../common/base.people.component\";\nimport { GroupService } from \"../core\";\nimport { OrganizationUserView } from \"../core/views/organization-user.view\";\n\nimport { BulkConfirmComponent } from \"./components/bulk/bulk-confirm.component\";\nimport { BulkEnableSecretsManagerDialogComponent } from \"./components/bulk/bulk-enable-sm-dialog.component\";\nimport { BulkRemoveComponent } from \"./components/bulk/bulk-remove.component\";\nimport { BulkRestoreRevokeComponent } from \"./components/bulk/bulk-restore-revoke.component\";\nimport { BulkStatusComponent } from \"./components/bulk/bulk-status.component\";\nimport {\n  MemberDialogResult,\n  MemberDialogTab,\n  openUserAddEditDialog,\n} from \"./components/member-dialog\";\nimport { ResetPasswordComponent } from \"./components/reset-password.component\";\n\n@Component({\n  selector: \"app-org-people\",\n  templateUrl: \"people.component.html\",\n})\nexport class PeopleComponent\n  extends BasePeopleComponent<OrganizationUserView>\n  implements OnInit, OnDestroy\n{\n  @ViewChild(\"groupsTemplate\", { read: ViewContainerRef, static: true })\n  groupsModalRef: ViewContainerRef;\n  @ViewChild(\"confirmTemplate\", { read: ViewContainerRef, static: true })\n  confirmModalRef: ViewContainerRef;\n  @ViewChild(\"resetPasswordTemplate\", { read: ViewContainerRef, static: true })\n  resetPasswordModalRef: ViewContainerRef;\n  @ViewChild(\"bulkStatusTemplate\", { read: ViewContainerRef, static: true })\n  bulkStatusModalRef: ViewContainerRef;\n  @ViewChild(\"bulkConfirmTemplate\", { read: ViewContainerRef, static: true })\n  bulkConfirmModalRef: ViewContainerRef;\n  @ViewChild(\"bulkRemoveTemplate\", { read: ViewContainerRef, static: true })\n  bulkRemoveModalRef: ViewContainerRef;\n\n  userType = OrganizationUserType;\n  userStatusType = OrganizationUserStatusType;\n  memberTab = MemberDialogTab;\n\n  organization: Organization;\n  status: OrganizationUserStatusType = null;\n  orgResetPasswordPolicyEnabled = false;\n\n  protected canUseSecretsManager$: Observable<boolean>;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    apiService: ApiService,\n    private route: ActivatedRoute,\n    i18nService: I18nService,\n    modalService: ModalService,\n    platformUtilsService: PlatformUtilsService,\n    cryptoService: CryptoService,\n    searchService: SearchService,\n    validationService: ValidationService,\n    private policyService: PolicyService,\n    private policyApiService: PolicyApiService,\n    logService: LogService,\n    searchPipe: SearchPipe,\n    userNamePipe: UserNamePipe,\n    private syncService: SyncService,\n    stateService: StateService,\n    private organizationService: OrganizationService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private organizationUserService: OrganizationUserService,\n    dialogService: DialogService,\n    private router: Router,\n    private groupService: GroupService,\n    private collectionService: CollectionService\n  ) {\n    super(\n      apiService,\n      searchService,\n      i18nService,\n      platformUtilsService,\n      cryptoService,\n      validationService,\n      modalService,\n      logService,\n      searchPipe,\n      userNamePipe,\n      stateService,\n      dialogService\n    );\n  }\n\n  async ngOnInit() {\n    const organization$ = this.route.params.pipe(\n      map((params) => this.organizationService.get(params.organizationId)),\n      shareReplay({ refCount: true, bufferSize: 1 })\n    );\n\n    this.canUseSecretsManager$ = organization$.pipe(\n      map((org) => org.useSecretsManager && flagEnabled(\"secretsManager\"))\n    );\n\n    const policies$ = organization$.pipe(\n      switchMap((organization) => {\n        if (organization.isProviderUser) {\n          return from(this.policyApiService.getPolicies(organization.id)).pipe(\n            map((response) => this.policyService.mapPoliciesFromToken(response))\n          );\n        }\n\n        return this.policyService.policies$;\n      })\n    );\n\n    combineLatest([this.route.queryParams, policies$, organization$])\n      .pipe(\n        concatMap(async ([qParams, policies, organization]) => {\n          this.organization = organization;\n\n          // Backfill pub/priv key if necessary\n          if (\n            this.organization.canManageUsersPassword &&\n            !this.organization.hasPublicAndPrivateKeys\n          ) {\n            const orgShareKey = await this.cryptoService.getOrgKey(this.organization.id);\n            const orgKeys = await this.cryptoService.makeKeyPair(orgShareKey);\n            const request = new OrganizationKeysRequest(orgKeys[0], orgKeys[1].encryptedString);\n            const response = await this.organizationApiService.updateKeys(\n              this.organization.id,\n              request\n            );\n            if (response != null) {\n              this.organization.hasPublicAndPrivateKeys =\n                response.publicKey != null && response.privateKey != null;\n              await this.syncService.fullSync(true); // Replace organizations with new data\n            } else {\n              throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));\n            }\n          }\n\n          const resetPasswordPolicy = policies\n            .filter((policy) => policy.type === PolicyType.ResetPassword)\n            .find((p) => p.organizationId === this.organization.id);\n          this.orgResetPasswordPolicyEnabled = resetPasswordPolicy?.enabled;\n\n          await this.load();\n\n          this.searchText = qParams.search;\n          if (qParams.viewEvents != null) {\n            const user = this.users.filter((u) => u.id === qParams.viewEvents);\n            if (user.length > 0 && user[0].status === OrganizationUserStatusType.Confirmed) {\n              this.events(user[0]);\n            }\n          }\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load() {\n    await super.load();\n  }\n\n  async getUsers(): Promise<OrganizationUserView[]> {\n    let groupsPromise: Promise<Map<string, string>>;\n    let collectionsPromise: Promise<Map<string, string>>;\n\n    // We don't need both groups and collections for the table, so only load one\n    const userPromise = this.organizationUserService.getAllUsers(this.organization.id, {\n      includeGroups: this.organization.useGroups,\n      includeCollections: !this.organization.useGroups,\n    });\n\n    // Depending on which column is displayed, we need to load the group/collection names\n    if (this.organization.useGroups) {\n      groupsPromise = this.getGroupNameMap();\n    } else {\n      collectionsPromise = this.getCollectionNameMap();\n    }\n\n    const [usersResponse, groupNamesMap, collectionNamesMap] = await Promise.all([\n      userPromise,\n      groupsPromise,\n      collectionsPromise,\n    ]);\n\n    return usersResponse.data?.map<OrganizationUserView>((r) => {\n      const userView = OrganizationUserView.fromResponse(r);\n\n      userView.groupNames = userView.groups\n        .map((g) => groupNamesMap.get(g))\n        .sort(this.i18nService.collator?.compare);\n      userView.collectionNames = userView.collections\n        .map((c) => collectionNamesMap.get(c.id))\n        .sort(this.i18nService.collator?.compare);\n\n      return userView;\n    });\n  }\n\n  async getGroupNameMap(): Promise<Map<string, string>> {\n    const groups = await this.groupService.getAll(this.organization.id);\n    const groupNameMap = new Map<string, string>();\n    groups.forEach((g) => groupNameMap.set(g.id, g.name));\n    return groupNameMap;\n  }\n\n  /**\n   * Retrieve a map of all collection IDs <-> names for the organization.\n   */\n  async getCollectionNameMap() {\n    const collectionMap = new Map<string, string>();\n    const response = await this.apiService.getCollections(this.organization.id);\n\n    const collections = response.data.map(\n      (r) => new Collection(new CollectionData(r as CollectionDetailsResponse))\n    );\n    const decryptedCollections = await this.collectionService.decryptMany(collections);\n\n    decryptedCollections.forEach((c) => collectionMap.set(c.id, c.name));\n\n    return collectionMap;\n  }\n\n  deleteUser(id: string): Promise<void> {\n    return this.organizationUserService.deleteOrganizationUser(this.organization.id, id);\n  }\n\n  revokeUser(id: string): Promise<void> {\n    return this.organizationUserService.revokeOrganizationUser(this.organization.id, id);\n  }\n\n  restoreUser(id: string): Promise<void> {\n    return this.organizationUserService.restoreOrganizationUser(this.organization.id, id);\n  }\n\n  reinviteUser(id: string): Promise<void> {\n    return this.organizationUserService.postOrganizationUserReinvite(this.organization.id, id);\n  }\n\n  async confirmUser(user: OrganizationUserView, publicKey: Uint8Array): Promise<void> {\n    const orgKey = await this.cryptoService.getOrgKey(this.organization.id);\n    const key = await this.cryptoService.rsaEncrypt(orgKey.key, publicKey);\n    const request = new OrganizationUserConfirmRequest();\n    request.key = key.encryptedString;\n    await this.organizationUserService.postOrganizationUserConfirm(\n      this.organization.id,\n      user.id,\n      request\n    );\n  }\n\n  allowResetPassword(orgUser: OrganizationUserView): boolean {\n    // Hierarchy check\n    let callingUserHasPermission = false;\n\n    switch (this.organization.type) {\n      case OrganizationUserType.Owner:\n        callingUserHasPermission = true;\n        break;\n      case OrganizationUserType.Admin:\n        callingUserHasPermission = orgUser.type !== OrganizationUserType.Owner;\n        break;\n      case OrganizationUserType.Custom:\n        callingUserHasPermission =\n          orgUser.type !== OrganizationUserType.Owner &&\n          orgUser.type !== OrganizationUserType.Admin;\n        break;\n    }\n\n    // Final\n    return (\n      this.organization.canManageUsersPassword &&\n      callingUserHasPermission &&\n      this.organization.useResetPassword &&\n      this.organization.hasPublicAndPrivateKeys &&\n      orgUser.resetPasswordEnrolled &&\n      this.orgResetPasswordPolicyEnabled &&\n      orgUser.status === OrganizationUserStatusType.Confirmed\n    );\n  }\n\n  showEnrolledStatus(orgUser: OrganizationUserUserDetailsResponse): boolean {\n    return (\n      this.organization.useResetPassword &&\n      orgUser.resetPasswordEnrolled &&\n      this.orgResetPasswordPolicyEnabled\n    );\n  }\n\n  private getManageBillingText(): string {\n    return this.organization.canEditSubscription ? \"ManageBilling\" : \"NoManageBilling\";\n  }\n\n  private getProductKey(productType: ProductType): string {\n    let product = \"\";\n    switch (productType) {\n      case ProductType.Free:\n        product = \"freeOrg\";\n        break;\n      case ProductType.TeamsStarter:\n        product = \"teamsStarterPlan\";\n        break;\n      default:\n        throw new Error(`Unsupported product type: ${productType}`);\n    }\n    return `${product}InvLimitReached${this.getManageBillingText()}`;\n  }\n\n  private getDialogTitle(productType: ProductType): string {\n    switch (productType) {\n      case ProductType.Free:\n        return \"upgrade\";\n      case ProductType.TeamsStarter:\n        return \"contactSupportShort\";\n      default:\n        throw new Error(`Unsupported product type: ${productType}`);\n    }\n  }\n\n  private getDialogContent(): string {\n    return this.i18nService.t(\n      this.getProductKey(this.organization.planProductType),\n      this.organization.seats\n    );\n  }\n\n  private getAcceptButtonText(): string {\n    if (!this.organization.canEditSubscription) {\n      return this.i18nService.t(\"ok\");\n    }\n\n    return this.i18nService.t(this.getDialogTitle(this.organization.planProductType));\n  }\n\n  private async handleDialogClose(result: boolean | undefined): Promise<void> {\n    if (!result || !this.organization.canEditSubscription) {\n      return;\n    }\n\n    switch (this.organization.planProductType) {\n      case ProductType.Free:\n        await this.router.navigate(\n          [\"/organizations\", this.organization.id, \"billing\", \"subscription\"],\n          { queryParams: { upgrade: true } }\n        );\n        break;\n      case ProductType.TeamsStarter:\n        window.open(\"https://bitwarden.com/contact/\", \"_blank\");\n        break;\n      default:\n        throw new Error(`Unsupported product type: ${this.organization.planProductType}`);\n    }\n  }\n\n  private async showSeatLimitReachedDialog(): Promise<void> {\n    const orgUpgradeSimpleDialogOpts: SimpleDialogOptions = {\n      title: this.i18nService.t(\"upgradeOrganization\"),\n      content: this.getDialogContent(),\n      type: \"primary\",\n      acceptButtonText: this.getAcceptButtonText(),\n    };\n\n    if (!this.organization.canEditSubscription) {\n      orgUpgradeSimpleDialogOpts.cancelButtonText = null;\n    }\n\n    const simpleDialog = this.dialogService.openSimpleDialogRef(orgUpgradeSimpleDialogOpts);\n    firstValueFrom(simpleDialog.closed).then(this.handleDialogClose.bind(this));\n  }\n\n  async edit(user: OrganizationUserView, initialTab: MemberDialogTab = MemberDialogTab.Role) {\n    // Invite User: Add Flow\n    // Click on user email: Edit Flow\n\n    // User attempting to invite new users in a free org with max users\n    if (\n      !user &&\n      this.allUsers.length === this.organization.seats &&\n      (this.organization.planProductType === ProductType.Free ||\n        this.organization.planProductType === ProductType.TeamsStarter)\n    ) {\n      // Show org upgrade modal\n      await this.showSeatLimitReachedDialog();\n      return;\n    }\n\n    const dialog = openUserAddEditDialog(this.dialogService, {\n      data: {\n        name: this.userNamePipe.transform(user),\n        organizationId: this.organization.id,\n        organizationUserId: user != null ? user.id : null,\n        allOrganizationUserEmails: this.allUsers?.map((user) => user.email) ?? [],\n        usesKeyConnector: user?.usesKeyConnector,\n        initialTab: initialTab,\n      },\n    });\n\n    const result = await lastValueFrom(dialog.closed);\n    switch (result) {\n      case MemberDialogResult.Deleted:\n        this.removeUser(user);\n        break;\n      case MemberDialogResult.Saved:\n      case MemberDialogResult.Revoked:\n      case MemberDialogResult.Restored:\n        this.load();\n        break;\n    }\n  }\n\n  async bulkRemove() {\n    if (this.actionPromise != null) {\n      return;\n    }\n\n    const [modal] = await this.modalService.openViewRef(\n      BulkRemoveComponent,\n      this.bulkRemoveModalRef,\n      (comp) => {\n        comp.organizationId = this.organization.id;\n        comp.users = this.getCheckedUsers();\n      }\n    );\n\n    await modal.onClosedPromise();\n    await this.load();\n  }\n\n  async bulkRevoke() {\n    await this.bulkRevokeOrRestore(true);\n  }\n\n  async bulkRestore() {\n    await this.bulkRevokeOrRestore(false);\n  }\n\n  async bulkRevokeOrRestore(isRevoking: boolean) {\n    if (this.actionPromise != null) {\n      return;\n    }\n\n    const ref = BulkRestoreRevokeComponent.open(this.dialogService, {\n      organizationId: this.organization.id,\n      users: this.getCheckedUsers(),\n      isRevoking: isRevoking,\n    });\n\n    await firstValueFrom(ref.closed);\n    await this.load();\n  }\n\n  async bulkReinvite() {\n    if (this.actionPromise != null) {\n      return;\n    }\n\n    const users = this.getCheckedUsers();\n    const filteredUsers = users.filter((u) => u.status === OrganizationUserStatusType.Invited);\n\n    if (filteredUsers.length <= 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"noSelectedUsersApplicable\")\n      );\n      return;\n    }\n\n    try {\n      const response = this.organizationUserService.postManyOrganizationUserReinvite(\n        this.organization.id,\n        filteredUsers.map((user) => user.id)\n      );\n      this.showBulkStatus(\n        users,\n        filteredUsers,\n        response,\n        this.i18nService.t(\"bulkReinviteMessage\")\n      );\n    } catch (e) {\n      this.validationService.showError(e);\n    }\n    this.actionPromise = null;\n  }\n\n  async bulkConfirm() {\n    if (this.actionPromise != null) {\n      return;\n    }\n\n    const [modal] = await this.modalService.openViewRef(\n      BulkConfirmComponent,\n      this.bulkConfirmModalRef,\n      (comp) => {\n        comp.organizationId = this.organization.id;\n        comp.users = this.getCheckedUsers();\n      }\n    );\n\n    await modal.onClosedPromise();\n    await this.load();\n  }\n\n  async bulkEnableSM() {\n    const users = this.getCheckedUsers();\n    if (users.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"noSelectedUsersApplicable\")\n      );\n      return;\n    }\n\n    const dialogRef = BulkEnableSecretsManagerDialogComponent.open(this.dialogService, {\n      orgId: this.organization.id,\n      users,\n    });\n\n    await lastValueFrom(dialogRef.closed);\n    this.selectAll(false);\n  }\n\n  async events(user: OrganizationUserView) {\n    await openEntityEventsDialog(this.dialogService, {\n      data: {\n        name: this.userNamePipe.transform(user),\n        organizationId: this.organization.id,\n        entityId: user.id,\n        showUser: false,\n        entity: \"user\",\n      },\n    });\n  }\n\n  async resetPassword(user: OrganizationUserView) {\n    const [modal] = await this.modalService.openViewRef(\n      ResetPasswordComponent,\n      this.resetPasswordModalRef,\n      (comp) => {\n        comp.name = this.userNamePipe.transform(user);\n        comp.email = user != null ? user.email : null;\n        comp.organizationId = this.organization.id;\n        comp.id = user != null ? user.id : null;\n\n        // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n        comp.onPasswordReset.subscribe(() => {\n          modal.close();\n          this.load();\n        });\n      }\n    );\n  }\n\n  protected async removeUserConfirmationDialog(user: OrganizationUserView) {\n    const content = user.usesKeyConnector\n      ? \"removeUserConfirmationKeyConnector\"\n      : \"removeOrgUserConfirmation\";\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: {\n        key: \"removeUserIdAccess\",\n        placeholders: [this.userNamePipe.transform(user)],\n      },\n      content: { key: content },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    if (user.status > OrganizationUserStatusType.Invited && user.hasMasterPassword === false) {\n      return await this.noMasterPasswordConfirmationDialog(user);\n    }\n\n    return true;\n  }\n\n  protected async revokeUserConfirmationDialog(user: OrganizationUserView) {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"revokeAccess\", placeholders: [this.userNamePipe.transform(user)] },\n      content: this.revokeWarningMessage(),\n      acceptButtonText: { key: \"revokeAccess\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return false;\n    }\n\n    if (user.status > OrganizationUserStatusType.Invited && user.hasMasterPassword === false) {\n      return await this.noMasterPasswordConfirmationDialog(user);\n    }\n\n    return true;\n  }\n\n  private async showBulkStatus(\n    users: OrganizationUserView[],\n    filteredUsers: OrganizationUserView[],\n    request: Promise<ListResponse<OrganizationUserBulkResponse>>,\n    successfullMessage: string\n  ) {\n    const [modal, childComponent] = await this.modalService.openViewRef(\n      BulkStatusComponent,\n      this.bulkStatusModalRef,\n      (comp) => {\n        comp.loading = true;\n      }\n    );\n\n    // Workaround to handle closing the modal shortly after it has been opened\n    let close = false;\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    modal.onShown.subscribe(() => {\n      if (close) {\n        modal.close();\n      }\n    });\n\n    try {\n      const response = await request;\n\n      if (modal) {\n        const keyedErrors: any = response.data\n          .filter((r) => r.error !== \"\")\n          .reduce((a, x) => ({ ...a, [x.id]: x.error }), {});\n        const keyedFilteredUsers: any = filteredUsers.reduce((a, x) => ({ ...a, [x.id]: x }), {});\n\n        childComponent.users = users.map((user) => {\n          let message = keyedErrors[user.id] ?? successfullMessage;\n          // eslint-disable-next-line\n          if (!keyedFilteredUsers.hasOwnProperty(user.id)) {\n            message = this.i18nService.t(\"bulkFilteredMessage\");\n          }\n\n          return {\n            user: user,\n            error: keyedErrors.hasOwnProperty(user.id), // eslint-disable-line\n            message: message,\n          };\n        });\n        childComponent.loading = false;\n      }\n    } catch {\n      close = true;\n      modal.close();\n    }\n  }\n\n  private async noMasterPasswordConfirmationDialog(user: OrganizationUserView) {\n    return this.dialogService.openSimpleDialog({\n      title: {\n        key: \"removeOrgUserNoMasterPasswordTitle\",\n      },\n      content: {\n        key: \"removeOrgUserNoMasterPasswordDesc\",\n        placeholders: [this.userNamePipe.transform(user)],\n      },\n      type: \"warning\",\n    });\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\n\nimport { canAccessMembersTab } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\n\nimport { OrganizationPermissionsGuard } from \"../guards/org-permissions.guard\";\n\nimport { PeopleComponent } from \"./people.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: PeopleComponent,\n    canActivate: [OrganizationPermissionsGuard],\n    data: {\n      titleId: \"members\",\n      organizationPermissions: canAccessMembersTab,\n    },\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MembersRoutingModule {}\n","import { NgModule } from \"@angular/core\";\n\nimport { PasswordCalloutComponent } from \"@bitwarden/auth\";\n\nimport { LooseComponentsModule } from \"../../../shared\";\nimport { SharedOrganizationModule } from \"../shared\";\n\nimport { BulkConfirmComponent } from \"./components/bulk/bulk-confirm.component\";\nimport { BulkEnableSecretsManagerDialogComponent } from \"./components/bulk/bulk-enable-sm-dialog.component\";\nimport { BulkRemoveComponent } from \"./components/bulk/bulk-remove.component\";\nimport { BulkRestoreRevokeComponent } from \"./components/bulk/bulk-restore-revoke.component\";\nimport { BulkStatusComponent } from \"./components/bulk/bulk-status.component\";\nimport { UserDialogModule } from \"./components/member-dialog\";\nimport { ResetPasswordComponent } from \"./components/reset-password.component\";\nimport { MembersRoutingModule } from \"./members-routing.module\";\nimport { PeopleComponent } from \"./people.component\";\n\n@NgModule({\n  imports: [\n    SharedOrganizationModule,\n    LooseComponentsModule,\n    MembersRoutingModule,\n    UserDialogModule,\n    PasswordCalloutComponent,\n  ],\n  declarations: [\n    BulkConfirmComponent,\n    BulkEnableSecretsManagerDialogComponent,\n    BulkRemoveComponent,\n    BulkRestoreRevokeComponent,\n    BulkStatusComponent,\n    PeopleComponent,\n    ResetPasswordComponent,\n  ],\n})\nexport class MembersModule {}\n"],"names":["commaSeparatedEmails","control","value","undefined","split","map","email","trim","find","_","multipleEmails","message","orgWithoutAdditionalSeatLimitReachedWithUpgradePathValidator","organization","allOrganizationUserEmails","errorMessage","newEmailsToAdd","Array","from","Set","filter","newEmailToAdd","some","existingEmail","planProductType","Free","length","seats","freePlanLimitReached","orgWithoutAdditionalSeatLimitReachedWithoutUpgradePathValidator","Families","TeamsStarter","orgSeatLimitReachedWithoutUpgradePath","onChildCheck","NestedCheckboxComponent","destroy$","Subject","onSavedUser","onDeletedUser","parentIndeterminate","this","children","key","every","ngOnInit","checkboxes","controls","parentId","valueChanges","pipe","takeUntil","subscribe","Object","values","forEach","setValue","emitEvent","parentCheckbox","entries","parentChecked","index","item","ngOnDestroy","next","complete","pascalize","s","camelToPascalCase","MemberDialogTab","MemberDialogResult","handleDependentPermissions","MemberDialogComponent","customUserTypeSelected","formGroup","type","Custom","accessAllCollections","constructor","params","dialogRef","i18nService","platformUtilsService","organizationService","formBuilder","collectionAdminService","groupService","userService","organizationUserService","dialogService","configService","flexibleCollectionsEnabled$","getFeatureFlag$","FlexibleCollections","loading","editMode","isRevoked","access","collections","organizationUserType","PermissionMode","showNoMasterPasswordWarning","collectionAccessItems","groupAccessItems","group","emails","updateOn","User","externalId","disabled","accessSecretsManager","groups","permissionsGroup","manageAssignedCollectionsGroup","manageAssignedCollections","editAssignedCollections","deleteAssignedCollections","manageAllCollectionsGroup","manageAllCollections","createNewCollections","editAnyCollection","deleteAnyCollection","accessEventLogs","accessImportExport","accessReports","manageGroups","manageSso","managePolicies","manageUsers","manageResetPassword","submit","markAllAsTouched","invalid","tabIndex","Role","showToast","t","canUseCustomPermissions","userView","id","organizationUserId","organizationId","accessAll","permissions","setRequestPermissions","v","Collection","m","save","maxEmailsCount","setErrors","tooManyEmails","invite","name","close","Saved","delete","usesKeyConnector","confirmed","openSimpleDialog","title","placeholders","content","noMasterPasswordConfirmationDialog","deleteOrganizationUser","Deleted","revoke","acceptButtonText","revokeOrganizationUser","Revoked","restore","restoreOrganizationUser","Restored","ProductType","initialTab","organization$","of","get","shareReplay","refCount","bufferSize","groups$","switchMap","useGroups","getAll","combineLatest","userDetails","useCustomPermissions","canUseSecretsManager","useSecretsManager","emailsControlValidators","required","emailsControl","setValidators","updateValueAndValidity","concat","c","mapCollectionToAccessItemView","g","mapGroupToAccessItemView","Group","labelName","listName","Error","status","Invited","hasMasterPassword","assignedCollectionsPermissions","allCollectionsPermissions","patchValue","collectionsFromGroups","includes","flatMap","accessSelection","collection","accessSelections","user","selection","permission","mapToAccessSelections","groupAccessSelections","groupId","mapToGroupAccessSelections","removeControl","check","select","checked","readOnly","selectAll","p","clearPermissions","partialPermissions","assign","document","getElementById","cancel","Canceled","result","readonly","readonlyPermission","viaGroupName","UserDialogModule","OrganizationUserConfirmRequest","OrganizationUserView","groupNames","collectionNames","static","response","view","BulkEnableSecretsManagerDialogComponent","data","dataSource","putOrganizationUserBulkEnableSecretsManager","orgId","u","users","open","BulkRestoreRevokeComponent","statuses","Map","done","performBulkUserAction","bulkMessage","isRevoking","entry","error","set","e","bulkTitle","titleKey","userIds","revokeManyOrganizationUsers","restoreManyOrganizationUsers","ResetPasswordComponent","passwordGenerationService","policyService","cryptoService","logService","onPasswordReset","newPassword","showPassword","masterPasswordPolicyOptions$","enforcedPasswordPolicyOptions","enforcedPolicyOptions","loggedOutWarningName","generatePassword","options","getOptions","passwordStrengthComponent","updatePasswordStrength","togglePassword","focus","copy","copyToClipboard","window","minimumPasswordLength","evaluateMasterPassword","passwordStrengthResult","score","formPromise","getOrganizationUserResetPasswordDetails","then","kdfType","kdf","kdfIterations","kdfMemory","kdfParallelism","resetPasswordKey","encryptedPrivateKey","orgSymKey","getOrgKey","decPrivateKey","decryptToBytes","decValue","rsaDecrypt","existingUserKey","newMasterKey","makeMasterKey","toLowerCase","newMasterKeyHash","hashMasterKey","newUserKey","encryptUserKeyWithMasterKey","request","encryptedString","newMasterPasswordHash","putOrganizationUserResetPassword","emit","getStrengthResult","bulkEnableSM","bulkConfirm","reinvite","confirm","edit","events","resetPassword","checkUser","remove","loadMore","bulkReinvite","bulkRestore","bulkRevoke","bulkRemove","PeopleComponent","apiService","route","modalService","searchService","validationService","policyApiService","searchPipe","userNamePipe","syncService","stateService","organizationApiService","router","collectionService","super","userType","userStatusType","memberTab","orgResetPasswordPolicyEnabled","canUseSecretsManager$","org","policies$","isProviderUser","getPolicies","mapPoliciesFromToken","queryParams","concatMap","qParams","policies","canManageUsersPassword","hasPublicAndPrivateKeys","orgShareKey","orgKeys","makeKeyPair","updateKeys","publicKey","privateKey","fullSync","resetPasswordPolicy","policy","ResetPassword","enabled","load","searchText","search","viewEvents","Confirmed","getUsers","groupsPromise","collectionsPromise","userPromise","getAllUsers","includeGroups","includeCollections","getGroupNameMap","getCollectionNameMap","usersResponse","groupNamesMap","collectionNamesMap","Promise","all","r","fromResponse","sort","collator","compare","groupNameMap","collectionMap","getCollections","decryptMany","deleteUser","revokeUser","restoreUser","reinviteUser","postOrganizationUserReinvite","confirmUser","orgKey","rsaEncrypt","postOrganizationUserConfirm","allowResetPassword","orgUser","callingUserHasPermission","Owner","Admin","useResetPassword","resetPasswordEnrolled","showEnrolledStatus","getManageBillingText","canEditSubscription","getProductKey","productType","product","getDialogTitle","getDialogContent","getAcceptButtonText","handleDialogClose","navigate","upgrade","showSeatLimitReachedDialog","orgUpgradeSimpleDialogOpts","cancelButtonText","simpleDialog","openSimpleDialogRef","firstValueFrom","closed","bind","allUsers","dialog","config","transform","lastValueFrom","removeUser","actionPromise","modal","openViewRef","bulkRemoveModalRef","comp","getCheckedUsers","onClosedPromise","bulkRevokeOrRestore","ref","filteredUsers","postManyOrganizationUserReinvite","showBulkStatus","showError","bulkConfirmModalRef","entityId","showUser","entity","resetPasswordModalRef","removeUserConfirmationDialog","revokeUserConfirmationDialog","revokeWarningMessage","successfullMessage","childComponent","bulkStatusModalRef","onShown","keyedErrors","reduce","a","x","keyedFilteredUsers","hasOwnProperty","routes","path","component","canActivate","titleId","organizationPermissions","MembersRoutingModule","forChild","MembersModule"],"sourceRoot":""}