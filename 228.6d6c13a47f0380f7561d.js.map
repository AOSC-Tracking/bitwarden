{"version":3,"file":"228.6d6c13a47f0380f7561d.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/./src/app/billing/individual/billing-history-view.component.html","webpack://@bitwarden/web-vault/./src/app/billing/individual/billing-history-view.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/individual/premium.component.html","webpack://@bitwarden/web-vault/./src/app/billing/individual/premium.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/individual/subscription.component.html","webpack://@bitwarden/web-vault/./src/app/billing/individual/subscription.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/individual/user-subscription.component.html","webpack://@bitwarden/web-vault/./src/app/billing/individual/user-subscription.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/individual/individual-billing-routing.module.ts","webpack://@bitwarden/web-vault/./src/app/billing/individual/individual-billing.module.ts"],"sourcesContent":["<div class=\"d-flex tabbed-header\">\n  <h1>\n    {{ \"billingHistory\" | i18n }}\n  </h1>\n  <button\n    type=\"button\"\n    bitButton\n    buttonType=\"secondary\"\n    (click)=\"load()\"\n    class=\"tw-ml-auto\"\n    *ngIf=\"firstLoaded\"\n    [disabled]=\"loading\"\n  >\n    <i class=\"bwi bwi-refresh bwi-fw\" [ngClass]=\"{ 'bwi-spin': loading }\" aria-hidden=\"true\"></i>\n    {{ \"refresh\" | i18n }}\n  </button>\n</div>\n<ng-container *ngIf=\"!firstLoaded && loading\">\n  <i\n    class=\"bwi bwi-spinner bwi-spin text-muted\"\n    title=\"{{ 'loading' | i18n }}\"\n    aria-hidden=\"true\"\n  ></i>\n  <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n</ng-container>\n<ng-container *ngIf=\"billing\">\n  <app-billing-history [billing]=\"billing\"></app-billing-history>\n</ng-container>\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { BillingHistoryResponse } from \"@bitwarden/common/billing/models/response/billing-history.response\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\n@Component({\n  templateUrl: \"billing-history-view.component.html\",\n})\nexport class BillingHistoryViewComponent implements OnInit {\n  loading = false;\n  firstLoaded = false;\n  billing: BillingHistoryResponse;\n\n  constructor(\n    private apiService: ApiService,\n    private platformUtilsService: PlatformUtilsService,\n    private router: Router,\n  ) {}\n\n  async ngOnInit() {\n    if (this.platformUtilsService.isSelfHost()) {\n      this.router.navigate([\"/settings/subscription\"]);\n      return;\n    }\n    await this.load();\n    this.firstLoaded = true;\n  }\n\n  async load() {\n    if (this.loading) {\n      return;\n    }\n    this.loading = true;\n    this.billing = await this.apiService.getUserBillingHistory();\n    this.loading = false;\n  }\n}\n","<div *ngIf=\"selfHosted\" class=\"page-header\">\n  <h1>{{ \"subscription\" | i18n }}</h1>\n</div>\n<div *ngIf=\"!selfHosted\" class=\"tabbed-header\">\n  <h1>{{ \"goPremium\" | i18n }}</h1>\n</div>\n<bit-callout\n  type=\"info\"\n  *ngIf=\"canAccessPremium\"\n  title=\"{{ 'youHavePremiumAccess' | i18n }}\"\n  icon=\"bwi bwi-star-f\"\n>\n  {{ \"alreadyPremiumFromOrg\" | i18n }}\n</bit-callout>\n<bit-callout type=\"success\">\n  <p>{{ \"premiumUpgradeUnlockFeatures\" | i18n }}</p>\n  <ul class=\"bwi-ul\">\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpStorage\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpTwoStepOptions\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpEmergency\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpReports\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpTotp\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpSupport\" | i18n }}\n    </li>\n    <li>\n      <i class=\"bwi bwi-check text-success bwi-li\" aria-hidden=\"true\"></i>\n      {{ \"premiumSignUpFuture\" | i18n }}\n    </li>\n  </ul>\n  <p class=\"text-lg\" [ngClass]=\"{ 'mb-0': !selfHosted }\">\n    {{\n      \"premiumPriceWithFamilyPlan\" | i18n: (premiumPrice | currency: \"$\") : familyPlanMaxUserCount\n    }}\n    <a routerLink=\"/create-organization\" [queryParams]=\"{ plan: 'families' }\">{{\n      \"bitwardenFamiliesPlan\" | i18n\n    }}</a>\n  </p>\n  <a\n    bitButton\n    href=\"{{ this.cloudWebVaultUrl }}/#/settings/premium\"\n    target=\"_blank\"\n    rel=\"noopener\"\n    buttonType=\"secondary\"\n    *ngIf=\"selfHosted\"\n  >\n    {{ \"purchasePremium\" | i18n }}\n  </a>\n</bit-callout>\n<ng-container *ngIf=\"selfHosted\">\n  <p>{{ \"uploadLicenseFilePremium\" | i18n }}</p>\n  <form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate>\n    <div class=\"form-group\">\n      <label for=\"file\">{{ \"licenseFile\" | i18n }}</label>\n      <input type=\"file\" id=\"file\" class=\"form-control-file\" name=\"file\" required />\n      <small class=\"form-text text-muted\">{{\n        \"licenseFileDesc\" | i18n: \"bitwarden_premium_license.json\"\n      }}</small>\n    </div>\n    <button type=\"submit\" buttonType=\"primary\" bitButton [loading]=\"form.loading\">\n      {{ \"submit\" | i18n }}\n    </button>\n  </form>\n</ng-container>\n<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" ngNativeValidate *ngIf=\"!selfHosted\">\n  <h2 class=\"mt-5\">{{ \"addons\" | i18n }}</h2>\n  <div class=\"row\">\n    <div class=\"form-group col-6\">\n      <label for=\"additionalStorage\">{{ \"additionalStorageGb\" | i18n }}</label>\n      <input\n        id=\"additionalStorage\"\n        class=\"form-control\"\n        type=\"number\"\n        name=\"AdditionalStorageGb\"\n        [(ngModel)]=\"additionalStorage\"\n        min=\"0\"\n        max=\"99\"\n        step=\"1\"\n        placeholder=\"{{ 'additionalStorageGbDesc' | i18n }}\"\n      />\n      <small class=\"text-muted form-text\">{{\n        \"additionalStorageIntervalDesc\"\n          | i18n: \"1 GB\" : (storageGbPrice | currency: \"$\") : (\"year\" | i18n)\n      }}</small>\n    </div>\n  </div>\n  <h2 class=\"spaced-header\">{{ \"summary\" | i18n }}</h2>\n  {{ \"premiumMembership\" | i18n }}: {{ premiumPrice | currency: \"$\" }} <br />\n  {{ \"additionalStorageGb\" | i18n }}: {{ additionalStorage || 0 }} GB &times;\n  {{ storageGbPrice | currency: \"$\" }} =\n  {{ additionalStorageTotal | currency: \"$\" }}\n  <hr class=\"my-3\" />\n  <h2 class=\"spaced-header mb-4\">{{ \"paymentInformation\" | i18n }}</h2>\n  <app-payment [hideBank]=\"true\"></app-payment>\n  <app-tax-info></app-tax-info>\n  <div id=\"price\" class=\"my-4\">\n    <div class=\"text-muted text-sm\">\n      {{ \"planPrice\" | i18n }}: {{ subtotal | currency: \"USD $\" }}\n      <br />\n      <ng-container>\n        {{ \"estimatedTax\" | i18n }}: {{ taxCharges | currency: \"USD $\" }}\n      </ng-container>\n    </div>\n    <hr class=\"my-1 col-3 ml-0\" />\n    <p class=\"text-lg\">\n      <strong>{{ \"total\" | i18n }}:</strong> {{ total | currency: \"USD $\" }}/{{ \"year\" | i18n }}\n    </p>\n  </div>\n  <small class=\"text-muted font-italic\">{{ \"paymentChargedAnnually\" | i18n }}</small>\n  <button type=\"submit\" bitButton [loading]=\"form.loading\">\n    {{ \"submit\" | i18n }}\n  </button>\n</form>\n","import { Component, OnInit, ViewChild } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { PaymentComponent, TaxInfoComponent } from \"../shared\";\n\n@Component({\n  templateUrl: \"premium.component.html\",\n})\nexport class PremiumComponent implements OnInit {\n  @ViewChild(PaymentComponent) paymentComponent: PaymentComponent;\n  @ViewChild(TaxInfoComponent) taxInfoComponent: TaxInfoComponent;\n\n  canAccessPremium = false;\n  selfHosted = false;\n  premiumPrice = 10;\n  familyPlanMaxUserCount = 6;\n  storageGbPrice = 4;\n  additionalStorage = 0;\n  cloudWebVaultUrl: string;\n\n  formPromise: Promise<any>;\n\n  constructor(\n    private apiService: ApiService,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private tokenService: TokenService,\n    private router: Router,\n    private messagingService: MessagingService,\n    private syncService: SyncService,\n    private logService: LogService,\n    private stateService: StateService,\n    private environmentService: EnvironmentService,\n  ) {\n    this.selfHosted = platformUtilsService.isSelfHost();\n    this.cloudWebVaultUrl = this.environmentService.getCloudWebVaultUrl();\n  }\n\n  async ngOnInit() {\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    const premiumPersonally = await this.stateService.getHasPremiumPersonally();\n    if (premiumPersonally) {\n      this.router.navigate([\"/settings/subscription/user-subscription\"]);\n      return;\n    }\n  }\n\n  async submit() {\n    let files: FileList = null;\n    if (this.selfHosted) {\n      const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n      files = fileEl.files;\n      if (files == null || files.length === 0) {\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"selectFile\"),\n        );\n        return;\n      }\n    }\n\n    try {\n      if (this.selfHosted) {\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        if (!this.tokenService.getEmailVerified()) {\n          this.platformUtilsService.showToast(\n            \"error\",\n            this.i18nService.t(\"errorOccurred\"),\n            this.i18nService.t(\"verifyEmailFirst\"),\n          );\n          return;\n        }\n\n        const fd = new FormData();\n        fd.append(\"license\", files[0]);\n        this.formPromise = this.apiService.postAccountLicense(fd).then(() => {\n          return this.finalizePremium();\n        });\n      } else {\n        this.formPromise = this.paymentComponent\n          .createPaymentToken()\n          .then((result) => {\n            const fd = new FormData();\n            fd.append(\"paymentMethodType\", result[1].toString());\n            if (result[0] != null) {\n              fd.append(\"paymentToken\", result[0]);\n            }\n            fd.append(\"additionalStorageGb\", (this.additionalStorage || 0).toString());\n            fd.append(\"country\", this.taxInfoComponent.taxInfo.country);\n            fd.append(\"postalCode\", this.taxInfoComponent.taxInfo.postalCode);\n            return this.apiService.postPremium(fd);\n          })\n          .then((paymentResponse) => {\n            if (!paymentResponse.success && paymentResponse.paymentIntentClientSecret != null) {\n              return this.paymentComponent.handleStripeCardPayment(\n                paymentResponse.paymentIntentClientSecret,\n                () => this.finalizePremium(),\n              );\n            } else {\n              return this.finalizePremium();\n            }\n          });\n      }\n      await this.formPromise;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async finalizePremium() {\n    await this.apiService.refreshIdentityToken();\n    await this.syncService.fullSync(true);\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"premiumUpdated\"));\n    this.messagingService.send(\"purchasedPremium\");\n    this.router.navigate([\"/settings/subscription/user-subscription\"]);\n  }\n\n  get additionalStorageTotal(): number {\n    return this.storageGbPrice * Math.abs(this.additionalStorage || 0);\n  }\n\n  get subtotal(): number {\n    return this.premiumPrice + this.additionalStorageTotal;\n  }\n\n  get taxCharges(): number {\n    return this.taxInfoComponent != null && this.taxInfoComponent.taxRate != null\n      ? (this.taxInfoComponent.taxRate / 100) * this.subtotal\n      : 0;\n  }\n\n  get total(): number {\n    return this.subtotal + this.taxCharges || 0;\n  }\n}\n","<div class=\"tabbed-nav d-flex flex-column\" *ngIf=\"!selfHosted\">\n  <ul class=\"nav nav-tabs\">\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" [routerLink]=\"subscriptionRoute\" routerLinkActive=\"active\">\n        {{ \"subscription\" | i18n }}\n      </a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" routerLink=\"payment-method\" routerLinkActive=\"active\">\n        {{ \"paymentMethod\" | i18n }}\n      </a>\n    </li>\n    <li class=\"nav-item\">\n      <a class=\"nav-link\" routerLink=\"billing-history\" routerLinkActive=\"active\">\n        {{ \"billingHistory\" | i18n }}\n      </a>\n    </li>\n  </ul>\n</div>\n<router-outlet></router-outlet>\n","import { Component } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\n\n@Component({\n  templateUrl: \"subscription.component.html\",\n})\nexport class SubscriptionComponent {\n  hasPremium: boolean;\n  selfHosted: boolean;\n\n  constructor(\n    private stateService: StateService,\n    private platformUtilsService: PlatformUtilsService,\n  ) {}\n\n  async ngOnInit() {\n    this.hasPremium = await this.stateService.getHasPremiumPersonally();\n    this.selfHosted = this.platformUtilsService.isSelfHost();\n  }\n\n  get subscriptionRoute(): string {\n    return this.hasPremium ? \"user-subscription\" : \"premium\";\n  }\n}\n","<div\n  [ngClass]=\"{\n    'page-header': selfHosted,\n    'tabbed-header': !selfHosted\n  }\"\n>\n  <h1>\n    {{ title }}\n    <small *ngIf=\"firstLoaded && loading\">\n      <i\n        class=\"bwi bwi-spinner bwi-spin text-muted\"\n        title=\"{{ 'loading' | i18n }}\"\n        aria-hidden=\"true\"\n      ></i>\n      <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n    </small>\n  </h1>\n</div>\n<ng-container *ngIf=\"!firstLoaded && loading\">\n  <i\n    class=\"bwi bwi-spinner bwi-spin text-muted\"\n    title=\"{{ 'loading' | i18n }}\"\n    aria-hidden=\"true\"\n  ></i>\n  <span class=\"sr-only\">{{ \"loading\" | i18n }}</span>\n</ng-container>\n<ng-container *ngIf=\"sub\">\n  <bit-callout\n    type=\"warning\"\n    title=\"{{ 'canceled' | i18n }}\"\n    *ngIf=\"subscription && subscription.cancelled\"\n  >\n    {{ \"subscriptionCanceled\" | i18n }}</bit-callout\n  >\n  <bit-callout\n    type=\"warning\"\n    title=\"{{ 'pendingCancellation' | i18n }}\"\n    *ngIf=\"subscriptionMarkedForCancel\"\n  >\n    <p>{{ \"subscriptionPendingCanceled\" | i18n }}</p>\n    <button\n      bitButton\n      type=\"button\"\n      buttonType=\"secondary\"\n      #reinstateBtn\n      class=\"btn-submit\"\n      (click)=\"reinstate()\"\n      [appApiAction]=\"reinstatePromise\"\n      [disabled]=\"$any(reinstateBtn).loading\"\n    >\n      <i class=\"bwi bwi-spinner bwi-spin\" title=\"{{ 'loading' | i18n }}\" aria-hidden=\"true\"></i>\n      <span>{{ \"reinstateSubscription\" | i18n }}</span>\n    </button>\n  </bit-callout>\n  <dl *ngIf=\"selfHosted\">\n    <dt>{{ \"expiration\" | i18n }}</dt>\n    <dd *ngIf=\"sub.expiration\">{{ sub.expiration | date: \"mediumDate\" }}</dd>\n    <dd *ngIf=\"!sub.expiration\">{{ \"neverExpires\" | i18n }}</dd>\n  </dl>\n  <div class=\"row\" *ngIf=\"!selfHosted\">\n    <div class=\"col-4\">\n      <dl>\n        <dt>{{ \"status\" | i18n }}</dt>\n        <dd>\n          <span class=\"text-capitalize\">{{ (subscription && subscription.status) || \"-\" }}</span>\n          <span bitBadge badgeType=\"warning\" *ngIf=\"subscriptionMarkedForCancel\">{{\n            \"pendingCancellation\" | i18n\n          }}</span>\n        </dd>\n        <dt>{{ \"nextCharge\" | i18n }}</dt>\n        <dd>\n          {{\n            nextInvoice\n              ? (nextInvoice.date | date: \"mediumDate\") +\n                \", \" +\n                (nextInvoice.amount | currency: \"$\")\n              : \"-\"\n          }}\n        </dd>\n      </dl>\n    </div>\n    <div class=\"col-8\" *ngIf=\"subscription\">\n      <strong class=\"d-block mb-1\">{{ \"details\" | i18n }}</strong>\n      <table class=\"table\">\n        <tbody>\n          <tr *ngFor=\"let i of subscription.items\">\n            <td>\n              {{ i.name }} {{ i.quantity > 1 ? \"&times;\" + i.quantity : \"\" }} @\n              {{ i.amount | currency: \"$\" }}\n            </td>\n            <td>{{ i.quantity * i.amount | currency: \"$\" }} /{{ i.interval | i18n }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <ng-container *ngIf=\"selfHosted\">\n    <div>\n      <button type=\"button\" bitButton buttonType=\"secondary\" (click)=\"updateLicense()\">\n        {{ \"updateLicense\" | i18n }}\n      </button>\n      <a\n        bitButton\n        buttonType=\"secondary\"\n        href=\"{{ this.cloudWebVaultUrl }}/#/settings/subscription\"\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        {{ \"launchCloudSubscription\" | i18n }}\n      </a>\n    </div>\n    <div class=\"card mt-3\" *ngIf=\"showUpdateLicense\">\n      <div class=\"card-body\">\n        <button\n          type=\"button\"\n          class=\"close\"\n          appA11yTitle=\"{{ 'cancel' | i18n }}\"\n          (click)=\"closeUpdateLicense(false)\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n        <h3 class=\"card-body-header\">{{ \"updateLicense\" | i18n }}</h3>\n        <app-update-license\n          (onUpdated)=\"closeUpdateLicense(true)\"\n          (onCanceled)=\"closeUpdateLicense(false)\"\n        >\n        </app-update-license>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"!selfHosted\">\n    <div class=\"d-flex\">\n      <button\n        bitButton\n        type=\"button\"\n        buttonType=\"secondary\"\n        (click)=\"downloadLicense()\"\n        *ngIf=\"!subscription || !subscription.cancelled\"\n      >\n        {{ \"downloadLicense\" | i18n }}\n      </button>\n      <button\n        bitButton\n        #cancelBtn\n        type=\"button\"\n        buttonType=\"danger\"\n        class=\"btn-submit tw-ml-auto\"\n        (click)=\"cancel()\"\n        [appApiAction]=\"cancelPromise\"\n        [disabled]=\"$any(cancelBtn).loading\"\n        *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\"\n      >\n        <i class=\"bwi bwi-spinner bwi-spin\" title=\"{{ 'loading' | i18n }}\" aria-hidden=\"true\"></i>\n        <span>{{ \"cancelSubscription\" | i18n }}</span>\n      </button>\n    </div>\n    <h2 class=\"spaced-header\">{{ \"storage\" | i18n }}</h2>\n    <p>{{ \"subscriptionStorage\" | i18n: sub.maxStorageGb || 0 : sub.storageName || \"0 MB\" }}</p>\n    <div class=\"progress\">\n      <div\n        class=\"progress-bar bg-success\"\n        role=\"progressbar\"\n        [ngStyle]=\"{ width: storageProgressWidth + '%' }\"\n        [attr.aria-valuenow]=\"storagePercentage\"\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n      >\n        {{ storagePercentage / 100 | percent }}\n      </div>\n    </div>\n    <ng-container *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\">\n      <div class=\"mt-3\">\n        <div class=\"d-flex\" *ngIf=\"!showAdjustStorage\">\n          <button bitButton type=\"button\" buttonType=\"secondary\" (click)=\"adjustStorage(true)\">\n            {{ \"addStorage\" | i18n }}\n          </button>\n          <button\n            bitButton\n            type=\"button\"\n            buttonType=\"secondary\"\n            class=\"tw-ml-1\"\n            (click)=\"adjustStorage(false)\"\n          >\n            {{ \"removeStorage\" | i18n }}\n          </button>\n        </div>\n        <app-adjust-storage\n          [storageGbPrice]=\"4\"\n          [add]=\"adjustStorageAdd\"\n          (onAdjusted)=\"closeStorage(true)\"\n          (onCanceled)=\"closeStorage(false)\"\n          *ngIf=\"showAdjustStorage\"\n        ></app-adjust-storage>\n      </div>\n    </ng-container>\n  </ng-container>\n</ng-container>\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { SubscriptionResponse } from \"@bitwarden/common/billing/models/response/subscription.response\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { StateService } from \"@bitwarden/common/platform/abstractions/state.service\";\nimport { DialogService } from \"@bitwarden/components\";\n\n@Component({\n  templateUrl: \"user-subscription.component.html\",\n})\nexport class UserSubscriptionComponent implements OnInit {\n  loading = false;\n  firstLoaded = false;\n  adjustStorageAdd = true;\n  showAdjustStorage = false;\n  showUpdateLicense = false;\n  sub: SubscriptionResponse;\n  selfHosted = false;\n  cloudWebVaultUrl: string;\n\n  cancelPromise: Promise<any>;\n  reinstatePromise: Promise<any>;\n\n  constructor(\n    private stateService: StateService,\n    private apiService: ApiService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private router: Router,\n    private logService: LogService,\n    private fileDownloadService: FileDownloadService,\n    private dialogService: DialogService,\n    private environmentService: EnvironmentService,\n  ) {\n    this.selfHosted = platformUtilsService.isSelfHost();\n    this.cloudWebVaultUrl = this.environmentService.getCloudWebVaultUrl();\n  }\n\n  async ngOnInit() {\n    await this.load();\n    this.firstLoaded = true;\n  }\n\n  async load() {\n    if (this.loading) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    if (this.stateService.getHasPremiumPersonally()) {\n      this.loading = true;\n      this.sub = await this.apiService.getUserSubscription();\n    } else {\n      this.router.navigate([\"/settings/subscription/premium\"]);\n      return;\n    }\n\n    this.loading = false;\n  }\n\n  async reinstate() {\n    if (this.loading) {\n      return;\n    }\n\n    if (this.usingInAppPurchase) {\n      this.dialogService.openSimpleDialog({\n        title: { key: \"cancelSubscription\" },\n        content: { key: \"manageSubscriptionFromStore\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"warning\",\n      });\n\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"reinstateSubscription\" },\n      content: { key: \"reinstateConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      this.reinstatePromise = this.apiService.postReinstatePremium();\n      await this.reinstatePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"reinstated\"));\n      this.load();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async cancel() {\n    if (this.loading) {\n      return;\n    }\n\n    if (this.usingInAppPurchase) {\n      this.dialogService.openSimpleDialog({\n        title: { key: \"cancelSubscription\" },\n        content: { key: \"manageSubscriptionFromStore\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"warning\",\n      });\n\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"cancelSubscription\" },\n      content: { key: \"cancelConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      this.cancelPromise = this.apiService.postCancelPremium();\n      await this.cancelPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"canceledSubscription\"),\n      );\n      this.load();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  downloadLicense() {\n    if (this.loading) {\n      return;\n    }\n\n    const licenseString = JSON.stringify(this.sub.license, null, 2);\n    this.fileDownloadService.download({\n      fileName: \"bitwarden_premium_license.json\",\n      blobData: licenseString,\n    });\n  }\n\n  updateLicense() {\n    if (this.loading) {\n      return;\n    }\n    this.showUpdateLicense = true;\n  }\n\n  closeUpdateLicense(load: boolean) {\n    this.showUpdateLicense = false;\n    if (load) {\n      this.load();\n    }\n  }\n\n  adjustStorage(add: boolean) {\n    if (this.usingInAppPurchase) {\n      this.dialogService.openSimpleDialog({\n        title: { key: add ? \"addStorage\" : \"removeStorage\" },\n        content: { key: \"cannotPerformInAppPurchase\" },\n        acceptButtonText: { key: \"ok\" },\n        cancelButtonText: null,\n        type: \"warning\",\n      });\n\n      return;\n    }\n    this.adjustStorageAdd = add;\n    this.showAdjustStorage = true;\n  }\n\n  closeStorage(load: boolean) {\n    this.showAdjustStorage = false;\n    if (load) {\n      this.load();\n    }\n  }\n\n  get subscriptionMarkedForCancel() {\n    return (\n      this.subscription != null && !this.subscription.cancelled && this.subscription.cancelAtEndDate\n    );\n  }\n\n  get subscription() {\n    return this.sub != null ? this.sub.subscription : null;\n  }\n\n  get nextInvoice() {\n    return this.sub != null ? this.sub.upcomingInvoice : null;\n  }\n\n  get storagePercentage() {\n    return this.sub != null && this.sub.maxStorageGb\n      ? +(100 * (this.sub.storageGb / this.sub.maxStorageGb)).toFixed(2)\n      : 0;\n  }\n\n  get storageProgressWidth() {\n    return this.storagePercentage < 5 ? 5 : 0;\n  }\n\n  get usingInAppPurchase() {\n    return this.sub != null ? this.sub.usingInAppPurchase : false;\n  }\n\n  get title(): string {\n    return this.i18nService.t(this.selfHosted ? \"subscription\" : \"premiumMembership\");\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\n\nimport { PaymentMethodComponent } from \"../shared\";\n\nimport { BillingHistoryViewComponent } from \"./billing-history-view.component\";\nimport { PremiumComponent } from \"./premium.component\";\nimport { SubscriptionComponent } from \"./subscription.component\";\nimport { UserSubscriptionComponent } from \"./user-subscription.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: SubscriptionComponent,\n    data: { titleId: \"subscription\" },\n    children: [\n      { path: \"\", pathMatch: \"full\", redirectTo: \"premium\" },\n      {\n        path: \"user-subscription\",\n        component: UserSubscriptionComponent,\n        data: { titleId: \"premiumMembership\" },\n      },\n      {\n        path: \"premium\",\n        component: PremiumComponent,\n        data: { titleId: \"goPremium\" },\n      },\n      {\n        path: \"payment-method\",\n        component: PaymentMethodComponent,\n        data: { titleId: \"paymentMethod\" },\n      },\n      {\n        path: \"billing-history\",\n        component: BillingHistoryViewComponent,\n        data: { titleId: \"billingHistory\" },\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IndividualBillingRoutingModule {}\n","import { NgModule } from \"@angular/core\";\n\nimport { BillingSharedModule } from \"../shared\";\n\nimport { BillingHistoryViewComponent } from \"./billing-history-view.component\";\nimport { IndividualBillingRoutingModule } from \"./individual-billing-routing.module\";\nimport { PremiumComponent } from \"./premium.component\";\nimport { SubscriptionComponent } from \"./subscription.component\";\nimport { UserSubscriptionComponent } from \"./user-subscription.component\";\n\n@NgModule({\n  imports: [IndividualBillingRoutingModule, BillingSharedModule],\n  declarations: [\n    SubscriptionComponent,\n    BillingHistoryViewComponent,\n    UserSubscriptionComponent,\n    PremiumComponent,\n  ],\n})\nexport class IndividualBillingModule {}\n"],"names":["load","BillingHistoryViewComponent","constructor","apiService","platformUtilsService","router","loading","firstLoaded","ngOnInit","this","isSelfHost","navigate","billing","getUserBillingHistory","submit","PremiumComponent","i18nService","tokenService","messagingService","syncService","logService","stateService","environmentService","canAccessPremium","selfHosted","premiumPrice","familyPlanMaxUserCount","storageGbPrice","additionalStorage","cloudWebVaultUrl","getCloudWebVaultUrl","getCanAccessPremium","getHasPremiumPersonally","files","document","getElementById","length","showToast","t","getEmailVerified","fd","FormData","append","formPromise","postAccountLicense","then","finalizePremium","paymentComponent","createPaymentToken","result","toString","taxInfoComponent","taxInfo","country","postalCode","postPremium","paymentResponse","success","paymentIntentClientSecret","handleStripeCardPayment","e","error","refreshIdentityToken","fullSync","send","additionalStorageTotal","Math","abs","subtotal","taxCharges","taxRate","total","SubscriptionComponent","hasPremium","subscriptionRoute","reinstate","closeUpdateLicense","updateLicense","downloadLicense","cancel","adjustStorage","closeStorage","UserSubscriptionComponent","fileDownloadService","dialogService","adjustStorageAdd","showAdjustStorage","showUpdateLicense","sub","getUserSubscription","usingInAppPurchase","openSimpleDialog","title","key","content","acceptButtonText","cancelButtonText","type","reinstatePromise","postReinstatePremium","cancelPromise","postCancelPremium","licenseString","JSON","stringify","license","download","fileName","blobData","add","subscriptionMarkedForCancel","subscription","cancelled","cancelAtEndDate","nextInvoice","upcomingInvoice","storagePercentage","maxStorageGb","storageGb","toFixed","storageProgressWidth","routes","path","component","data","titleId","children","pathMatch","redirectTo","IndividualBillingRoutingModule","forChild","IndividualBillingModule"],"sourceRoot":""}